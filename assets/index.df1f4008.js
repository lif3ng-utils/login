const og=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};og();function cu(e,t){const r=Object.create(null),n=e.split(",");for(let o=0;o<n.length;o++)r[n[o]]=!0;return t?o=>!!r[o.toLowerCase()]:o=>!!r[o]}const sg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ag=cu(sg);function ul(e){return!!e||e===""}function fu(e){if(ee(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],o=ke(n)?fg(n):fu(n);if(o)for(const i in o)t[i]=o[i]}return t}else{if(ke(e))return e;if(je(e))return e}}const ug=/;(?![^(]*\))/g,cg=/:(.+)/;function fg(e){const t={};return e.split(ug).forEach(r=>{if(r){const n=r.split(cg);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function xr(e){let t="";if(ke(e))t=e;else if(ee(e))for(let r=0;r<e.length;r++){const n=xr(e[r]);n&&(t+=n+" ")}else if(je(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const cl=e=>ke(e)?e:e==null?"":ee(e)||je(e)&&(e.toString===dl||!ie(e.toString))?JSON.stringify(e,fl,2):String(e),fl=(e,t)=>t&&t.__v_isRef?fl(e,t.value):Un(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,o])=>(r[`${n} =>`]=o,r),{})}:ll(t)?{[`Set(${t.size})`]:[...t.values()]}:je(t)&&!ee(t)&&!pl(t)?String(t):t,ve={},Dn=[],Wt=()=>{},lg=()=>!1,hg=/^on[^a-z]/,Vo=e=>hg.test(e),lu=e=>e.startsWith("onUpdate:"),Ke=Object.assign,hu=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},dg=Object.prototype.hasOwnProperty,se=(e,t)=>dg.call(e,t),ee=Array.isArray,Un=e=>Jo(e)==="[object Map]",ll=e=>Jo(e)==="[object Set]",ie=e=>typeof e=="function",ke=e=>typeof e=="string",du=e=>typeof e=="symbol",je=e=>e!==null&&typeof e=="object",hl=e=>je(e)&&ie(e.then)&&ie(e.catch),dl=Object.prototype.toString,Jo=e=>dl.call(e),pg=e=>Jo(e).slice(8,-1),pl=e=>Jo(e)==="[object Object]",pu=e=>ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,mo=cu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yo=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},gg=/-(\w)/g,rr=Yo(e=>e.replace(gg,(t,r)=>r?r.toUpperCase():"")),yg=/\B([A-Z])/g,Vn=Yo(e=>e.replace(yg,"-$1").toLowerCase()),zo=Yo(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ds=Yo(e=>e?`on${zo(e)}`:""),Pi=(e,t)=>!Object.is(e,t),_o=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},xo=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Na=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let dc;const mg=()=>dc||(dc=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Vt;class _g{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Vt&&(this.parent=Vt,this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}run(t){if(this.active){const r=Vt;try{return Vt=this,t()}finally{Vt=r}}}on(){Vt=this}off(){Vt=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function vg(e,t=Vt){t&&t.active&&t.effects.push(e)}const gu=e=>{const t=new Set(e);return t.w=0,t.n=0,t},gl=e=>(e.w&Lr)>0,yl=e=>(e.n&Lr)>0,Eg=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Lr},wg=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const o=t[n];gl(o)&&!yl(o)?o.delete(e):t[r++]=o,o.w&=~Lr,o.n&=~Lr}t.length=r}},Ra=new WeakMap;let Ii=0,Lr=1;const Ca=30;let kt;const tn=Symbol(""),Pa=Symbol("");class yu{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,vg(this,n)}run(){if(!this.active)return this.fn();let t=kt,r=Pr;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=kt,kt=this,Pr=!0,Lr=1<<++Ii,Ii<=Ca?Eg(this):pc(this),this.fn()}finally{Ii<=Ca&&wg(this),Lr=1<<--Ii,kt=this.parent,Pr=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){kt===this?this.deferStop=!0:this.active&&(pc(this),this.onStop&&this.onStop(),this.active=!1)}}function pc(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let Pr=!0;const ml=[];function Jn(){ml.push(Pr),Pr=!1}function Yn(){const e=ml.pop();Pr=e===void 0?!0:e}function yt(e,t,r){if(Pr&&kt){let n=Ra.get(e);n||Ra.set(e,n=new Map);let o=n.get(r);o||n.set(r,o=gu()),_l(o)}}function _l(e,t){let r=!1;Ii<=Ca?yl(e)||(e.n|=Lr,r=!gl(e)):r=!e.has(kt),r&&(e.add(kt),kt.deps.push(e))}function gr(e,t,r,n,o,i){const s=Ra.get(e);if(!s)return;let u=[];if(t==="clear")u=[...s.values()];else if(r==="length"&&ee(e))s.forEach((f,a)=>{(a==="length"||a>=n)&&u.push(f)});else switch(r!==void 0&&u.push(s.get(r)),t){case"add":ee(e)?pu(r)&&u.push(s.get("length")):(u.push(s.get(tn)),Un(e)&&u.push(s.get(Pa)));break;case"delete":ee(e)||(u.push(s.get(tn)),Un(e)&&u.push(s.get(Pa)));break;case"set":Un(e)&&u.push(s.get(tn));break}if(u.length===1)u[0]&&Fa(u[0]);else{const f=[];for(const a of u)a&&f.push(...a);Fa(gu(f))}}function Fa(e,t){const r=ee(e)?e:[...e];for(const n of r)n.computed&&gc(n);for(const n of r)n.computed||gc(n)}function gc(e,t){(e!==kt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const bg=cu("__proto__,__v_isRef,__isVue"),vl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(du)),Ag=mu(),Sg=mu(!1,!0),Tg=mu(!0),yc=Ig();function Ig(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=le(this);for(let i=0,s=this.length;i<s;i++)yt(n,"get",i+"");const o=n[t](...r);return o===-1||o===!1?n[t](...r.map(le)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Jn();const n=le(this)[t].apply(this,r);return Yn(),n}}),e}function mu(e=!1,t=!1){return function(n,o,i){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&i===(e?t?Wg:Sl:t?Al:bl).get(n))return n;const s=ee(n);if(!e&&s&&se(yc,o))return Reflect.get(yc,o,i);const u=Reflect.get(n,o,i);return(du(o)?vl.has(o):bg(o))||(e||yt(n,"get",o),t)?u:He(u)?s&&pu(o)?u:u.value:je(u)?e?Tl(u):Qo(u):u}}const Og=El(),xg=El(!0);function El(e=!1){return function(r,n,o,i){let s=r[n];if(Fi(s)&&He(s)&&!He(o))return!1;if(!e&&!Fi(o)&&(Ba(o)||(o=le(o),s=le(s)),!ee(r)&&He(s)&&!He(o)))return s.value=o,!0;const u=ee(r)&&pu(n)?Number(n)<r.length:se(r,n),f=Reflect.set(r,n,o,i);return r===le(i)&&(u?Pi(o,s)&&gr(r,"set",n,o):gr(r,"add",n,o)),f}}function Ng(e,t){const r=se(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&gr(e,"delete",t,void 0),n}function Rg(e,t){const r=Reflect.has(e,t);return(!du(t)||!vl.has(t))&&yt(e,"has",t),r}function Cg(e){return yt(e,"iterate",ee(e)?"length":tn),Reflect.ownKeys(e)}const wl={get:Ag,set:Og,deleteProperty:Ng,has:Rg,ownKeys:Cg},Pg={get:Tg,set(e,t){return!0},deleteProperty(e,t){return!0}},Fg=Ke({},wl,{get:Sg,set:xg}),_u=e=>e,Xo=e=>Reflect.getPrototypeOf(e);function Zi(e,t,r=!1,n=!1){e=e.__v_raw;const o=le(e),i=le(t);r||(t!==i&&yt(o,"get",t),yt(o,"get",i));const{has:s}=Xo(o),u=n?_u:r?wu:Bi;if(s.call(o,t))return u(e.get(t));if(s.call(o,i))return u(e.get(i));e!==o&&e.get(t)}function eo(e,t=!1){const r=this.__v_raw,n=le(r),o=le(e);return t||(e!==o&&yt(n,"has",e),yt(n,"has",o)),e===o?r.has(e):r.has(e)||r.has(o)}function to(e,t=!1){return e=e.__v_raw,!t&&yt(le(e),"iterate",tn),Reflect.get(e,"size",e)}function mc(e){e=le(e);const t=le(this);return Xo(t).has.call(t,e)||(t.add(e),gr(t,"add",e,e)),this}function _c(e,t){t=le(t);const r=le(this),{has:n,get:o}=Xo(r);let i=n.call(r,e);i||(e=le(e),i=n.call(r,e));const s=o.call(r,e);return r.set(e,t),i?Pi(t,s)&&gr(r,"set",e,t):gr(r,"add",e,t),this}function vc(e){const t=le(this),{has:r,get:n}=Xo(t);let o=r.call(t,e);o||(e=le(e),o=r.call(t,e)),n&&n.call(t,e);const i=t.delete(e);return o&&gr(t,"delete",e,void 0),i}function Ec(){const e=le(this),t=e.size!==0,r=e.clear();return t&&gr(e,"clear",void 0,void 0),r}function ro(e,t){return function(n,o){const i=this,s=i.__v_raw,u=le(s),f=t?_u:e?wu:Bi;return!e&&yt(u,"iterate",tn),s.forEach((a,c)=>n.call(o,f(a),f(c),i))}}function no(e,t,r){return function(...n){const o=this.__v_raw,i=le(o),s=Un(i),u=e==="entries"||e===Symbol.iterator&&s,f=e==="keys"&&s,a=o[e](...n),c=r?_u:t?wu:Bi;return!t&&yt(i,"iterate",f?Pa:tn),{next(){const{value:d,done:g}=a.next();return g?{value:d,done:g}:{value:u?[c(d[0]),c(d[1])]:c(d),done:g}},[Symbol.iterator](){return this}}}}function br(e){return function(...t){return e==="delete"?!1:this}}function Bg(){const e={get(i){return Zi(this,i)},get size(){return to(this)},has:eo,add:mc,set:_c,delete:vc,clear:Ec,forEach:ro(!1,!1)},t={get(i){return Zi(this,i,!1,!0)},get size(){return to(this)},has:eo,add:mc,set:_c,delete:vc,clear:Ec,forEach:ro(!1,!0)},r={get(i){return Zi(this,i,!0)},get size(){return to(this,!0)},has(i){return eo.call(this,i,!0)},add:br("add"),set:br("set"),delete:br("delete"),clear:br("clear"),forEach:ro(!0,!1)},n={get(i){return Zi(this,i,!0,!0)},get size(){return to(this,!0)},has(i){return eo.call(this,i,!0)},add:br("add"),set:br("set"),delete:br("delete"),clear:br("clear"),forEach:ro(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=no(i,!1,!1),r[i]=no(i,!0,!1),t[i]=no(i,!1,!0),n[i]=no(i,!0,!0)}),[e,r,t,n]}const[Lg,Dg,Ug,Mg]=Bg();function vu(e,t){const r=t?e?Mg:Ug:e?Dg:Lg;return(n,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(se(r,o)&&o in n?r:n,o,i)}const $g={get:vu(!1,!1)},kg={get:vu(!1,!0)},jg={get:vu(!0,!1)},bl=new WeakMap,Al=new WeakMap,Sl=new WeakMap,Wg=new WeakMap;function qg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hg(e){return e.__v_skip||!Object.isExtensible(e)?0:qg(pg(e))}function Qo(e){return Fi(e)?e:Eu(e,!1,wl,$g,bl)}function Kg(e){return Eu(e,!1,Fg,kg,Al)}function Tl(e){return Eu(e,!0,Pg,jg,Sl)}function Eu(e,t,r,n,o){if(!je(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=o.get(e);if(i)return i;const s=Hg(e);if(s===0)return e;const u=new Proxy(e,s===2?n:r);return o.set(e,u),u}function Mn(e){return Fi(e)?Mn(e.__v_raw):!!(e&&e.__v_isReactive)}function Fi(e){return!!(e&&e.__v_isReadonly)}function Ba(e){return!!(e&&e.__v_isShallow)}function Il(e){return Mn(e)||Fi(e)}function le(e){const t=e&&e.__v_raw;return t?le(t):e}function Ol(e){return xo(e,"__v_skip",!0),e}const Bi=e=>je(e)?Qo(e):e,wu=e=>je(e)?Tl(e):e;function xl(e){Pr&&kt&&(e=le(e),_l(e.dep||(e.dep=gu())))}function Nl(e,t){e=le(e),e.dep&&Fa(e.dep)}function He(e){return!!(e&&e.__v_isRef===!0)}function Rn(e){return Gg(e,!1)}function Gg(e,t){return He(e)?e:new Vg(e,t)}class Vg{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:le(t),this._value=r?t:Bi(t)}get value(){return xl(this),this._value}set value(t){t=this.__v_isShallow?t:le(t),Pi(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Bi(t),Nl(this))}}function Cn(e){return He(e)?e.value:e}const Jg={get:(e,t,r)=>Cn(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const o=e[t];return He(o)&&!He(r)?(o.value=r,!0):Reflect.set(e,t,r,n)}};function Rl(e){return Mn(e)?e:new Proxy(e,Jg)}class Yg{constructor(t,r,n,o){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new yu(t,()=>{this._dirty||(this._dirty=!0,Nl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=n}get value(){const t=le(this);return xl(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function zg(e,t,r=!1){let n,o;const i=ie(e);return i?(n=e,o=Wt):(n=e.get,o=e.set),new Yg(n,o,i||!o,r)}function Fr(e,t,r,n){let o;try{o=n?e(...n):e()}catch(i){Zo(i,t,r)}return o}function xt(e,t,r,n){if(ie(e)){const i=Fr(e,t,r,n);return i&&hl(i)&&i.catch(s=>{Zo(s,t,r)}),i}const o=[];for(let i=0;i<e.length;i++)o.push(xt(e[i],t,r,n));return o}function Zo(e,t,r,n=!0){const o=t?t.vnode:null;if(t){let i=t.parent;const s=t.proxy,u=r;for(;i;){const a=i.ec;if(a){for(let c=0;c<a.length;c++)if(a[c](e,s,u)===!1)return}i=i.parent}const f=t.appContext.config.errorHandler;if(f){Fr(f,null,10,[e,s,u]);return}}Xg(e,r,o,n)}function Xg(e,t,r,n=!0){console.error(e)}let No=!1,La=!1;const pt=[];let hr=0;const xi=[];let Oi=null,On=0;const Ni=[];let Ar=null,xn=0;const Cl=Promise.resolve();let bu=null,Da=null;function Qg(e){const t=bu||Cl;return e?t.then(this?e.bind(this):e):t}function Zg(e){let t=hr+1,r=pt.length;for(;t<r;){const n=t+r>>>1;Li(pt[n])<e?t=n+1:r=n}return t}function Pl(e){(!pt.length||!pt.includes(e,No&&e.allowRecurse?hr+1:hr))&&e!==Da&&(e.id==null?pt.push(e):pt.splice(Zg(e.id),0,e),Fl())}function Fl(){!No&&!La&&(La=!0,bu=Cl.then(Dl))}function ey(e){const t=pt.indexOf(e);t>hr&&pt.splice(t,1)}function Bl(e,t,r,n){ee(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),Fl()}function ty(e){Bl(e,Oi,xi,On)}function ry(e){Bl(e,Ar,Ni,xn)}function es(e,t=null){if(xi.length){for(Da=t,Oi=[...new Set(xi)],xi.length=0,On=0;On<Oi.length;On++)Oi[On]();Oi=null,On=0,Da=null,es(e,t)}}function Ll(e){if(es(),Ni.length){const t=[...new Set(Ni)];if(Ni.length=0,Ar){Ar.push(...t);return}for(Ar=t,Ar.sort((r,n)=>Li(r)-Li(n)),xn=0;xn<Ar.length;xn++)Ar[xn]();Ar=null,xn=0}}const Li=e=>e.id==null?1/0:e.id;function Dl(e){La=!1,No=!0,es(e),pt.sort((r,n)=>Li(r)-Li(n));const t=Wt;try{for(hr=0;hr<pt.length;hr++){const r=pt[hr];r&&r.active!==!1&&Fr(r,null,14)}}finally{hr=0,pt.length=0,Ll(),No=!1,bu=null,(pt.length||xi.length||Ni.length)&&Dl(e)}}function ny(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||ve;let o=r;const i=t.startsWith("update:"),s=i&&t.slice(7);if(s&&s in n){const c=`${s==="modelValue"?"model":s}Modifiers`,{number:d,trim:g}=n[c]||ve;g&&(o=r.map(v=>v.trim())),d&&(o=r.map(Na))}let u,f=n[u=Ds(t)]||n[u=Ds(rr(t))];!f&&i&&(f=n[u=Ds(Vn(t))]),f&&xt(f,e,6,o);const a=n[u+"Once"];if(a){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,xt(a,e,6,o)}}function Ul(e,t,r=!1){const n=t.emitsCache,o=n.get(e);if(o!==void 0)return o;const i=e.emits;let s={},u=!1;if(!ie(e)){const f=a=>{const c=Ul(a,t,!0);c&&(u=!0,Ke(s,c))};!r&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!i&&!u?(n.set(e,null),null):(ee(i)?i.forEach(f=>s[f]=null):Ke(s,i),n.set(e,s),s)}function ts(e,t){return!e||!Vo(t)?!1:(t=t.slice(2).replace(/Once$/,""),se(e,t[0].toLowerCase()+t.slice(1))||se(e,Vn(t))||se(e,t))}let It=null,Ml=null;function Ro(e){const t=It;return It=e,Ml=e&&e.type.__scopeId||null,t}function iy(e,t=It,r){if(!t||e._n)return e;const n=(...o)=>{n._d&&Pc(-1);const i=Ro(t),s=e(...o);return Ro(i),n._d&&Pc(1),s};return n._n=!0,n._c=!0,n._d=!0,n}function Us(e){const{type:t,vnode:r,proxy:n,withProxy:o,props:i,propsOptions:[s],slots:u,attrs:f,emit:a,render:c,renderCache:d,data:g,setupState:v,ctx:T,inheritAttrs:I}=e;let _,w;const P=Ro(e);try{if(r.shapeFlag&4){const N=o||n;_=Xt(c.call(N,N,d,i,v,g,T)),w=f}else{const N=t;_=Xt(N.length>1?N(i,{attrs:f,slots:u,emit:a}):N(i,null)),w=t.props?f:oy(f)}}catch(N){Ri.length=0,Zo(N,e,1),_=tr(qt)}let R=_;if(w&&I!==!1){const N=Object.keys(w),{shapeFlag:D}=R;N.length&&D&7&&(s&&N.some(lu)&&(w=sy(w,s)),R=Dr(R,w))}return r.dirs&&(R=Dr(R),R.dirs=R.dirs?R.dirs.concat(r.dirs):r.dirs),r.transition&&(R.transition=r.transition),_=R,Ro(P),_}const oy=e=>{let t;for(const r in e)(r==="class"||r==="style"||Vo(r))&&((t||(t={}))[r]=e[r]);return t},sy=(e,t)=>{const r={};for(const n in e)(!lu(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function ay(e,t,r){const{props:n,children:o,component:i}=e,{props:s,children:u,patchFlag:f}=t,a=i.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&f>=0){if(f&1024)return!0;if(f&16)return n?wc(n,s,a):!!s;if(f&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const g=c[d];if(s[g]!==n[g]&&!ts(a,g))return!0}}}else return(o||u)&&(!u||!u.$stable)?!0:n===s?!1:n?s?wc(n,s,a):!0:!!s;return!1}function wc(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const i=n[o];if(t[i]!==e[i]&&!ts(r,i))return!0}return!1}function uy({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const cy=e=>e.__isSuspense;function fy(e,t){t&&t.pendingBranch?ee(e)?t.effects.push(...e):t.effects.push(e):ry(e)}function ly(e,t){if($e){let r=$e.provides;const n=$e.parent&&$e.parent.provides;n===r&&(r=$e.provides=Object.create(n)),r[e]=t}}function Ms(e,t,r=!1){const n=$e||It;if(n){const o=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return r&&ie(t)?t.call(n.proxy):t}}const bc={};function vo(e,t,r){return $l(e,t,r)}function $l(e,t,{immediate:r,deep:n,flush:o,onTrack:i,onTrigger:s}=ve){const u=$e;let f,a=!1,c=!1;if(He(e)?(f=()=>e.value,a=Ba(e)):Mn(e)?(f=()=>e,n=!0):ee(e)?(c=!0,a=e.some(w=>Mn(w)||Ba(w)),f=()=>e.map(w=>{if(He(w))return w.value;if(Mn(w))return Zr(w);if(ie(w))return Fr(w,u,2)})):ie(e)?t?f=()=>Fr(e,u,2):f=()=>{if(!(u&&u.isUnmounted))return d&&d(),xt(e,u,3,[g])}:f=Wt,t&&n){const w=f;f=()=>Zr(w())}let d,g=w=>{d=_.onStop=()=>{Fr(w,u,4)}};if(Ui)return g=Wt,t?r&&xt(t,u,3,[f(),c?[]:void 0,g]):f(),Wt;let v=c?[]:bc;const T=()=>{if(!!_.active)if(t){const w=_.run();(n||a||(c?w.some((P,R)=>Pi(P,v[R])):Pi(w,v)))&&(d&&d(),xt(t,u,3,[w,v===bc?void 0:v,g]),v=w)}else _.run()};T.allowRecurse=!!t;let I;o==="sync"?I=T:o==="post"?I=()=>it(T,u&&u.suspense):I=()=>ty(T);const _=new yu(f,I);return t?r?T():v=_.run():o==="post"?it(_.run.bind(_),u&&u.suspense):_.run(),()=>{_.stop(),u&&u.scope&&hu(u.scope.effects,_)}}function hy(e,t,r){const n=this.proxy,o=ke(e)?e.includes(".")?kl(n,e):()=>n[e]:e.bind(n,n);let i;ie(t)?i=t:(i=t.handler,r=t);const s=$e;Wn(this);const u=$l(o,i.bind(n),r);return s?Wn(s):rn(),u}function kl(e,t){const r=t.split(".");return()=>{let n=e;for(let o=0;o<r.length&&n;o++)n=n[r[o]];return n}}function Zr(e,t){if(!je(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),He(e))Zr(e.value,t);else if(ee(e))for(let r=0;r<e.length;r++)Zr(e[r],t);else if(ll(e)||Un(e))e.forEach(r=>{Zr(r,t)});else if(pl(e))for(const r in e)Zr(e[r],t);return e}function dy(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Hl(()=>{e.isMounted=!0}),Kl(()=>{e.isUnmounting=!0}),e}const _t=[Function,Array],py={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_t,onEnter:_t,onAfterEnter:_t,onEnterCancelled:_t,onBeforeLeave:_t,onLeave:_t,onAfterLeave:_t,onLeaveCancelled:_t,onBeforeAppear:_t,onAppear:_t,onAfterAppear:_t,onAppearCancelled:_t},setup(e,{slots:t}){const r=tm(),n=dy();let o;return()=>{const i=t.default&&Wl(t.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const I of i)if(I.type!==qt){s=I;break}}const u=le(e),{mode:f}=u;if(n.isLeaving)return $s(s);const a=Ac(s);if(!a)return $s(s);const c=Ua(a,u,n,r);Ma(a,c);const d=r.subTree,g=d&&Ac(d);let v=!1;const{getTransitionKey:T}=a.type;if(T){const I=T();o===void 0?o=I:I!==o&&(o=I,v=!0)}if(g&&g.type!==qt&&(!Yr(a,g)||v)){const I=Ua(g,u,n,r);if(Ma(g,I),f==="out-in")return n.isLeaving=!0,I.afterLeave=()=>{n.isLeaving=!1,r.update()},$s(s);f==="in-out"&&a.type!==qt&&(I.delayLeave=(_,w,P)=>{const R=jl(n,g);R[String(g.key)]=g,_._leaveCb=()=>{w(),_._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=P})}return s}}},gy=py;function jl(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function Ua(e,t,r,n){const{appear:o,mode:i,persisted:s=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:a,onEnterCancelled:c,onBeforeLeave:d,onLeave:g,onAfterLeave:v,onLeaveCancelled:T,onBeforeAppear:I,onAppear:_,onAfterAppear:w,onAppearCancelled:P}=t,R=String(e.key),N=jl(r,e),D=(M,G)=>{M&&xt(M,n,9,G)},$=(M,G)=>{const Q=G[1];D(M,G),ee(M)?M.every(oe=>oe.length<=1)&&Q():M.length<=1&&Q()},q={mode:i,persisted:s,beforeEnter(M){let G=u;if(!r.isMounted)if(o)G=I||u;else return;M._leaveCb&&M._leaveCb(!0);const Q=N[R];Q&&Yr(e,Q)&&Q.el._leaveCb&&Q.el._leaveCb(),D(G,[M])},enter(M){let G=f,Q=a,oe=c;if(!r.isMounted)if(o)G=_||f,Q=w||a,oe=P||c;else return;let he=!1;const te=M._enterCb=Se=>{he||(he=!0,Se?D(oe,[M]):D(Q,[M]),q.delayedLeave&&q.delayedLeave(),M._enterCb=void 0)};G?$(G,[M,te]):te()},leave(M,G){const Q=String(e.key);if(M._enterCb&&M._enterCb(!0),r.isUnmounting)return G();D(d,[M]);let oe=!1;const he=M._leaveCb=te=>{oe||(oe=!0,G(),te?D(T,[M]):D(v,[M]),M._leaveCb=void 0,N[Q]===e&&delete N[Q])};N[Q]=e,g?$(g,[M,he]):he()},clone(M){return Ua(M,t,r,n)}};return q}function $s(e){if(rs(e))return e=Dr(e),e.children=null,e}function Ac(e){return rs(e)?e.children?e.children[0]:void 0:e}function Ma(e,t){e.shapeFlag&6&&e.component?Ma(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Wl(e,t=!1,r){let n=[],o=0;for(let i=0;i<e.length;i++){let s=e[i];const u=r==null?s.key:String(r)+String(s.key!=null?s.key:i);s.type===Ze?(s.patchFlag&128&&o++,n=n.concat(Wl(s.children,t,u))):(t||s.type!==qt)&&n.push(u!=null?Dr(s,{key:u}):s)}if(o>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}const Eo=e=>!!e.type.__asyncLoader,rs=e=>e.type.__isKeepAlive;function yy(e,t){ql(e,"a",t)}function my(e,t){ql(e,"da",t)}function ql(e,t,r=$e){const n=e.__wdc||(e.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(ns(t,n,r),r){let o=r.parent;for(;o&&o.parent;)rs(o.parent.vnode)&&_y(n,t,r,o),o=o.parent}}function _y(e,t,r,n){const o=ns(t,e,n,!0);Gl(()=>{hu(n[t],o)},r)}function ns(e,t,r=$e,n=!1){if(r){const o=r[e]||(r[e]=[]),i=t.__weh||(t.__weh=(...s)=>{if(r.isUnmounted)return;Jn(),Wn(r);const u=xt(t,r,e,s);return rn(),Yn(),u});return n?o.unshift(i):o.push(i),i}}const yr=e=>(t,r=$e)=>(!Ui||e==="sp")&&ns(e,t,r),vy=yr("bm"),Hl=yr("m"),Ey=yr("bu"),wy=yr("u"),Kl=yr("bum"),Gl=yr("um"),by=yr("sp"),Ay=yr("rtg"),Sy=yr("rtc");function Ty(e,t=$e){ns("ec",e,t)}function Sc(e,t){const r=It;if(r===null)return e;const n=ss(r)||r.proxy,o=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,u,f,a=ve]=t[i];ie(s)&&(s={mounted:s,updated:s}),s.deep&&Zr(u),o.push({dir:s,instance:n,value:u,oldValue:void 0,arg:f,modifiers:a})}return e}function Wr(e,t,r,n){const o=e.dirs,i=t&&t.dirs;for(let s=0;s<o.length;s++){const u=o[s];i&&(u.oldValue=i[s].value);let f=u.dir[n];f&&(Jn(),xt(f,r,8,[e.el,u,e,t]),Yn())}}const Vl="components";function Iy(e,t){return xy(Vl,e,!0,t)||e}const Oy=Symbol();function xy(e,t,r=!0,n=!1){const o=It||$e;if(o){const i=o.type;if(e===Vl){const u=sm(i,!1);if(u&&(u===t||u===rr(t)||u===zo(rr(t))))return i}const s=Tc(o[e]||i[e],t)||Tc(o.appContext[e],t);return!s&&n?i:s}}function Tc(e,t){return e&&(e[t]||e[rr(t)]||e[zo(rr(t))])}const $a=e=>e?oh(e)?ss(e)||e.proxy:$a(e.parent):null,Co=Ke(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$a(e.parent),$root:e=>$a(e.root),$emit:e=>e.emit,$options:e=>Yl(e),$forceUpdate:e=>e.f||(e.f=()=>Pl(e.update)),$nextTick:e=>e.n||(e.n=Qg.bind(e.proxy)),$watch:e=>hy.bind(e)}),Ny={get({_:e},t){const{ctx:r,setupState:n,data:o,props:i,accessCache:s,type:u,appContext:f}=e;let a;if(t[0]!=="$"){const v=s[t];if(v!==void 0)switch(v){case 1:return n[t];case 2:return o[t];case 4:return r[t];case 3:return i[t]}else{if(n!==ve&&se(n,t))return s[t]=1,n[t];if(o!==ve&&se(o,t))return s[t]=2,o[t];if((a=e.propsOptions[0])&&se(a,t))return s[t]=3,i[t];if(r!==ve&&se(r,t))return s[t]=4,r[t];ka&&(s[t]=0)}}const c=Co[t];let d,g;if(c)return t==="$attrs"&&yt(e,"get",t),c(e);if((d=u.__cssModules)&&(d=d[t]))return d;if(r!==ve&&se(r,t))return s[t]=4,r[t];if(g=f.config.globalProperties,se(g,t))return g[t]},set({_:e},t,r){const{data:n,setupState:o,ctx:i}=e;return o!==ve&&se(o,t)?(o[t]=r,!0):n!==ve&&se(n,t)?(n[t]=r,!0):se(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:o,propsOptions:i}},s){let u;return!!r[s]||e!==ve&&se(e,s)||t!==ve&&se(t,s)||(u=i[0])&&se(u,s)||se(n,s)||se(Co,s)||se(o.config.globalProperties,s)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:se(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let ka=!0;function Ry(e){const t=Yl(e),r=e.proxy,n=e.ctx;ka=!1,t.beforeCreate&&Ic(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:s,watch:u,provide:f,inject:a,created:c,beforeMount:d,mounted:g,beforeUpdate:v,updated:T,activated:I,deactivated:_,beforeDestroy:w,beforeUnmount:P,destroyed:R,unmounted:N,render:D,renderTracked:$,renderTriggered:q,errorCaptured:M,serverPrefetch:G,expose:Q,inheritAttrs:oe,components:he,directives:te,filters:Se}=t;if(a&&Cy(a,n,null,e.appContext.config.unwrapInjectedRef),s)for(const z in s){const re=s[z];ie(re)&&(n[z]=re.bind(r))}if(o){const z=o.call(r,r);je(z)&&(e.data=Qo(z))}if(ka=!0,i)for(const z in i){const re=i[z],Z=ie(re)?re.bind(r,r):ie(re.get)?re.get.bind(r,r):Wt,W=!ie(re)&&ie(re.set)?re.set.bind(r):Wt,Te=um({get:Z,set:W});Object.defineProperty(n,z,{enumerable:!0,configurable:!0,get:()=>Te.value,set:Ft=>Te.value=Ft})}if(u)for(const z in u)Jl(u[z],n,r,z);if(f){const z=ie(f)?f.call(r):f;Reflect.ownKeys(z).forEach(re=>{ly(re,z[re])})}c&&Ic(c,e,"c");function we(z,re){ee(re)?re.forEach(Z=>z(Z.bind(r))):re&&z(re.bind(r))}if(we(vy,d),we(Hl,g),we(Ey,v),we(wy,T),we(yy,I),we(my,_),we(Ty,M),we(Sy,$),we(Ay,q),we(Kl,P),we(Gl,N),we(by,G),ee(Q))if(Q.length){const z=e.exposed||(e.exposed={});Q.forEach(re=>{Object.defineProperty(z,re,{get:()=>r[re],set:Z=>r[re]=Z})})}else e.exposed||(e.exposed={});D&&e.render===Wt&&(e.render=D),oe!=null&&(e.inheritAttrs=oe),he&&(e.components=he),te&&(e.directives=te)}function Cy(e,t,r=Wt,n=!1){ee(e)&&(e=ja(e));for(const o in e){const i=e[o];let s;je(i)?"default"in i?s=Ms(i.from||o,i.default,!0):s=Ms(i.from||o):s=Ms(i),He(s)&&n?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:u=>s.value=u}):t[o]=s}}function Ic(e,t,r){xt(ee(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function Jl(e,t,r,n){const o=n.includes(".")?kl(r,n):()=>r[n];if(ke(e)){const i=t[e];ie(i)&&vo(o,i)}else if(ie(e))vo(o,e.bind(r));else if(je(e))if(ee(e))e.forEach(i=>Jl(i,t,r,n));else{const i=ie(e.handler)?e.handler.bind(r):t[e.handler];ie(i)&&vo(o,i,e)}}function Yl(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:s}}=e.appContext,u=i.get(t);let f;return u?f=u:!o.length&&!r&&!n?f=t:(f={},o.length&&o.forEach(a=>Po(f,a,s,!0)),Po(f,t,s)),i.set(t,f),f}function Po(e,t,r,n=!1){const{mixins:o,extends:i}=t;i&&Po(e,i,r,!0),o&&o.forEach(s=>Po(e,s,r,!0));for(const s in t)if(!(n&&s==="expose")){const u=Py[s]||r&&r[s];e[s]=u?u(e[s],t[s]):t[s]}return e}const Py={data:Oc,props:Vr,emits:Vr,methods:Vr,computed:Vr,beforeCreate:Xe,created:Xe,beforeMount:Xe,mounted:Xe,beforeUpdate:Xe,updated:Xe,beforeDestroy:Xe,beforeUnmount:Xe,destroyed:Xe,unmounted:Xe,activated:Xe,deactivated:Xe,errorCaptured:Xe,serverPrefetch:Xe,components:Vr,directives:Vr,watch:By,provide:Oc,inject:Fy};function Oc(e,t){return t?e?function(){return Ke(ie(e)?e.call(this,this):e,ie(t)?t.call(this,this):t)}:t:e}function Fy(e,t){return Vr(ja(e),ja(t))}function ja(e){if(ee(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Xe(e,t){return e?[...new Set([].concat(e,t))]:t}function Vr(e,t){return e?Ke(Ke(Object.create(null),e),t):t}function By(e,t){if(!e)return t;if(!t)return e;const r=Ke(Object.create(null),e);for(const n in t)r[n]=Xe(e[n],t[n]);return r}function Ly(e,t,r,n=!1){const o={},i={};xo(i,is,1),e.propsDefaults=Object.create(null),zl(e,t,o,i);for(const s in e.propsOptions[0])s in o||(o[s]=void 0);r?e.props=n?o:Kg(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function Dy(e,t,r,n){const{props:o,attrs:i,vnode:{patchFlag:s}}=e,u=le(o),[f]=e.propsOptions;let a=!1;if((n||s>0)&&!(s&16)){if(s&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let g=c[d];if(ts(e.emitsOptions,g))continue;const v=t[g];if(f)if(se(i,g))v!==i[g]&&(i[g]=v,a=!0);else{const T=rr(g);o[T]=Wa(f,u,T,v,e,!1)}else v!==i[g]&&(i[g]=v,a=!0)}}}else{zl(e,t,o,i)&&(a=!0);let c;for(const d in u)(!t||!se(t,d)&&((c=Vn(d))===d||!se(t,c)))&&(f?r&&(r[d]!==void 0||r[c]!==void 0)&&(o[d]=Wa(f,u,d,void 0,e,!0)):delete o[d]);if(i!==u)for(const d in i)(!t||!se(t,d)&&!0)&&(delete i[d],a=!0)}a&&gr(e,"set","$attrs")}function zl(e,t,r,n){const[o,i]=e.propsOptions;let s=!1,u;if(t)for(let f in t){if(mo(f))continue;const a=t[f];let c;o&&se(o,c=rr(f))?!i||!i.includes(c)?r[c]=a:(u||(u={}))[c]=a:ts(e.emitsOptions,f)||(!(f in n)||a!==n[f])&&(n[f]=a,s=!0)}if(i){const f=le(r),a=u||ve;for(let c=0;c<i.length;c++){const d=i[c];r[d]=Wa(o,f,d,a[d],e,!se(a,d))}}return s}function Wa(e,t,r,n,o,i){const s=e[r];if(s!=null){const u=se(s,"default");if(u&&n===void 0){const f=s.default;if(s.type!==Function&&ie(f)){const{propsDefaults:a}=o;r in a?n=a[r]:(Wn(o),n=a[r]=f.call(null,t),rn())}else n=f}s[0]&&(i&&!u?n=!1:s[1]&&(n===""||n===Vn(r))&&(n=!0))}return n}function Xl(e,t,r=!1){const n=t.propsCache,o=n.get(e);if(o)return o;const i=e.props,s={},u=[];let f=!1;if(!ie(e)){const c=d=>{f=!0;const[g,v]=Xl(d,t,!0);Ke(s,g),v&&u.push(...v)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!f)return n.set(e,Dn),Dn;if(ee(i))for(let c=0;c<i.length;c++){const d=rr(i[c]);xc(d)&&(s[d]=ve)}else if(i)for(const c in i){const d=rr(c);if(xc(d)){const g=i[c],v=s[d]=ee(g)||ie(g)?{type:g}:g;if(v){const T=Cc(Boolean,v.type),I=Cc(String,v.type);v[0]=T>-1,v[1]=I<0||T<I,(T>-1||se(v,"default"))&&u.push(d)}}}const a=[s,u];return n.set(e,a),a}function xc(e){return e[0]!=="$"}function Nc(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Rc(e,t){return Nc(e)===Nc(t)}function Cc(e,t){return ee(t)?t.findIndex(r=>Rc(r,e)):ie(t)&&Rc(t,e)?0:-1}const Ql=e=>e[0]==="_"||e==="$stable",Au=e=>ee(e)?e.map(Xt):[Xt(e)],Uy=(e,t,r)=>{if(t._n)return t;const n=iy((...o)=>Au(t(...o)),r);return n._c=!1,n},Zl=(e,t,r)=>{const n=e._ctx;for(const o in e){if(Ql(o))continue;const i=e[o];if(ie(i))t[o]=Uy(o,i,n);else if(i!=null){const s=Au(i);t[o]=()=>s}}},eh=(e,t)=>{const r=Au(t);e.slots.default=()=>r},My=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=le(t),xo(t,"_",r)):Zl(t,e.slots={})}else e.slots={},t&&eh(e,t);xo(e.slots,is,1)},$y=(e,t,r)=>{const{vnode:n,slots:o}=e;let i=!0,s=ve;if(n.shapeFlag&32){const u=t._;u?r&&u===1?i=!1:(Ke(o,t),!r&&u===1&&delete o._):(i=!t.$stable,Zl(t,o)),s=t}else t&&(eh(e,t),s={default:1});if(i)for(const u in o)!Ql(u)&&!(u in s)&&delete o[u]};function th(){return{app:null,config:{isNativeTag:lg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ky=0;function jy(e,t){return function(n,o=null){ie(n)||(n=Object.assign({},n)),o!=null&&!je(o)&&(o=null);const i=th(),s=new Set;let u=!1;const f=i.app={_uid:ky++,_component:n,_props:o,_container:null,_context:i,_instance:null,version:cm,get config(){return i.config},set config(a){},use(a,...c){return s.has(a)||(a&&ie(a.install)?(s.add(a),a.install(f,...c)):ie(a)&&(s.add(a),a(f,...c))),f},mixin(a){return i.mixins.includes(a)||i.mixins.push(a),f},component(a,c){return c?(i.components[a]=c,f):i.components[a]},directive(a,c){return c?(i.directives[a]=c,f):i.directives[a]},mount(a,c,d){if(!u){const g=tr(n,o);return g.appContext=i,c&&t?t(g,a):e(g,a,d),u=!0,f._container=a,a.__vue_app__=f,ss(g.component)||g.component.proxy}},unmount(){u&&(e(null,f._container),delete f._container.__vue_app__)},provide(a,c){return i.provides[a]=c,f}};return f}}function qa(e,t,r,n,o=!1){if(ee(e)){e.forEach((g,v)=>qa(g,t&&(ee(t)?t[v]:t),r,n,o));return}if(Eo(n)&&!o)return;const i=n.shapeFlag&4?ss(n.component)||n.component.proxy:n.el,s=o?null:i,{i:u,r:f}=e,a=t&&t.r,c=u.refs===ve?u.refs={}:u.refs,d=u.setupState;if(a!=null&&a!==f&&(ke(a)?(c[a]=null,se(d,a)&&(d[a]=null)):He(a)&&(a.value=null)),ie(f))Fr(f,u,12,[s,c]);else{const g=ke(f),v=He(f);if(g||v){const T=()=>{if(e.f){const I=g?c[f]:f.value;o?ee(I)&&hu(I,i):ee(I)?I.includes(i)||I.push(i):g?(c[f]=[i],se(d,f)&&(d[f]=c[f])):(f.value=[i],e.k&&(c[e.k]=f.value))}else g?(c[f]=s,se(d,f)&&(d[f]=s)):v&&(f.value=s,e.k&&(c[e.k]=s))};s?(T.id=-1,it(T,r)):T()}}}const it=fy;function Wy(e){return qy(e)}function qy(e,t){const r=mg();r.__VUE__=!0;const{insert:n,remove:o,patchProp:i,createElement:s,createText:u,createComment:f,setText:a,setElementText:c,parentNode:d,nextSibling:g,setScopeId:v=Wt,cloneNode:T,insertStaticContent:I}=e,_=(b,S,p,l=null,h=null,y=null,E=!1,A=null,O=!!S.dynamicChildren)=>{if(b===S)return;b&&!Yr(b,S)&&(l=_r(b),Oe(b,h,y,!0),b=null),S.patchFlag===-2&&(O=!1,S.dynamicChildren=null);const{type:C,ref:U,shapeFlag:B}=S;switch(C){case Su:w(b,S,p,l);break;case qt:P(b,S,p,l);break;case ks:b==null&&R(S,p,l,E);break;case Ze:te(b,S,p,l,h,y,E,A,O);break;default:B&1?$(b,S,p,l,h,y,E,A,O):B&6?Se(b,S,p,l,h,y,E,A,O):(B&64||B&128)&&C.process(b,S,p,l,h,y,E,A,O,Bt)}U!=null&&h&&qa(U,b&&b.ref,y,S||b,!S)},w=(b,S,p,l)=>{if(b==null)n(S.el=u(S.children),p,l);else{const h=S.el=b.el;S.children!==b.children&&a(h,S.children)}},P=(b,S,p,l)=>{b==null?n(S.el=f(S.children||""),p,l):S.el=b.el},R=(b,S,p,l)=>{[b.el,b.anchor]=I(b.children,S,p,l,b.el,b.anchor)},N=({el:b,anchor:S},p,l)=>{let h;for(;b&&b!==S;)h=g(b),n(b,p,l),b=h;n(S,p,l)},D=({el:b,anchor:S})=>{let p;for(;b&&b!==S;)p=g(b),o(b),b=p;o(S)},$=(b,S,p,l,h,y,E,A,O)=>{E=E||S.type==="svg",b==null?q(S,p,l,h,y,E,A,O):Q(b,S,h,y,E,A,O)},q=(b,S,p,l,h,y,E,A)=>{let O,C;const{type:U,props:B,shapeFlag:k,transition:j,patchFlag:ne,dirs:ue}=b;if(b.el&&T!==void 0&&ne===-1)O=b.el=T(b.el);else{if(O=b.el=s(b.type,y,B&&B.is,B),k&8?c(O,b.children):k&16&&G(b.children,O,null,l,h,y&&U!=="foreignObject",E,A),ue&&Wr(b,null,l,"created"),B){for(const me in B)me!=="value"&&!mo(me)&&i(O,me,null,B[me],y,b.children,l,h,Ge);"value"in B&&i(O,"value",null,B.value),(C=B.onVnodeBeforeMount)&&Ht(C,l,b)}M(O,b,b.scopeId,E,l)}ue&&Wr(b,null,l,"beforeMount");const ce=(!h||h&&!h.pendingBranch)&&j&&!j.persisted;ce&&j.beforeEnter(O),n(O,S,p),((C=B&&B.onVnodeMounted)||ce||ue)&&it(()=>{C&&Ht(C,l,b),ce&&j.enter(O),ue&&Wr(b,null,l,"mounted")},h)},M=(b,S,p,l,h)=>{if(p&&v(b,p),l)for(let y=0;y<l.length;y++)v(b,l[y]);if(h){let y=h.subTree;if(S===y){const E=h.vnode;M(b,E,E.scopeId,E.slotScopeIds,h.parent)}}},G=(b,S,p,l,h,y,E,A,O=0)=>{for(let C=O;C<b.length;C++){const U=b[C]=A?Tr(b[C]):Xt(b[C]);_(null,U,S,p,l,h,y,E,A)}},Q=(b,S,p,l,h,y,E)=>{const A=S.el=b.el;let{patchFlag:O,dynamicChildren:C,dirs:U}=S;O|=b.patchFlag&16;const B=b.props||ve,k=S.props||ve;let j;p&&qr(p,!1),(j=k.onVnodeBeforeUpdate)&&Ht(j,p,S,b),U&&Wr(S,b,p,"beforeUpdate"),p&&qr(p,!0);const ne=h&&S.type!=="foreignObject";if(C?oe(b.dynamicChildren,C,A,p,l,ne,y):E||Z(b,S,A,null,p,l,ne,y,!1),O>0){if(O&16)he(A,S,B,k,p,l,h);else if(O&2&&B.class!==k.class&&i(A,"class",null,k.class,h),O&4&&i(A,"style",B.style,k.style,h),O&8){const ue=S.dynamicProps;for(let ce=0;ce<ue.length;ce++){const me=ue[ce],ut=B[me],vr=k[me];(vr!==ut||me==="value")&&i(A,me,ut,vr,h,b.children,p,l,Ge)}}O&1&&b.children!==S.children&&c(A,S.children)}else!E&&C==null&&he(A,S,B,k,p,l,h);((j=k.onVnodeUpdated)||U)&&it(()=>{j&&Ht(j,p,S,b),U&&Wr(S,b,p,"updated")},l)},oe=(b,S,p,l,h,y,E)=>{for(let A=0;A<S.length;A++){const O=b[A],C=S[A],U=O.el&&(O.type===Ze||!Yr(O,C)||O.shapeFlag&70)?d(O.el):p;_(O,C,U,null,l,h,y,E,!0)}},he=(b,S,p,l,h,y,E)=>{if(p!==l){for(const A in l){if(mo(A))continue;const O=l[A],C=p[A];O!==C&&A!=="value"&&i(b,A,C,O,E,S.children,h,y,Ge)}if(p!==ve)for(const A in p)!mo(A)&&!(A in l)&&i(b,A,p[A],null,E,S.children,h,y,Ge);"value"in l&&i(b,"value",p.value,l.value)}},te=(b,S,p,l,h,y,E,A,O)=>{const C=S.el=b?b.el:u(""),U=S.anchor=b?b.anchor:u("");let{patchFlag:B,dynamicChildren:k,slotScopeIds:j}=S;j&&(A=A?A.concat(j):j),b==null?(n(C,p,l),n(U,p,l),G(S.children,p,U,h,y,E,A,O)):B>0&&B&64&&k&&b.dynamicChildren?(oe(b.dynamicChildren,k,p,h,y,E,A),(S.key!=null||h&&S===h.subTree)&&rh(b,S,!0)):Z(b,S,p,U,h,y,E,A,O)},Se=(b,S,p,l,h,y,E,A,O)=>{S.slotScopeIds=A,b==null?S.shapeFlag&512?h.ctx.activate(S,p,l,E,O):Re(S,p,l,h,y,E,O):we(b,S,O)},Re=(b,S,p,l,h,y,E)=>{const A=b.component=em(b,l,h);if(rs(b)&&(A.ctx.renderer=Bt),rm(A),A.asyncDep){if(h&&h.registerDep(A,z),!b.el){const O=A.subTree=tr(qt);P(null,O,S,p)}return}z(A,b,S,p,h,y,E)},we=(b,S,p)=>{const l=S.component=b.component;if(ay(b,S,p))if(l.asyncDep&&!l.asyncResolved){re(l,S,p);return}else l.next=S,ey(l.update),l.update();else S.el=b.el,l.vnode=S},z=(b,S,p,l,h,y,E)=>{const A=()=>{if(b.isMounted){let{next:U,bu:B,u:k,parent:j,vnode:ne}=b,ue=U,ce;qr(b,!1),U?(U.el=ne.el,re(b,U,E)):U=ne,B&&_o(B),(ce=U.props&&U.props.onVnodeBeforeUpdate)&&Ht(ce,j,U,ne),qr(b,!0);const me=Us(b),ut=b.subTree;b.subTree=me,_(ut,me,d(ut.el),_r(ut),b,h,y),U.el=me.el,ue===null&&uy(b,me.el),k&&it(k,h),(ce=U.props&&U.props.onVnodeUpdated)&&it(()=>Ht(ce,j,U,ne),h)}else{let U;const{el:B,props:k}=S,{bm:j,m:ne,parent:ue}=b,ce=Eo(S);if(qr(b,!1),j&&_o(j),!ce&&(U=k&&k.onVnodeBeforeMount)&&Ht(U,ue,S),qr(b,!0),B&&qe){const me=()=>{b.subTree=Us(b),qe(B,b.subTree,b,h,null)};ce?S.type.__asyncLoader().then(()=>!b.isUnmounted&&me()):me()}else{const me=b.subTree=Us(b);_(null,me,p,l,b,h,y),S.el=me.el}if(ne&&it(ne,h),!ce&&(U=k&&k.onVnodeMounted)){const me=S;it(()=>Ht(U,ue,me),h)}(S.shapeFlag&256||ue&&Eo(ue.vnode)&&ue.vnode.shapeFlag&256)&&b.a&&it(b.a,h),b.isMounted=!0,S=p=l=null}},O=b.effect=new yu(A,()=>Pl(C),b.scope),C=b.update=()=>O.run();C.id=b.uid,qr(b,!0),C()},re=(b,S,p)=>{S.component=b;const l=b.vnode.props;b.vnode=S,b.next=null,Dy(b,S.props,l,p),$y(b,S.children,p),Jn(),es(void 0,b.update),Yn()},Z=(b,S,p,l,h,y,E,A,O=!1)=>{const C=b&&b.children,U=b?b.shapeFlag:0,B=S.children,{patchFlag:k,shapeFlag:j}=S;if(k>0){if(k&128){Te(C,B,p,l,h,y,E,A,O);return}else if(k&256){W(C,B,p,l,h,y,E,A,O);return}}j&8?(U&16&&Ge(C,h,y),B!==C&&c(p,B)):U&16?j&16?Te(C,B,p,l,h,y,E,A,O):Ge(C,h,y,!0):(U&8&&c(p,""),j&16&&G(B,p,l,h,y,E,A,O))},W=(b,S,p,l,h,y,E,A,O)=>{b=b||Dn,S=S||Dn;const C=b.length,U=S.length,B=Math.min(C,U);let k;for(k=0;k<B;k++){const j=S[k]=O?Tr(S[k]):Xt(S[k]);_(b[k],j,p,null,h,y,E,A,O)}C>U?Ge(b,h,y,!0,!1,B):G(S,p,l,h,y,E,A,O,B)},Te=(b,S,p,l,h,y,E,A,O)=>{let C=0;const U=S.length;let B=b.length-1,k=U-1;for(;C<=B&&C<=k;){const j=b[C],ne=S[C]=O?Tr(S[C]):Xt(S[C]);if(Yr(j,ne))_(j,ne,p,null,h,y,E,A,O);else break;C++}for(;C<=B&&C<=k;){const j=b[B],ne=S[k]=O?Tr(S[k]):Xt(S[k]);if(Yr(j,ne))_(j,ne,p,null,h,y,E,A,O);else break;B--,k--}if(C>B){if(C<=k){const j=k+1,ne=j<U?S[j].el:l;for(;C<=k;)_(null,S[C]=O?Tr(S[C]):Xt(S[C]),p,ne,h,y,E,A,O),C++}}else if(C>k)for(;C<=B;)Oe(b[C],h,y,!0),C++;else{const j=C,ne=C,ue=new Map;for(C=ne;C<=k;C++){const Ve=S[C]=O?Tr(S[C]):Xt(S[C]);Ve.key!=null&&ue.set(Ve.key,C)}let ce,me=0;const ut=k-ne+1;let vr=!1,Vi=0;const Er=new Array(ut);for(C=0;C<ut;C++)Er[C]=0;for(C=j;C<=B;C++){const Ve=b[C];if(me>=ut){Oe(Ve,h,y,!0);continue}let tt;if(Ve.key!=null)tt=ue.get(Ve.key);else for(ce=ne;ce<=k;ce++)if(Er[ce-ne]===0&&Yr(Ve,S[ce])){tt=ce;break}tt===void 0?Oe(Ve,h,y,!0):(Er[tt-ne]=C+1,tt>=Vi?Vi=tt:vr=!0,_(Ve,S[tt],p,null,h,y,E,A,O),me++)}const Ji=vr?Hy(Er):Dn;for(ce=Ji.length-1,C=ut-1;C>=0;C--){const Ve=ne+C,tt=S[Ve],wr=Ve+1<U?S[Ve+1].el:l;Er[C]===0?_(null,tt,p,wr,h,y,E,A,O):vr&&(ce<0||C!==Ji[ce]?Ft(tt,p,wr,2):ce--)}}},Ft=(b,S,p,l,h=null)=>{const{el:y,type:E,transition:A,children:O,shapeFlag:C}=b;if(C&6){Ft(b.component.subTree,S,p,l);return}if(C&128){b.suspense.move(S,p,l);return}if(C&64){E.move(b,S,p,Bt);return}if(E===Ze){n(y,S,p);for(let B=0;B<O.length;B++)Ft(O[B],S,p,l);n(b.anchor,S,p);return}if(E===ks){N(b,S,p);return}if(l!==2&&C&1&&A)if(l===0)A.beforeEnter(y),n(y,S,p),it(()=>A.enter(y),h);else{const{leave:B,delayLeave:k,afterLeave:j}=A,ne=()=>n(y,S,p),ue=()=>{B(y,()=>{ne(),j&&j()})};k?k(y,ne,ue):ue()}else n(y,S,p)},Oe=(b,S,p,l=!1,h=!1)=>{const{type:y,props:E,ref:A,children:O,dynamicChildren:C,shapeFlag:U,patchFlag:B,dirs:k}=b;if(A!=null&&qa(A,null,p,b,!0),U&256){S.ctx.deactivate(b);return}const j=U&1&&k,ne=!Eo(b);let ue;if(ne&&(ue=E&&E.onVnodeBeforeUnmount)&&Ht(ue,S,b),U&6)ri(b.component,p,l);else{if(U&128){b.suspense.unmount(p,l);return}j&&Wr(b,null,S,"beforeUnmount"),U&64?b.type.remove(b,S,p,h,Bt,l):C&&(y!==Ze||B>0&&B&64)?Ge(C,S,p,!1,!0):(y===Ze&&B&384||!h&&U&16)&&Ge(O,S,p),l&&mr(b)}(ne&&(ue=E&&E.onVnodeUnmounted)||j)&&it(()=>{ue&&Ht(ue,S,b),j&&Wr(b,null,S,"unmounted")},p)},mr=b=>{const{type:S,el:p,anchor:l,transition:h}=b;if(S===Ze){dn(p,l);return}if(S===ks){D(b);return}const y=()=>{o(p),h&&!h.persisted&&h.afterLeave&&h.afterLeave()};if(b.shapeFlag&1&&h&&!h.persisted){const{leave:E,delayLeave:A}=h,O=()=>E(p,y);A?A(b.el,y,O):O()}else y()},dn=(b,S)=>{let p;for(;b!==S;)p=g(b),o(b),b=p;o(S)},ri=(b,S,p)=>{const{bum:l,scope:h,update:y,subTree:E,um:A}=b;l&&_o(l),h.stop(),y&&(y.active=!1,Oe(E,b,S,p)),A&&it(A,S),it(()=>{b.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},Ge=(b,S,p,l=!1,h=!1,y=0)=>{for(let E=y;E<b.length;E++)Oe(b[E],S,p,l,h)},_r=b=>b.shapeFlag&6?_r(b.component.subTree):b.shapeFlag&128?b.suspense.next():g(b.anchor||b.el),pn=(b,S,p)=>{b==null?S._vnode&&Oe(S._vnode,null,null,!0):_(S._vnode||null,b,S,null,null,null,p),Ll(),S._vnode=b},Bt={p:_,um:Oe,m:Ft,r:mr,mt:Re,mc:G,pc:Z,pbc:oe,n:_r,o:e};let Lt,qe;return t&&([Lt,qe]=t(Bt)),{render:pn,hydrate:Lt,createApp:jy(pn,Lt)}}function qr({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function rh(e,t,r=!1){const n=e.children,o=t.children;if(ee(n)&&ee(o))for(let i=0;i<n.length;i++){const s=n[i];let u=o[i];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=o[i]=Tr(o[i]),u.el=s.el),r||rh(s,u))}}function Hy(e){const t=e.slice(),r=[0];let n,o,i,s,u;const f=e.length;for(n=0;n<f;n++){const a=e[n];if(a!==0){if(o=r[r.length-1],e[o]<a){t[n]=o,r.push(n);continue}for(i=0,s=r.length-1;i<s;)u=i+s>>1,e[r[u]]<a?i=u+1:s=u;a<e[r[i]]&&(i>0&&(t[n]=r[i-1]),r[i]=n)}}for(i=r.length,s=r[i-1];i-- >0;)r[i]=s,s=t[s];return r}const Ky=e=>e.__isTeleport,Ze=Symbol(void 0),Su=Symbol(void 0),qt=Symbol(void 0),ks=Symbol(void 0),Ri=[];let jt=null;function Sr(e=!1){Ri.push(jt=e?null:[])}function Gy(){Ri.pop(),jt=Ri[Ri.length-1]||null}let Di=1;function Pc(e){Di+=e}function nh(e){return e.dynamicChildren=Di>0?jt||Dn:null,Gy(),Di>0&&jt&&jt.push(e),e}function Jr(e,t,r,n,o,i){return nh(Nr(e,t,r,n,o,i,!0))}function Vy(e,t,r,n,o){return nh(tr(e,t,r,n,o,!0))}function Jy(e){return e?e.__v_isVNode===!0:!1}function Yr(e,t){return e.type===t.type&&e.key===t.key}const is="__vInternal",ih=({key:e})=>e!=null?e:null,wo=({ref:e,ref_key:t,ref_for:r})=>e!=null?ke(e)||He(e)||ie(e)?{i:It,r:e,k:t,f:!!r}:e:null;function Nr(e,t=null,r=null,n=0,o=null,i=e===Ze?0:1,s=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ih(t),ref:t&&wo(t),scopeId:Ml,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null};return u?(Tu(f,r),i&128&&e.normalize(f)):r&&(f.shapeFlag|=ke(r)?8:16),Di>0&&!s&&jt&&(f.patchFlag>0||i&6)&&f.patchFlag!==32&&jt.push(f),f}const tr=Yy;function Yy(e,t=null,r=null,n=0,o=null,i=!1){if((!e||e===Oy)&&(e=qt),Jy(e)){const u=Dr(e,t,!0);return r&&Tu(u,r),Di>0&&!i&&jt&&(u.shapeFlag&6?jt[jt.indexOf(e)]=u:jt.push(u)),u.patchFlag|=-2,u}if(am(e)&&(e=e.__vccOpts),t){t=zy(t);let{class:u,style:f}=t;u&&!ke(u)&&(t.class=xr(u)),je(f)&&(Il(f)&&!ee(f)&&(f=Ke({},f)),t.style=fu(f))}const s=ke(e)?1:cy(e)?128:Ky(e)?64:je(e)?4:ie(e)?2:0;return Nr(e,t,r,n,o,s,i,!0)}function zy(e){return e?Il(e)||is in e?Ke({},e):e:null}function Dr(e,t,r=!1){const{props:n,ref:o,patchFlag:i,children:s}=e,u=t?Xy(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&ih(u),ref:t&&t.ref?r&&o?ee(o)?o.concat(wo(t)):[o,wo(t)]:wo(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ze?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Dr(e.ssContent),ssFallback:e.ssFallback&&Dr(e.ssFallback),el:e.el,anchor:e.anchor}}function os(e=" ",t=0){return tr(Su,null,e,t)}function js(e="",t=!1){return t?(Sr(),Vy(qt,null,e)):tr(qt,null,e)}function Xt(e){return e==null||typeof e=="boolean"?tr(qt):ee(e)?tr(Ze,null,e.slice()):typeof e=="object"?Tr(e):tr(Su,null,String(e))}function Tr(e){return e.el===null||e.memo?e:Dr(e)}function Tu(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ee(t))r=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),Tu(e,o()),o._c&&(o._d=!0));return}else{r=32;const o=t._;!o&&!(is in t)?t._ctx=It:o===3&&It&&(It.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ie(t)?(t={default:t,_ctx:It},r=32):(t=String(t),n&64?(r=16,t=[os(t)]):r=8);e.children=t,e.shapeFlag|=r}function Xy(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=xr([t.class,n.class]));else if(o==="style")t.style=fu([t.style,n.style]);else if(Vo(o)){const i=t[o],s=n[o];s&&i!==s&&!(ee(i)&&i.includes(s))&&(t[o]=i?[].concat(i,s):s)}else o!==""&&(t[o]=n[o])}return t}function Ht(e,t,r,n=null){xt(e,t,7,[r,n])}const Qy=th();let Zy=0;function em(e,t,r){const n=e.type,o=(t?t.appContext:e.appContext)||Qy,i={uid:Zy++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new _g(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xl(n,o),emitsOptions:Ul(n,o),emit:null,emitted:null,propsDefaults:ve,inheritAttrs:n.inheritAttrs,ctx:ve,data:ve,props:ve,attrs:ve,slots:ve,refs:ve,setupState:ve,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=ny.bind(null,i),e.ce&&e.ce(i),i}let $e=null;const tm=()=>$e||It,Wn=e=>{$e=e,e.scope.on()},rn=()=>{$e&&$e.scope.off(),$e=null};function oh(e){return e.vnode.shapeFlag&4}let Ui=!1;function rm(e,t=!1){Ui=t;const{props:r,children:n}=e.vnode,o=oh(e);Ly(e,r,o,t),My(e,n);const i=o?nm(e,t):void 0;return Ui=!1,i}function nm(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Ol(new Proxy(e.ctx,Ny));const{setup:n}=r;if(n){const o=e.setupContext=n.length>1?om(e):null;Wn(e),Jn();const i=Fr(n,e,0,[e.props,o]);if(Yn(),rn(),hl(i)){if(i.then(rn,rn),t)return i.then(s=>{Fc(e,s,t)}).catch(s=>{Zo(s,e,0)});e.asyncDep=i}else Fc(e,i,t)}else sh(e,t)}function Fc(e,t,r){ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:je(t)&&(e.setupState=Rl(t)),sh(e,r)}let Bc;function sh(e,t,r){const n=e.type;if(!e.render){if(!t&&Bc&&!n.render){const o=n.template;if(o){const{isCustomElement:i,compilerOptions:s}=e.appContext.config,{delimiters:u,compilerOptions:f}=n,a=Ke(Ke({isCustomElement:i,delimiters:u},s),f);n.render=Bc(o,a)}}e.render=n.render||Wt}Wn(e),Jn(),Ry(e),Yn(),rn()}function im(e){return new Proxy(e.attrs,{get(t,r){return yt(e,"get","$attrs"),t[r]}})}function om(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=im(e))},slots:e.slots,emit:e.emit,expose:t}}function ss(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Rl(Ol(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Co)return Co[r](e)}}))}function sm(e,t=!0){return ie(e)?e.displayName||e.name:e.name||t&&e.__name}function am(e){return ie(e)&&"__vccOpts"in e}const um=(e,t)=>zg(e,t,Ui),cm="3.2.37",fm="http://www.w3.org/2000/svg",zr=typeof document!="undefined"?document:null,Lc=zr&&zr.createElement("template"),lm={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const o=t?zr.createElementNS(fm,e):zr.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>zr.createTextNode(e),createComment:e=>zr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>zr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,o,i){const s=r?r.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),r),!(o===i||!(o=o.nextSibling)););else{Lc.innerHTML=n?`<svg>${e}</svg>`:e;const u=Lc.content;if(n){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}t.insertBefore(u,r)}return[s?s.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function hm(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function dm(e,t,r){const n=e.style,o=ke(r);if(r&&!o){for(const i in r)Ha(n,i,r[i]);if(t&&!ke(t))for(const i in t)r[i]==null&&Ha(n,i,"")}else{const i=n.display;o?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=i)}}const Dc=/\s*!important$/;function Ha(e,t,r){if(ee(r))r.forEach(n=>Ha(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=pm(e,t);Dc.test(r)?e.setProperty(Vn(n),r.replace(Dc,""),"important"):e[n]=r}}const Uc=["Webkit","Moz","ms"],Ws={};function pm(e,t){const r=Ws[t];if(r)return r;let n=rr(t);if(n!=="filter"&&n in e)return Ws[t]=n;n=zo(n);for(let o=0;o<Uc.length;o++){const i=Uc[o]+n;if(i in e)return Ws[t]=i}return t}const Mc="http://www.w3.org/1999/xlink";function gm(e,t,r,n,o){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(Mc,t.slice(6,t.length)):e.setAttributeNS(Mc,t,r);else{const i=ag(t);r==null||i&&!ul(r)?e.removeAttribute(t):e.setAttribute(t,i?"":r)}}function ym(e,t,r,n,o,i,s){if(t==="innerHTML"||t==="textContent"){n&&s(n,o,i),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const f=r==null?"":r;(e.value!==f||e.tagName==="OPTION")&&(e.value=f),r==null&&e.removeAttribute(t);return}let u=!1;if(r===""||r==null){const f=typeof e[t];f==="boolean"?r=ul(r):r==null&&f==="string"?(r="",u=!0):f==="number"&&(r=0,u=!0)}try{e[t]=r}catch{}u&&e.removeAttribute(t)}const[ah,mm]=(()=>{let e=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let Ka=0;const _m=Promise.resolve(),vm=()=>{Ka=0},Em=()=>Ka||(_m.then(vm),Ka=ah());function Nn(e,t,r,n){e.addEventListener(t,r,n)}function wm(e,t,r,n){e.removeEventListener(t,r,n)}function bm(e,t,r,n,o=null){const i=e._vei||(e._vei={}),s=i[t];if(n&&s)s.value=n;else{const[u,f]=Am(t);if(n){const a=i[t]=Sm(n,o);Nn(e,u,a,f)}else s&&(wm(e,u,s,f),i[t]=void 0)}}const $c=/(?:Once|Passive|Capture)$/;function Am(e){let t;if($c.test(e)){t={};let r;for(;r=e.match($c);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[Vn(e.slice(2)),t]}function Sm(e,t){const r=n=>{const o=n.timeStamp||ah();(mm||o>=r.attached-1)&&xt(Tm(n,r.value),t,5,[n])};return r.value=e,r.attached=Em(),r}function Tm(e,t){if(ee(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const kc=/^on[a-z]/,Im=(e,t,r,n,o=!1,i,s,u,f)=>{t==="class"?hm(e,n,o):t==="style"?dm(e,r,n):Vo(t)?lu(t)||bm(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Om(e,t,n,o))?ym(e,t,n,i,s,u,f):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),gm(e,t,n,o))};function Om(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&kc.test(t)&&ie(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||kc.test(t)&&ke(r)?!1:t in e}const xm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};gy.props;const jc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ee(t)?r=>_o(t,r):t};function Nm(e){e.target.composing=!0}function Wc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const qc={created(e,{modifiers:{lazy:t,trim:r,number:n}},o){e._assign=jc(o);const i=n||o.props&&o.props.type==="number";Nn(e,t?"change":"input",s=>{if(s.target.composing)return;let u=e.value;r&&(u=u.trim()),i&&(u=Na(u)),e._assign(u)}),r&&Nn(e,"change",()=>{e.value=e.value.trim()}),t||(Nn(e,"compositionstart",Nm),Nn(e,"compositionend",Wc),Nn(e,"change",Wc))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:o}},i){if(e._assign=jc(i),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(o||e.type==="number")&&Na(e.value)===t))return;const s=t==null?"":t;e.value!==s&&(e.value=s)}},Rm=Ke({patchProp:Im},lm);let Hc;function Cm(){return Hc||(Hc=Wy(Rm))}const Pm=(...e)=>{const t=Cm().createApp(...e),{mount:r}=t;return t.mount=n=>{const o=Fm(n);if(!o)return;const i=t._component;!ie(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.innerHTML="";const s=r(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),s},t};function Fm(e){return ke(e)?document.querySelector(e):e}var Bm=!1,Lm=!0,H=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Dm(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}var Iu={exports:{}},uh=function(t,r){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return t.apply(r,o)}},Um=uh,Ou=Object.prototype.toString,xu=function(e){return function(t){var r=Ou.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function cn(e){return e=e.toLowerCase(),function(r){return xu(r)===e}}function Nu(e){return Array.isArray(e)}function Fo(e){return typeof e=="undefined"}function Mm(e){return e!==null&&!Fo(e)&&e.constructor!==null&&!Fo(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var ch=cn("ArrayBuffer");function $m(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ch(e.buffer),t}function km(e){return typeof e=="string"}function jm(e){return typeof e=="number"}function fh(e){return e!==null&&typeof e=="object"}function bo(e){if(xu(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var Wm=cn("Date"),qm=cn("File"),Hm=cn("Blob"),Km=cn("FileList");function Ru(e){return Ou.call(e)==="[object Function]"}function Gm(e){return fh(e)&&Ru(e.pipe)}function Vm(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||Ou.call(e)===t||Ru(e.toString)&&e.toString()===t)}var Jm=cn("URLSearchParams");function Ym(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function zm(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Cu(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),Nu(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function Ga(){var e={};function t(o,i){bo(e[i])&&bo(o)?e[i]=Ga(e[i],o):bo(o)?e[i]=Ga({},o):Nu(o)?e[i]=o.slice():e[i]=o}for(var r=0,n=arguments.length;r<n;r++)Cu(arguments[r],t);return e}function Xm(e,t,r){return Cu(t,function(o,i){r&&typeof o=="function"?e[i]=Um(o,r):e[i]=o}),e}function Qm(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function Zm(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)}function e0(e,t,r){var n,o,i,s={};t=t||{};do{for(n=Object.getOwnPropertyNames(e),o=n.length;o-- >0;)i=n[o],s[i]||(t[i]=e[i],s[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t}function t0(e,t,r){e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return n!==-1&&n===r}function r0(e){if(!e)return null;var t=e.length;if(Fo(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r}var n0=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array)),We={isArray:Nu,isArrayBuffer:ch,isBuffer:Mm,isFormData:Vm,isArrayBufferView:$m,isString:km,isNumber:jm,isObject:fh,isPlainObject:bo,isUndefined:Fo,isDate:Wm,isFile:qm,isBlob:Hm,isFunction:Ru,isStream:Gm,isURLSearchParams:Jm,isStandardBrowserEnv:zm,forEach:Cu,merge:Ga,extend:Xm,trim:Ym,stripBOM:Qm,inherits:Zm,toFlatObject:e0,kindOf:xu,kindOfTest:cn,endsWith:t0,toArray:r0,isTypedArray:n0,isFileList:Km},vn=We;function Kc(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var lh=function(t,r,n){if(!r)return t;var o;if(n)o=n(r);else if(vn.isURLSearchParams(r))o=r.toString();else{var i=[];vn.forEach(r,function(f,a){f===null||typeof f=="undefined"||(vn.isArray(f)?a=a+"[]":f=[f],vn.forEach(f,function(d){vn.isDate(d)?d=d.toISOString():vn.isObject(d)&&(d=JSON.stringify(d)),i.push(Kc(a)+"="+Kc(d))}))}),o=i.join("&")}if(o){var s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t},i0=We;function as(){this.handlers=[]}as.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};as.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};as.prototype.forEach=function(t){i0.forEach(this.handlers,function(n){n!==null&&t(n)})};var o0=as,s0=We,a0=function(t,r){s0.forEach(t,function(o,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(t[r]=o,delete t[i])})},hh=We;function qn(e,t,r,n,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}hh.inherits(qn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var dh=qn.prototype,ph={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){ph[e]={value:e}});Object.defineProperties(qn,ph);Object.defineProperty(dh,"isAxiosError",{value:!0});qn.from=function(e,t,r,n,o,i){var s=Object.create(dh);return hh.toFlatObject(e,s,function(f){return f!==Error.prototype}),qn.call(s,e.message,t,r,n,o),s.name=e.name,i&&Object.assign(s,i),s};var zn=qn,gh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dt=We;function u0(e,t){t=t||new FormData;var r=[];function n(i){return i===null?"":Dt.isDate(i)?i.toISOString():Dt.isArrayBuffer(i)||Dt.isTypedArray(i)?typeof Blob=="function"?new Blob([i]):Buffer.from(i):i}function o(i,s){if(Dt.isPlainObject(i)||Dt.isArray(i)){if(r.indexOf(i)!==-1)throw Error("Circular reference detected in "+s);r.push(i),Dt.forEach(i,function(f,a){if(!Dt.isUndefined(f)){var c=s?s+"."+a:a,d;if(f&&!s&&typeof f=="object"){if(Dt.endsWith(a,"{}"))f=JSON.stringify(f);else if(Dt.endsWith(a,"[]")&&(d=Dt.toArray(f))){d.forEach(function(g){!Dt.isUndefined(g)&&t.append(c,n(g))});return}}o(f,c)}}),r.pop()}else t.append(s,n(i))}return o(e),t}var yh=u0,qs=zn,c0=function(t,r,n){var o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):r(new qs("Request failed with status code "+n.status,[qs.ERR_BAD_REQUEST,qs.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))},io=We,f0=io.isStandardBrowserEnv()?function(){return{write:function(r,n,o,i,s,u){var f=[];f.push(r+"="+encodeURIComponent(n)),io.isNumber(o)&&f.push("expires="+new Date(o).toGMTString()),io.isString(i)&&f.push("path="+i),io.isString(s)&&f.push("domain="+s),u===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),l0=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},h0=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},d0=l0,p0=h0,mh=function(t,r){return t&&!d0(r)?p0(t,r):r},Hs=We,g0=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],y0=function(t){var r={},n,o,i;return t&&Hs.forEach(t.split(`
`),function(u){if(i=u.indexOf(":"),n=Hs.trim(u.substr(0,i)).toLowerCase(),o=Hs.trim(u.substr(i+1)),n){if(r[n]&&g0.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([o]):r[n]=r[n]?r[n]+", "+o:o}}),r},Gc=We,m0=Gc.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function o(i){var s=i;return t&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=o(window.location.href),function(s){var u=Gc.isString(s)?o(s):s;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}(),Va=zn,_0=We;function _h(e){Va.call(this,e==null?"canceled":e,Va.ERR_CANCELED),this.name="CanceledError"}_0.inherits(_h,Va,{__CANCEL__:!0});var us=_h,v0=function(t){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""},ii=We,E0=c0,w0=f0,b0=lh,A0=mh,S0=y0,T0=m0,I0=gh,sr=zn,O0=us,x0=v0,Vc=function(t){return new Promise(function(n,o){var i=t.data,s=t.headers,u=t.responseType,f;function a(){t.cancelToken&&t.cancelToken.unsubscribe(f),t.signal&&t.signal.removeEventListener("abort",f)}ii.isFormData(i)&&ii.isStandardBrowserEnv()&&delete s["Content-Type"];var c=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+g)}var v=A0(t.baseURL,t.url);c.open(t.method.toUpperCase(),b0(v,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function T(){if(!!c){var w="getAllResponseHeaders"in c?S0(c.getAllResponseHeaders()):null,P=!u||u==="text"||u==="json"?c.responseText:c.response,R={data:P,status:c.status,statusText:c.statusText,headers:w,config:t,request:c};E0(function(D){n(D),a()},function(D){o(D),a()},R),c=null}}if("onloadend"in c?c.onloadend=T:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(T)},c.onabort=function(){!c||(o(new sr("Request aborted",sr.ECONNABORTED,t,c)),c=null)},c.onerror=function(){o(new sr("Network Error",sr.ERR_NETWORK,t,c,c)),c=null},c.ontimeout=function(){var P=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",R=t.transitional||I0;t.timeoutErrorMessage&&(P=t.timeoutErrorMessage),o(new sr(P,R.clarifyTimeoutError?sr.ETIMEDOUT:sr.ECONNABORTED,t,c)),c=null},ii.isStandardBrowserEnv()){var I=(t.withCredentials||T0(v))&&t.xsrfCookieName?w0.read(t.xsrfCookieName):void 0;I&&(s[t.xsrfHeaderName]=I)}"setRequestHeader"in c&&ii.forEach(s,function(P,R){typeof i=="undefined"&&R.toLowerCase()==="content-type"?delete s[R]:c.setRequestHeader(R,P)}),ii.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),u&&u!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(f=function(w){!c||(o(!w||w&&w.type?new O0:w),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(f),t.signal&&(t.signal.aborted?f():t.signal.addEventListener("abort",f))),i||(i=null);var _=x0(v);if(_&&["http","https","file"].indexOf(_)===-1){o(new sr("Unsupported protocol "+_+":",sr.ERR_BAD_REQUEST,t));return}c.send(i)})},N0=null,Me=We,Jc=a0,Yc=zn,R0=gh,C0=yh,P0={"Content-Type":"application/x-www-form-urlencoded"};function zc(e,t){!Me.isUndefined(e)&&Me.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function F0(){var e;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Vc),e}function B0(e,t,r){if(Me.isString(e))try{return(t||JSON.parse)(e),Me.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var cs={transitional:R0,adapter:F0(),transformRequest:[function(t,r){if(Jc(r,"Accept"),Jc(r,"Content-Type"),Me.isFormData(t)||Me.isArrayBuffer(t)||Me.isBuffer(t)||Me.isStream(t)||Me.isFile(t)||Me.isBlob(t))return t;if(Me.isArrayBufferView(t))return t.buffer;if(Me.isURLSearchParams(t))return zc(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n=Me.isObject(t),o=r&&r["Content-Type"],i;if((i=Me.isFileList(t))||n&&o==="multipart/form-data"){var s=this.env&&this.env.FormData;return C0(i?{"files[]":t}:t,s&&new s)}else if(n||o==="application/json")return zc(r,"application/json"),B0(t);return t}],transformResponse:[function(t){var r=this.transitional||cs.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||o&&Me.isString(t)&&t.length)try{return JSON.parse(t)}catch(s){if(i)throw s.name==="SyntaxError"?Yc.from(s,Yc.ERR_BAD_RESPONSE,this,null,this.response):s}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:N0},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Me.forEach(["delete","get","head"],function(t){cs.headers[t]={}});Me.forEach(["post","put","patch"],function(t){cs.headers[t]=Me.merge(P0)});var Pu=cs,L0=We,D0=Pu,U0=function(t,r,n){var o=this||D0;return L0.forEach(n,function(s){t=s.call(o,t,r)}),t},vh=function(t){return!!(t&&t.__CANCEL__)},Xc=We,Ks=U0,M0=vh,$0=Pu,k0=us;function Gs(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new k0}var j0=function(t){Gs(t),t.headers=t.headers||{},t.data=Ks.call(t,t.data,t.headers,t.transformRequest),t.headers=Xc.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Xc.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var r=t.adapter||$0.adapter;return r(t).then(function(o){return Gs(t),o.data=Ks.call(t,o.data,o.headers,t.transformResponse),o},function(o){return M0(o)||(Gs(t),o&&o.response&&(o.response.data=Ks.call(t,o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})},ct=We,Eh=function(t,r){r=r||{};var n={};function o(c,d){return ct.isPlainObject(c)&&ct.isPlainObject(d)?ct.merge(c,d):ct.isPlainObject(d)?ct.merge({},d):ct.isArray(d)?d.slice():d}function i(c){if(ct.isUndefined(r[c])){if(!ct.isUndefined(t[c]))return o(void 0,t[c])}else return o(t[c],r[c])}function s(c){if(!ct.isUndefined(r[c]))return o(void 0,r[c])}function u(c){if(ct.isUndefined(r[c])){if(!ct.isUndefined(t[c]))return o(void 0,t[c])}else return o(void 0,r[c])}function f(c){if(c in r)return o(t[c],r[c]);if(c in t)return o(void 0,t[c])}var a={url:s,method:s,data:s,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f};return ct.forEach(Object.keys(t).concat(Object.keys(r)),function(d){var g=a[d]||i,v=g(d);ct.isUndefined(v)&&g!==f||(n[d]=v)}),n},wh={version:"0.27.2"},W0=wh.version,Ir=zn,Fu={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Fu[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var Qc={};Fu.transitional=function(t,r,n){function o(i,s){return"[Axios v"+W0+"] Transitional option '"+i+"'"+s+(n?". "+n:"")}return function(i,s,u){if(t===!1)throw new Ir(o(s," has been removed"+(r?" in "+r:"")),Ir.ERR_DEPRECATED);return r&&!Qc[s]&&(Qc[s]=!0,console.warn(o(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,s,u):!0}};function q0(e,t,r){if(typeof e!="object")throw new Ir("options must be an object",Ir.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),o=n.length;o-- >0;){var i=n[o],s=t[i];if(s){var u=e[i],f=u===void 0||s(u,i,e);if(f!==!0)throw new Ir("option "+i+" must be "+f,Ir.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ir("Unknown option "+i,Ir.ERR_BAD_OPTION)}}var H0={assertOptions:q0,validators:Fu},bh=We,K0=lh,Zc=o0,ef=j0,fs=Eh,G0=mh,Ah=H0,En=Ah.validators;function Hn(e){this.defaults=e,this.interceptors={request:new Zc,response:new Zc}}Hn.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=fs(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Ah.assertOptions(n,{silentJSONParsing:En.transitional(En.boolean),forcedJSONParsing:En.transitional(En.boolean),clarifyTimeoutError:En.transitional(En.boolean)},!1);var o=[],i=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(i=i&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});var s=[];this.interceptors.response.forEach(function(v){s.push(v.fulfilled,v.rejected)});var u;if(!i){var f=[ef,void 0];for(Array.prototype.unshift.apply(f,o),f=f.concat(s),u=Promise.resolve(r);f.length;)u=u.then(f.shift(),f.shift());return u}for(var a=r;o.length;){var c=o.shift(),d=o.shift();try{a=c(a)}catch(g){d(g);break}}try{u=ef(a)}catch(g){return Promise.reject(g)}for(;s.length;)u=u.then(s.shift(),s.shift());return u};Hn.prototype.getUri=function(t){t=fs(this.defaults,t);var r=G0(t.baseURL,t.url);return K0(r,t.params,t.paramsSerializer)};bh.forEach(["delete","get","head","options"],function(t){Hn.prototype[t]=function(r,n){return this.request(fs(n||{},{method:t,url:r,data:(n||{}).data}))}});bh.forEach(["post","put","patch"],function(t){function r(n){return function(i,s,u){return this.request(fs(u||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:s}))}}Hn.prototype[t]=r(),Hn.prototype[t+"Form"]=r(!0)});var V0=Hn,J0=us;function Kn(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(o){t=o});var r=this;this.promise.then(function(n){if(!!r._listeners){var o,i=r._listeners.length;for(o=0;o<i;o++)r._listeners[o](n);r._listeners=null}}),this.promise.then=function(n){var o,i=new Promise(function(s){r.subscribe(s),o=s}).then(n);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o){r.reason||(r.reason=new J0(o),t(r.reason))})}Kn.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Kn.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};Kn.prototype.unsubscribe=function(t){if(!!this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};Kn.source=function(){var t,r=new Kn(function(o){t=o});return{token:r,cancel:t}};var Y0=Kn,z0=function(t){return function(n){return t.apply(null,n)}},X0=We,Q0=function(t){return X0.isObject(t)&&t.isAxiosError===!0},tf=We,Z0=uh,Ao=V0,e_=Eh,t_=Pu;function Sh(e){var t=new Ao(e),r=Z0(Ao.prototype.request,t);return tf.extend(r,Ao.prototype,t),tf.extend(r,t),r.create=function(o){return Sh(e_(e,o))},r}var at=Sh(t_);at.Axios=Ao;at.CanceledError=us;at.CancelToken=Y0;at.isCancel=vh;at.VERSION=wh.version;at.toFormData=yh;at.AxiosError=zn;at.Cancel=at.CanceledError;at.all=function(t){return Promise.all(t)};at.spread=z0;at.isAxiosError=Q0;Iu.exports=at;Iu.exports.default=at;var r_=Iu.exports;const Bu=r_.create({baseURL:"https://tcb.lif3ng.cn/login"});Bu.interceptors.response.use(e=>e.data);const n_=e=>Bu.post("/by-mail",e),i_=e=>Bu.post("/check-code",e);var dt={},Ki={},et={};Object.defineProperty(et,"__esModule",{value:!0});et.COMMUNITY_SITE_URL=et.IS_DEBUG_MODE=et.getProtocol=et.setProtocol=et.getSdkName=et.setSdkName=void 0;var Th="@cloudbase/js-sdk";function o_(e){Th=e}et.setSdkName=o_;function s_(){return Th}et.getSdkName=s_;var Ih=typeof location!="undefined"&&location.protocol==="http:"?"http:":"https:";function a_(e){Ih=e}et.setProtocol=a_;function u_(){return Ih}et.getProtocol=u_;et.IS_DEBUG_MODE=!1;et.COMMUNITY_SITE_URL="https://support.qq.com/products/148793";var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.ERRORS=void 0;ls.ERRORS={INVALID_PARAMS:"INVALID_PARAMS",INVALID_SYNTAX:"INVALID_SYNTAX",INVALID_OPERATION:"INVALID_OPERATION",OPERATION_FAIL:"OPERATION_FAIL",NETWORK_ERROR:"NETWORK_ERROR",UNKOWN_ERROR:"UNKOWN_ERROR"};(function(e){var t=H&&H.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=H&&H.__exportStar||function(n,o){for(var i in n)i!=="default"&&!o.hasOwnProperty(i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(et,e),r(ls,e)})(Ki);var Oh={},Gn={},Bo;(function(e){e.local="local",e.none="none",e.session="session"})(Bo||(Bo={}));var xh=function(){function e(){}return e}(),c_=function(){function e(){}return e}();function Ja(e,t,r){r===void 0&&(r={});var n=/\?/.test(t),o="";for(var i in r)o===""?!n&&(t+="?"):o+="&",o+=i+"="+encodeURIComponent(r[i]);return t+=o,/^http(s)?\:\/\//.test(t)?t:""+e+t}var f_=Object.freeze(Object.defineProperty({__proto__:null,get StorageType(){return Bo},AbstractSDKRequest:xh,AbstractStorage:c_,formatUrl:Ja},Symbol.toStringTag,{value:"Module"})),Nh=Dm(f_),Y={},Rh={exports:{}},Xn={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(H,function(){var r=r||function(n,o){var i=Object.create||function(){function _(){}return function(w){var P;return _.prototype=w,P=new _,_.prototype=null,P}}(),s={},u=s.lib={},f=u.Base=function(){return{extend:function(_){var w=i(this);return _&&w.mixIn(_),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var _=this.extend();return _.init.apply(_,arguments),_},init:function(){},mixIn:function(_){for(var w in _)_.hasOwnProperty(w)&&(this[w]=_[w]);_.hasOwnProperty("toString")&&(this.toString=_.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=u.WordArray=f.extend({init:function(_,w){_=this.words=_||[],w!=o?this.sigBytes=w:this.sigBytes=_.length*4},toString:function(_){return(_||d).stringify(this)},concat:function(_){var w=this.words,P=_.words,R=this.sigBytes,N=_.sigBytes;if(this.clamp(),R%4)for(var D=0;D<N;D++){var $=P[D>>>2]>>>24-D%4*8&255;w[R+D>>>2]|=$<<24-(R+D)%4*8}else for(var D=0;D<N;D+=4)w[R+D>>>2]=P[D>>>2];return this.sigBytes+=N,this},clamp:function(){var _=this.words,w=this.sigBytes;_[w>>>2]&=4294967295<<32-w%4*8,_.length=n.ceil(w/4)},clone:function(){var _=f.clone.call(this);return _.words=this.words.slice(0),_},random:function(_){for(var w=[],P=function(q){var q=q,M=987654321,G=4294967295;return function(){M=36969*(M&65535)+(M>>16)&G,q=18e3*(q&65535)+(q>>16)&G;var Q=(M<<16)+q&G;return Q/=4294967296,Q+=.5,Q*(n.random()>.5?1:-1)}},R=0,N;R<_;R+=4){var D=P((N||n.random())*4294967296);N=D()*987654071,w.push(D()*4294967296|0)}return new a.init(w,_)}}),c=s.enc={},d=c.Hex={stringify:function(_){for(var w=_.words,P=_.sigBytes,R=[],N=0;N<P;N++){var D=w[N>>>2]>>>24-N%4*8&255;R.push((D>>>4).toString(16)),R.push((D&15).toString(16))}return R.join("")},parse:function(_){for(var w=_.length,P=[],R=0;R<w;R+=2)P[R>>>3]|=parseInt(_.substr(R,2),16)<<24-R%8*4;return new a.init(P,w/2)}},g=c.Latin1={stringify:function(_){for(var w=_.words,P=_.sigBytes,R=[],N=0;N<P;N++){var D=w[N>>>2]>>>24-N%4*8&255;R.push(String.fromCharCode(D))}return R.join("")},parse:function(_){for(var w=_.length,P=[],R=0;R<w;R++)P[R>>>2]|=(_.charCodeAt(R)&255)<<24-R%4*8;return new a.init(P,w)}},v=c.Utf8={stringify:function(_){try{return decodeURIComponent(escape(g.stringify(_)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(_){return g.parse(unescape(encodeURIComponent(_)))}},T=u.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(_){typeof _=="string"&&(_=v.parse(_)),this._data.concat(_),this._nDataBytes+=_.sigBytes},_process:function(_){var w=this._data,P=w.words,R=w.sigBytes,N=this.blockSize,D=N*4,$=R/D;_?$=n.ceil($):$=n.max(($|0)-this._minBufferSize,0);var q=$*N,M=n.min(q*4,R);if(q){for(var G=0;G<q;G+=N)this._doProcessBlock(P,G);var Q=P.splice(0,q);w.sigBytes-=M}return new a.init(Q,M)},clone:function(){var _=f.clone.call(this);return _._data=this._data.clone(),_},_minBufferSize:0});u.Hasher=T.extend({cfg:f.extend(),init:function(_){this.cfg=this.cfg.extend(_),this.reset()},reset:function(){T.reset.call(this),this._doReset()},update:function(_){return this._append(_),this._process(),this},finalize:function(_){_&&this._append(_);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(_){return function(w,P){return new _.init(P).finalize(w)}},_createHmacHelper:function(_){return function(w,P){return new I.HMAC.init(_,P).finalize(w)}}});var I=s.algo={};return s}(Math);return r})})(Xn);var Ch={exports:{}};(function(e,t){(function(r,n){e.exports=n(Xn.exports)})(H,function(r){return function(n){var o=r,i=o.lib,s=i.WordArray,u=i.Hasher,f=o.algo,a=[],c=[];(function(){function v(w){for(var P=n.sqrt(w),R=2;R<=P;R++)if(!(w%R))return!1;return!0}function T(w){return(w-(w|0))*4294967296|0}for(var I=2,_=0;_<64;)v(I)&&(_<8&&(a[_]=T(n.pow(I,1/2))),c[_]=T(n.pow(I,1/3)),_++),I++})();var d=[],g=f.SHA256=u.extend({_doReset:function(){this._hash=new s.init(a.slice(0))},_doProcessBlock:function(v,T){for(var I=this._hash.words,_=I[0],w=I[1],P=I[2],R=I[3],N=I[4],D=I[5],$=I[6],q=I[7],M=0;M<64;M++){if(M<16)d[M]=v[T+M]|0;else{var G=d[M-15],Q=(G<<25|G>>>7)^(G<<14|G>>>18)^G>>>3,oe=d[M-2],he=(oe<<15|oe>>>17)^(oe<<13|oe>>>19)^oe>>>10;d[M]=Q+d[M-7]+he+d[M-16]}var te=N&D^~N&$,Se=_&w^_&P^w&P,Re=(_<<30|_>>>2)^(_<<19|_>>>13)^(_<<10|_>>>22),we=(N<<26|N>>>6)^(N<<21|N>>>11)^(N<<7|N>>>25),z=q+we+te+c[M]+d[M],re=Re+Se;q=$,$=D,D=N,N=R+z|0,R=P,P=w,w=_,_=z+re|0}I[0]=I[0]+_|0,I[1]=I[1]+w|0,I[2]=I[2]+P|0,I[3]=I[3]+R|0,I[4]=I[4]+N|0,I[5]=I[5]+D|0,I[6]=I[6]+$|0,I[7]=I[7]+q|0},_doFinalize:function(){var v=this._data,T=v.words,I=this._nDataBytes*8,_=v.sigBytes*8;return T[_>>>5]|=128<<24-_%32,T[(_+64>>>9<<4)+14]=n.floor(I/4294967296),T[(_+64>>>9<<4)+15]=I,v.sigBytes=T.length*4,this._process(),this._hash},clone:function(){var v=u.clone.call(this);return v._hash=this._hash.clone(),v}});o.SHA256=u._createHelper(g),o.HmacSHA256=u._createHmacHelper(g)}(Math),r.SHA256})})(Ch);var Ph={exports:{}};(function(e,t){(function(r,n){e.exports=n(Xn.exports)})(H,function(r){(function(){var n=r,o=n.lib,i=o.Base,s=n.enc,u=s.Utf8,f=n.algo;f.HMAC=i.extend({init:function(a,c){a=this._hasher=new a.init,typeof c=="string"&&(c=u.parse(c));var d=a.blockSize,g=d*4;c.sigBytes>g&&(c=a.finalize(c)),c.clamp();for(var v=this._oKey=c.clone(),T=this._iKey=c.clone(),I=v.words,_=T.words,w=0;w<d;w++)I[w]^=1549556828,_[w]^=909522486;v.sigBytes=T.sigBytes=g,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var c=this._hasher,d=c.finalize(a);c.reset();var g=c.finalize(this._oKey.clone().concat(d));return g}})})()})})(Ph);(function(e,t){(function(r,n,o){e.exports=n(Xn.exports,Ch.exports,Ph.exports)})(H,function(r){return r.HmacSHA256})})(Rh);var Fh={exports:{}};(function(e,t){(function(r,n){e.exports=n(Xn.exports)})(H,function(r){return function(){var n=r,o=n.lib,i=o.WordArray,s=n.enc;s.Base64={stringify:function(f){var a=f.words,c=f.sigBytes,d=this._map;f.clamp();for(var g=[],v=0;v<c;v+=3)for(var T=a[v>>>2]>>>24-v%4*8&255,I=a[v+1>>>2]>>>24-(v+1)%4*8&255,_=a[v+2>>>2]>>>24-(v+2)%4*8&255,w=T<<16|I<<8|_,P=0;P<4&&v+P*.75<c;P++)g.push(d.charAt(w>>>6*(3-P)&63));var R=d.charAt(64);if(R)for(;g.length%4;)g.push(R);return g.join("")},parse:function(f){var a=f.length,c=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var g=0;g<c.length;g++)d[c.charCodeAt(g)]=g}var v=c.charAt(64);if(v){var T=f.indexOf(v);T!==-1&&(a=T)}return u(f,a,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function u(f,a,c){for(var d=[],g=0,v=0;v<a;v++)if(v%4){var T=c[f.charCodeAt(v-1)]<<v%4*2,I=c[f.charCodeAt(v)]>>>6-v%4*2;d[g>>>2]|=(T|I)<<24-g%4*8,g++}return i.create(d,g)}}(),r.enc.Base64})})(Fh);var Bh={exports:{}};(function(e,t){(function(r,n){e.exports=n(Xn.exports)})(H,function(r){return r.enc.Utf8})})(Bh);var Lu=H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Y,"__esModule",{value:!0});Y.transformPhone=Y.sleep=Y.printGroupLog=Y.throwError=Y.printInfo=Y.printError=Y.printWarn=Y.execCallback=Y.createPromiseCallback=Y.removeParam=Y.getHash=Y.getQuery=Y.toQueryString=Y.createSign=Y.formatUrl=Y.genSeqId=Y.isFormData=Y.isInstanceOf=Y.isNull=Y.isPalinObject=Y.isUndefined=Y.isString=Y.isArray=void 0;var l_=Lu(Rh.exports),h_=Lu(Fh.exports),rf=Lu(Bh.exports),hs=Ki;function d_(e){return Object.prototype.toString.call(e)==="[object Array]"}Y.isArray=d_;function p_(e){return typeof e=="string"}Y.isString=p_;function g_(e){return typeof e=="undefined"}Y.isUndefined=g_;function y_(e){return Object.prototype.toString.call(e)==="[object Object]"}Y.isPalinObject=y_;function m_(e){return Object.prototype.toString.call(e)==="[object Null]"}Y.isNull=m_;function __(e,t){return e instanceof t}Y.isInstanceOf=__;function v_(e){return Object.prototype.toString.call(e)==="[object FormData]"}Y.isFormData=v_;function E_(){return Math.random().toString(16).slice(2)}Y.genSeqId=E_;function w_(e,t,r){r===void 0&&(r={});var n=/\?/.test(t),o="";for(var i in r)o===""?!n&&(t+="?"):o+="&",o+=i+"="+encodeURIComponent(r[i]);return t+=o,/^http(s)?\:\/\//.test(t)?t:""+e+t}Y.formatUrl=w_;function Vs(e){var t=h_.default.stringify(e);return t=t.replace(/=+$/,""),t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_"),t}function b_(e,t){var r={alg:"HS256",typ:"JWT"},n=Vs(rf.default.parse(JSON.stringify(r))),o=Vs(rf.default.parse(JSON.stringify(e))),i=n+"."+o,s=Vs(l_.default(i,t));return i+"."+s}Y.createSign=b_;function A_(e){e===void 0&&(e={});var t=[];for(var r in e)t.push(r+"="+encodeURIComponent(e[r]));return t.join("&")}Y.toQueryString=A_;function S_(e,t){if(typeof window=="undefined")return!1;var r=t||window.location.search,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=r.substr(r.indexOf("?")+1).match(n);return o!=null?o[2]:""}Y.getQuery=S_;Y.getHash=function(e){if(typeof window=="undefined")return"";var t=window.location.hash.match(new RegExp("[#?&/]"+e+"=([^&#]*)"));return t?t[1]:""};function T_(e,t){var r=t.split("?")[0],n,o=[],i=t.indexOf("?")!==-1?t.split("?")[1]:"";if(i!==""){o=i.split("&");for(var s=o.length-1;s>=0;s-=1)n=o[s].split("=")[0],n===e&&o.splice(s,1);r=r+"?"+o.join("&")}return r}Y.removeParam=T_;function I_(){var e;if(!Promise){e=function(){},e.promise={};var t=function(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}var r=new Promise(function(n,o){e=function(i,s){return i?o(i):n(s)}});return e.promise=r,e}Y.createPromiseCallback=I_;function O_(e,t,r){if(r===void 0&&(r=null),e&&typeof e=="function")return e(t,r);if(t)throw t;return r}Y.execCallback=O_;function x_(e,t){console.warn("["+hs.getSdkName()+"]["+e+"]:"+t)}Y.printWarn=x_;function N_(e,t){console.error({code:e,msg:"["+hs.getSdkName()+"]["+e+"]:"+t})}Y.printError=N_;function R_(e,t){console.log("["+hs.getSdkName()+"]["+e+"]:"+t)}Y.printInfo=R_;function C_(e,t){throw new Error(JSON.stringify({code:e,msg:"["+hs.getSdkName()+"]["+e+"]:"+t}))}Y.throwError=C_;function P_(e){var t=e.title,r=e.subtitle,n=r===void 0?"":r,o=e.content,i=o===void 0?[]:o,s=e.printTrace,u=s===void 0?!1:s,f=e.collapsed,a=f===void 0?!1:f;a?console.groupCollapsed(t,n):console.group(t,n);for(var c=0,d=i;c<d.length;c++){var g=d[c],v=g.type,T=g.body;switch(v){case"info":console.log(T);break;case"warn":console.warn(T);break;case"error":console.error(T);break}}u&&console.trace("stack trace:"),console.groupEnd()}Y.printGroupLog=P_;Y.sleep=function(e){return e===void 0&&(e=0),new Promise(function(t){return setTimeout(t,e)})};function F_(e){return"+86"+e}Y.transformPhone=F_;var B_=H&&H.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Et=H&&H.__assign||function(){return Et=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Et.apply(this,arguments)},L_=H&&H.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},D_=H&&H.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.WebRequest=Gn.genAdapter=void 0;var U_=Nh,Js=Y,M_=et,Lh=function(e){B_(t,e);function t(r){var n=e.call(this)||this,o=r.timeout,i=r.timeoutMsg,s=r.restrictedMethods;return n._timeout=o||0,n._timeoutMsg=i||"\u8BF7\u6C42\u8D85\u65F6",n._restrictedMethods=s||["get","post","upload","download"],n}return t.prototype.get=function(r){return this._request(Et(Et({},r),{method:"get"}),this._restrictedMethods.includes("get"))},t.prototype.post=function(r){return this._request(Et(Et({},r),{method:"post"}),this._restrictedMethods.includes("post"))},t.prototype.put=function(r){return this._request(Et(Et({},r),{method:"put"}))},t.prototype.upload=function(r){var n=r.data,o=r.file,i=r.name,s=new FormData;for(var u in n)s.append(u,n[u]);return s.append("key",i),s.append("file",o),this._request(Et(Et({},r),{data:s,method:"post"}),this._restrictedMethods.includes("upload"))},t.prototype.download=function(r){return L_(this,void 0,void 0,function(){var n,o,i,s;return D_(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.get(Et(Et({},r),{headers:{},responseType:"blob"}))];case 1:return n=u.sent().data,o=window.URL.createObjectURL(new Blob([n])),i=decodeURIComponent(new URL(r.url).pathname.split("/").pop()||""),s=document.createElement("a"),s.href=o,s.setAttribute("download",i),s.style.display="none",document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(o),document.body.removeChild(s),[3,3];case 2:return u.sent(),[3,3];case 3:return[2,new Promise(function(f){f({statusCode:200,tempFilePath:r.url})})]}})})},t.prototype._request=function(r,n){var o=this;n===void 0&&(n=!1);var i=String(r.method).toLowerCase()||"get";return new Promise(function(s){var u=r.url,f=r.headers,a=f===void 0?{}:f,c=r.data,d=r.responseType,g=r.withCredentials,v=r.body,T=r.onUploadProgress,I=Js.formatUrl(M_.getProtocol(),u,i==="get"?c:{}),_=new XMLHttpRequest;_.open(i,I),d&&(_.responseType=d);for(var w in a)_.setRequestHeader(w,a[w]);var P;T&&_.upload.addEventListener("progress",T),_.onreadystatechange=function(){var N={};if(_.readyState===4){var D=_.getAllResponseHeaders(),$=D.trim().split(/[\r\n]+/),q={};$.forEach(function(M){var G=M.split(": "),Q=G.shift().toLowerCase(),oe=G.join(": ");q[Q]=oe}),N.header=q,N.statusCode=_.status;try{N.data=d==="blob"?_.response:JSON.parse(_.responseText)}catch{N.data=d==="blob"?_.response:_.responseText}clearTimeout(P),s(N)}},n&&o._timeout&&(P=setTimeout(function(){console.warn(o._timeoutMsg),_.abort()},o._timeout));var R;Js.isFormData(c)?R=c:a["content-type"]==="application/x-www-form-urlencoded"?R=Js.toQueryString(c):v?R=v:R=c?JSON.stringify(c):void 0,g&&(_.withCredentials=!0),_.send(R)})},t}(U_.AbstractSDKRequest);Gn.WebRequest=Lh;function $_(){var e={root:window,reqClass:Lh,wsClass:WebSocket,localStorage,sessionStorage};return e}Gn.genAdapter=$_;(function(e){var t=H&&H.__createBinding||(Object.create?function(a,c,d,g){g===void 0&&(g=d),Object.defineProperty(a,g,{enumerable:!0,get:function(){return c[d]}})}:function(a,c,d,g){g===void 0&&(g=d),a[g]=c[d]}),r=H&&H.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),n=H&&H.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var d in a)d!=="default"&&Object.hasOwnProperty.call(a,d)&&t(c,a,d);return r(c,a),c};Object.defineProperty(e,"__esModule",{value:!0}),e.useDefaultAdapter=e.useAdapters=e.RUNTIME=void 0;var o=n(Gn),i=Y,s;(function(a){a.WEB="web",a.WX_MP="wx_mp"})(s=e.RUNTIME||(e.RUNTIME={}));function u(a){for(var c=i.isArray(a)?a:[a],d=0,g=c;d<g.length;d++){var v=g[d],T=v.isMatch,I=v.genAdapter,_=v.runtime;if(T())return{adapter:I(),runtime:_}}}e.useAdapters=u;function f(){return{adapter:o.genAdapter(),runtime:s.WEB}}e.useDefaultAdapter=f})(Oh);var ds={},k_=H&&H.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oo=H&&H.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},so=H&&H.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(ds,"__esModule",{value:!0});ds.CloudbaseCache=void 0;var j_=Nh,$t=Y,zt=Ki,ao=function(e){k_(t,e);function t(r){var n=e.call(this)||this;return n._root=r,r.tcbCacheObject||(r.tcbCacheObject={}),n}return t.prototype.setItem=function(r,n){this._root.tcbCacheObject[r]=n},t.prototype.getItem=function(r){return this._root.tcbCacheObject[r]},t.prototype.removeItem=function(r){delete this._root.tcbCacheObject[r]},t.prototype.clear=function(){delete this._root.tcbCacheObject},t}(j_.AbstractStorage);function Ys(e,t){switch(e){case"local":return t.localStorage?t.localStorage:($t.printWarn(zt.ERRORS.INVALID_PARAMS,"localStorage is not supported on current platform"),new ao(t.root));case"none":return new ao(t.root);case"session":return t.sessionStorage?t.sessionStorage:($t.printWarn(zt.ERRORS.INVALID_PARAMS,"sessionStorage is not supported on current platform"),new ao(t.root));default:return t.localStorage?t.localStorage:($t.printWarn(zt.ERRORS.INVALID_PARAMS,"localStorage is not supported on current platform"),new ao(t.root))}}var W_=function(){function e(t){this.keys={};var r=t.persistence,n=t.platformInfo,o=n===void 0?{}:n,i=t.keys,s=i===void 0?{}:i,u=t.alwaysLocalKeys,f=u===void 0?[]:u;this._platformInfo=o,this._alwaysLocalKeys=f,this._storage||(this._persistence=o.adapter.primaryStorage||r,this._storage=Ys(this._persistence,o.adapter),this.keys=s)}return Object.defineProperty(e.prototype,"mode",{get:function(){return this._storage.mode||"sync"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"persistence",{get:function(){return this._persistence},enumerable:!1,configurable:!0}),e.prototype.updatePersistence=function(t){if(this.mode==="async"){$t.printWarn(zt.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use updatePersistenceAsync insteed");return}if(t!==this._persistence){var r=this._persistence==="local";this._persistence=t;var n=Ys(t,this._platformInfo.adapter);for(var o in this.keys){var i=this.keys[o];if(!(r&&this._alwaysLocalKeys.includes(o))){var s=this._storage.getItem(i);!$t.isUndefined(s)&&!$t.isNull(s)&&(n.setItem(i,s),this._storage.removeItem(i))}}this._storage=n}},e.prototype.updatePersistenceAsync=function(t){return oo(this,void 0,void 0,function(){var r,n,o,i,s,u,f,a;return so(this,function(c){switch(c.label){case 0:if(t===this._persistence)return[2];r=this._persistence==="local",this._persistence=t,n=Ys(t,this._platformInfo.adapter),o=[];for(i in this.keys)o.push(i);s=0,c.label=1;case 1:return s<o.length?(u=o[s],f=this.keys[u],r&&this._alwaysLocalKeys.includes(u)?[3,4]:[4,this._storage.getItem(f)]):[3,5];case 2:return a=c.sent(),!$t.isUndefined(a)&&!$t.isNull(a)?(n.setItem(f,a),[4,this._storage.removeItem(f)]):[3,4];case 3:c.sent(),c.label=4;case 4:return s++,[3,1];case 5:return this._storage=n,[2]}})})},e.prototype.setStore=function(t,r,n){if(this.mode==="async"){$t.printWarn(zt.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use setStoreAsync insteed");return}if(!!this._storage)try{var o={version:n||"localCachev1",content:r};this._storage.setItem(t,JSON.stringify(o))}catch(i){throw new Error(JSON.stringify({code:zt.ERRORS.OPERATION_FAIL,msg:"["+zt.getSdkName()+"]["+zt.ERRORS.OPERATION_FAIL+"]setStore failed",info:i}))}},e.prototype.setStoreAsync=function(t,r,n){return oo(this,void 0,void 0,function(){var o;return so(this,function(i){switch(i.label){case 0:if(!this._storage)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),o={version:n||"localCachev1",content:r},[4,this._storage.setItem(t,JSON.stringify(o))];case 2:return i.sent(),[3,4];case 3:return i.sent(),[2];case 4:return[2]}})})},e.prototype.getStore=function(t,r){var n;if(this.mode==="async"){$t.printWarn(zt.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use getStoreAsync insteed");return}try{if(typeof process!="undefined"&&((n=process.env)===null||n===void 0?void 0:n.tcb_token))return{}.tcb_token;if(!this._storage)return""}catch{return""}r=r||"localCachev1";var o=this._storage.getItem(t);if(!o)return"";if(o.indexOf(r)>=0){var i=JSON.parse(o);return i.content}else return""},e.prototype.getStoreAsync=function(t,r){var n;return oo(this,void 0,void 0,function(){var o,i;return so(this,function(s){switch(s.label){case 0:try{if(typeof process!="undefined"&&((n=process.env)===null||n===void 0?void 0:n.tcb_token))return[2,{}.tcb_token];if(!this._storage)return[2,""]}catch{return[2,""]}return r=r||"localCachev1",[4,this._storage.getItem(t)];case 1:return o=s.sent(),o?o.indexOf(r)>=0?(i=JSON.parse(o),[2,i.content]):[2,""]:[2,""]}})})},e.prototype.removeStore=function(t){if(this.mode==="async"){$t.printWarn(zt.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use removeStoreAsync insteed");return}this._storage.removeItem(t)},e.prototype.removeStoreAsync=function(t){return oo(this,void 0,void 0,function(){return so(this,function(r){switch(r.label){case 0:return[4,this._storage.removeItem(t)];case 1:return r.sent(),[2]}})})},e}();ds.CloudbaseCache=W_;var st={},q_=H&&H.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H_=H&&H.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,u=i.length;s<u;s++,o++)n[o]=i[s];return n};Object.defineProperty(st,"__esModule",{value:!0});st.removeEventListener=st.activateEvent=st.addEventListener=st.CloudbaseEventEmitter=st.IErrorEvent=st.CloudbaseEvent=void 0;var nf=Y;function K_(e,t,r){r[e]=r[e]||[],r[e].push(t)}function G_(e,t,r){if(r!=null&&r[e]){var n=r[e].indexOf(t);n!==-1&&r[e].splice(n,1)}}var Du=function(){function e(t,r){this.data=r||null,this.name=t}return e}();st.CloudbaseEvent=Du;var Dh=function(e){q_(t,e);function t(r,n){var o=e.call(this,"error",{error:r,data:n})||this;return o.error=r,o}return t}(Du);st.IErrorEvent=Dh;var Uh=function(){function e(){this._listeners={}}return e.prototype.on=function(t,r){return K_(t,r,this._listeners),this},e.prototype.off=function(t,r){return G_(t,r,this._listeners),this},e.prototype.fire=function(t,r){if(nf.isInstanceOf(t,Dh))return console.error(t.error),this;var n=nf.isString(t)?new Du(t,r||{}):t,o=n.name;if(this._listens(o)){n.target=this;for(var i=this._listeners[o]?H_(this._listeners[o]):[],s=0,u=i;s<u.length;s++){var f=u[s];f.call(this,n)}}return this},e.prototype._listens=function(t){return this._listeners[t]&&this._listeners[t].length>0},e}();st.CloudbaseEventEmitter=Uh;var Uu=new Uh;function V_(e,t){Uu.on(e,t)}st.addEventListener=V_;function J_(e,t){t===void 0&&(t={}),Uu.fire(e,t)}st.activateEvent=J_;function Y_(e,t){Uu.off(e,t)}st.removeEventListener=Y_;var Mh={},ps={},z_=H&&H.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},X_=H&&H.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(ps,"__esModule",{value:!0});ps.catchErrorsDecorator=void 0;var of=Y,Q_=Ki,Ci=!1;typeof navigator!="undefined"&&navigator.userAgent&&(Ci=navigator.userAgent.indexOf("Firefox")!==-1);var Z_=Ci?/(\.js\/)?__decorate(\$\d+)?<@.*\d$/:/(\/\w+\.js\.)?__decorate(\$\d+)?\s*\(.*\)$/,$h=/https?\:\/\/.+\:\d*\/.*\.js\:\d+\:\d+/;function ev(e){var t=e.mode,r=t===void 0?"async":t,n=e.customInfo,o=n===void 0?{}:n,i=e.title,s=e.messages,u=s===void 0?[]:s;return function(f,a,c){if(!!Q_.IS_DEBUG_MODE){var d=o.className||f.constructor.name,g=o.methodName||a,v=c.value,T=tv(new Error);r==="sync"?c.value=function(){for(var I=[],_=0;_<arguments.length;_++)I[_]=arguments[_];var w=sf({err:new Error,className:d,methodName:g,sourceLink:T});try{return v.apply(this,I)}catch($){var P=$,R=$.message,N={title:i||d+"."+g+" failed",content:[{type:"error",body:$}]};if(R&&/^\{.*\}$/.test(R)){var D=JSON.parse(R);N.subtitle=R,D.code&&(w?(w.code=D.code,w.msg=D.msg):($.code=D.code,$.message=D.msg),P=w||$,N.content=u.map(function(q){return{type:"info",body:q}}))}throw of.printGroupLog(N),P}}:c.value=function(){for(var I=[],_=0;_<arguments.length;_++)I[_]=arguments[_];return z_(this,void 0,void 0,function(){var w,P,R,N,D,$;return X_(this,function(q){switch(q.label){case 0:w=sf({err:new Error,className:d,methodName:g,sourceLink:T}),q.label=1;case 1:return q.trys.push([1,3,,4]),[4,v.apply(this,I)];case 2:return[2,q.sent()];case 3:throw P=q.sent(),R=P,N=P.message,D={title:i||d+"."+g+" failed",content:[{type:"error",body:P}]},N&&/^\{.*\}$/.test(N)&&($=JSON.parse(N),D.subtitle=$,$.code&&(w?(w.code=$.code,w.message=$.msg):(P.code=$.code,P.message=$.msg),R=w||P,D.content=u.map(function(M){return{type:"info",body:M}}))),of.printGroupLog(D),R;case 4:return[2]}})})}}}}ps.catchErrorsDecorator=ev;function tv(e){var t="",r=e.stack.split(`
`),n=r.findIndex(function(i){return Z_.test(i)});if(n!==-1){var o=$h.exec(r[n+1]||"");t=o?o[0]:""}return t}function sf(e){var t=e.err,r=e.className,n=e.methodName,o=e.sourceLink;if(!o)return null;var i=t.stack.split(`
`),s=Ci?/^catchErrorsDecorator\/<\/descriptor.value@.*\d$/:new RegExp(r+"\\.descriptor.value\\s*\\[as\\s"+n+"\\]\\s*\\(.*\\)$"),u=Ci?/^catchErrorsDecorator\/<\/descriptor.value/:new RegExp(r+"\\.descriptor.value\\s*\\[as\\s"+n+"\\]"),f=i.findIndex(function(d){return s.test(d)}),a;if(f!==-1){var c=i.filter(function(d,g){return g>f});c.unshift(i[f].replace(u,r+"."+n).replace($h,o)),a=new Error,a.stack=(Ci?"@debugger":"Error")+`
`+c.join(`
`)}return a}(function(e){var t=H&&H.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=H&&H.__exportStar||function(n,o){for(var i in n)i!=="default"&&!o.hasOwnProperty(i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(ps,e)})(Mh);var rv=H&&H.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),nv=H&&H.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Qn=H&&H.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&rv(t,e,r);return nv(t,e),t};Object.defineProperty(dt,"__esModule",{value:!0});var Ct=dt.helpers=Ee=dt.utils=Mu=dt.events=kh=dt.cache=fn=dt.adapters=ge=dt.constants=void 0,iv=Qn(Ki),ge=dt.constants=iv,ov=Qn(Oh),fn=dt.adapters=ov,sv=Qn(ds),kh=dt.cache=sv,av=Qn(st),Mu=dt.events=av,uv=Qn(Y),Ee=dt.utils=uv,cv=Qn(Mh);Ct=dt.helpers=cv;var fv=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lo=globalThis&&globalThis.__assign||function(){return Lo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Lo.apply(this,arguments)},lv=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},hv=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};function dv(){if(typeof wx=="undefined"||typeof Page=="undefined"||!wx.getSystemInfoSync||!wx.getStorageSync||!wx.setStorageSync||!wx.connectSocket||!wx.request)return!1;try{if(!wx.getSystemInfoSync()||wx.getSystemInfoSync().AppPlatform==="qq")return!1}catch{return!1}return!0}function pv(){return typeof App=="undefined"&&typeof getApp=="undefined"&&!wx.onAppHide&&!wx.offAppHide&&!wx.onAppShow&&!wx.offAppShow}var gv=function(e){fv(t,e);function t(r){r===void 0&&(r={});var n=e.call(this)||this,o=r.timeout,i=r.timeoutMsg,s=r.restrictedMethods;return n._timeout=o||0,n._timeoutMsg=i||"\u8BF7\u6C42\u8D85\u65F6",n._restrictedMethods=s||["get","post","upload","download"],n}return t.prototype.post=function(r){var n=this;return new Promise(function(o,i){var s=r.url,u=r.data,f=r.headers,a=wx.request({url:Ja("https:",s),data:u,timeout:n._timeout,method:"POST",header:f,success:function(c){o(c)},fail:function(c){i(c)},complete:function(c){if(!(!c||!c.errMsg)&&!(!n._timeout||n._restrictedMethods.indexOf("post")===-1)){var d=c.errMsg;if(d==="request:fail timeout"){console.warn(n._timeoutMsg);try{a.abort()}catch{}}}}})})},t.prototype.upload=function(r){var n=this,o=this;return new Promise(function(i){return lv(n,void 0,void 0,function(){var s,u,f,a,c,d;return hv(this,function(g){return s=r.url,u=r.file,f=r.data,a=r.headers,c=r.onUploadProgress,d=wx.uploadFile({url:s,filePath:u,name:"file",formData:Lo({},f),header:a,timeout:this._timeout,success:function(v){var T={statusCode:v.statusCode,data:v.data||{}};v.statusCode===200&&f.success_action_status&&(T.statusCode=parseInt(f.success_action_status,10)),i(T)},fail:function(v){i(v)},complete:function(v){if(!(!v||!v.errMsg)&&!(!o._timeout||o._restrictedMethods.indexOf("upload")===-1)){var T=v.errMsg;if(T==="request:fail timeout"){console.warn(o._timeoutMsg);try{d.abort()}catch{}}}}}),c&&d.onProgressUpdate(function(v){c(v)}),[2]})})})},t.prototype.download=function(r){var n=this,o=this;return new Promise(function(i,s){var u=r.url,f=r.headers,a=wx.downloadFile({url:Ja("https:",u),header:f,timeout:n._timeout,success:function(c){c.statusCode===200&&c.tempFilePath?i({statusCode:200,tempFilePath:c.tempFilePath}):i(c)},fail:function(c){s(c)},complete:function(c){if(!(!c||!c.errMsg)&&!(!o._timeout||o._restrictedMethods.indexOf("download")===-1)){var d=c.errMsg;if(d==="request:fail timeout"){console.warn(o._timeoutMsg);try{a.abort()}catch{}}}}})})},t}(xh),yv={setItem:function(e,t){wx.setStorageSync(e,t)},getItem:function(e){return wx.getStorageSync(e)},removeItem:function(e){wx.removeStorageSync(e)},clear:function(){wx.clearStorageSync()}},mv=function(){function e(t,r){r===void 0&&(r={});var n=wx.connectSocket(Lo({url:t},r)),o={set onopen(i){n.onOpen(i)},set onmessage(i){n.onMessage(i)},set onclose(i){n.onClose(i)},set onerror(i){n.onError(i)},send:function(i){return n.send({data:i})},close:function(i,s){return n.close({code:i,reason:s})},get readyState(){return n.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3};return o}return e}();function _v(){var e={root:{},reqClass:gv,wsClass:mv,localStorage:yv,primaryStorage:Bo.local,getAppSign:function(){var t=wx.getAccountInfoSync();return pv()?t&&t.plugin?t.plugin.appId:"":t&&t.miniProgram?t.miniProgram.appId:""}};return e}var vv={genAdapter:_v,isMatch:dv,runtime:"wx_mp"},Ya=globalThis&&globalThis.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,u=i.length;s<u;s++,o++)n[o]=i[s];return n},Do=ge.ERRORS,af={};function Ev(e,t){var r=t.name,n=t.namespace,o=t.entity,i=t.injectEvents,s=t.IIFE,u=s===void 0?!1:s;if(af[r]||n&&e[n])throw new Error(JSON.stringify({code:Do.INVALID_OPERATION,msg:"Duplicate component "+r}));if(u){if(!o||typeof o!="function")throw new Error(JSON.stringify({code:Do.INVALID_PARAMS,msg:"IIFE component's entity must be a function"}));o.call(e)}if(af[r]=t,n?e.prototype[n]=o:jh(e.prototype,o),i){var f=i.bus,a=i.events;if(!f||!a||a.length===0)return;var c=e.prototype.fire||function(){};e.prototype.events||(e.prototype.events={});var d=e.prototype.events||{};d[r]?e.prototype.events[r].events=Ya(e.prototype.events[r].events,a):e.prototype.events[r]={bus:f,events:a},e.prototype.fire=function(g,v){c(g,v);for(var T in this.events){var I=this.events[T],_=I.bus,w=I.events;if(w.includes(g)){_.fire(g,v);break}}}}}function jh(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var r=t;return new Date(r.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)!t.hasOwnProperty(n)||(e[n]=jh(e[n],t[n]));return e}function wv(e,t){var r=t.entity,n=t.target;if(!e.prototype.hasOwnProperty(n))throw new Error(JSON.stringify({code:Do.INVALID_OPERATION,msg:"target:"+n+" is not exist"}));var o=e.prototype[n];if(typeof o!="function")throw new Error(JSON.stringify({code:Do.INVALID_OPERATION,msg:"target:"+n+" is not a function which is the only type supports hook"}));e.prototype[n]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return r.call.apply(r,Ya([this],i)),o.call.apply(o,Ya([this],i))}}var wt={},Pn=globalThis&&globalThis.__assign||function(){return Pn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Pn.apply(this,arguments)},bv="access_token",Av="access_token_expire",Sv="refresh_token",Tv="anonymous_uuid",Iv="login_type",Ov="user_info",uf=kh.CloudbaseCache,So={},za={};function cf(e){var t=e.env,r=e.persistence,n=e.platformInfo,o=bv+"_"+t,i=Av+"_"+t,s=Sv+"_"+t,u=Tv+"_"+t,f=Iv+"_"+t,a=Ov+"_"+t,c={accessTokenKey:o,accessTokenExpireKey:i,refreshTokenKey:s,anonymousUuidKey:u,loginTypeKey:f,userInfoKey:a};So[t]?So[t].updatePersistence(r):So[t]=new uf(Pn(Pn({},e),{keys:c,platformInfo:n,alwaysLocalKeys:["anonymousUuidKey"]})),za[t]=za[t]||new uf(Pn(Pn({},e),{keys:c,platformInfo:n,persistence:"local"}))}function Wh(e){return So[e]}function qh(e){return za[e]}var xv=ge.setSdkName,Nv=ge.setProtocol,Hh="",Kh="@cloudbase/js-sdk";function Rv(e){Hh=e}function Cv(){return Hh}function Pv(e){Kh=e,xv(e)}function Fv(){return Kh}var Bv="2020-01-10",Gh=typeof location!="undefined"&&location.protocol==="http:"?"http:":"https:",Vh="//tcb-api.tencentcloudapi.com/web";function Jh(e,t){Vh=e,t&&(Gh=t,Nv(t))}function Lv(e,t,r){var n=t?"//"+e+"."+t+".tcb-api.tencentcloudapi.com/web":"//"+e+".ap-shanghai.tcb-api.tencentcloudapi.com/web";Jh(n,r)}function Dv(){return{BASE_URL:Vh,PROTOCOL:Gh}}var Xa;(function(e){e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.CUSTOM="CUSTOM",e.NULL="NULL"})(Xa||(Xa={}));var ff={LOGIN_STATE_CHANGED:"loginStateChanged",LOGIN_STATE_EXPIRED:"loginStateExpire",LOGIN_TYPE_CHANGED:"loginTypeChanged",ANONYMOUS_CONVERTED:"anonymousConverted",ACCESS_TOKEN_REFRESHD:"refreshAccessToken"},Ot=globalThis&&globalThis.__assign||function(){return Ot=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ot.apply(this,arguments)},ar=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},ur=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},oi=ge.ERRORS,Uv=Ee.genSeqId,Mv=Ee.isFormData,$v=Ee.formatUrl,kv=Ee.createSign,jv=fn.RUNTIME,lf=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"];function zs(e,t,r){var n=e[t];e[t]=function(o){var i={},s={};r.forEach(function(f){var a=f.call(e,o),c=a.data,d=a.headers;Object.assign(i,c),Object.assign(s,d)});var u=o.data;return u&&function(){if(Mv(u)){for(var f in i)u.append(f,i[f]);return}o.data=Ot(Ot({},u),i)}(),o.headers=Ot(Ot({},o.headers||{}),s),n.call(e,o)}}function Xs(){var e=Uv();return{data:{seqId:e},headers:{"X-SDK-Version":"@cloudbase/js-sdk/"+Cv(),"x-seqid":e}}}var Wv=function(){function e(t){this._throwWhenRequestFail=!1,this.config=t,this._reqClass=new wt.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:"[@cloudbase/js-sdk] \u8BF7\u6C42\u5728"+this.config.timeout/1e3+"s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD",restrictedMethods:["post"]}),this._throwWhenRequestFail=t.throw||!1,this._cache=Wh(this.config.env),this._localCache=qh(this.config.env),zs(this._reqClass,"post",[Xs]),zs(this._reqClass,"upload",[Xs]),zs(this._reqClass,"download",[Xs])}return e.prototype.post=function(t){return ar(this,void 0,void 0,function(){var r;return ur(this,function(n){switch(n.label){case 0:return[4,this._reqClass.post(t)];case 1:return r=n.sent(),[2,r]}})})},e.prototype.upload=function(t){return ar(this,void 0,void 0,function(){var r;return ur(this,function(n){switch(n.label){case 0:return[4,this._reqClass.upload(t)];case 1:return r=n.sent(),[2,r]}})})},e.prototype.download=function(t){return ar(this,void 0,void 0,function(){var r;return ur(this,function(n){switch(n.label){case 0:return[4,this._reqClass.download(t)];case 1:return r=n.sent(),[2,r]}})})},e.prototype.refreshAccessToken=function(){return ar(this,void 0,void 0,function(){var t,r,n;return ur(this,function(o){switch(o.label){case 0:this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken()),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._refreshAccessTokenPromise];case 2:return t=o.sent(),[3,4];case 3:return n=o.sent(),r=n,[3,4];case 4:if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,r)throw r;return[2,t]}})})},e.prototype.getAccessToken=function(){return ar(this,void 0,void 0,function(){var t,r,n,o,i,s,u,f,a,c;return ur(this,function(d){switch(d.label){case 0:return t=this._cache.keys,r=t.accessTokenKey,n=t.accessTokenExpireKey,o=t.refreshTokenKey,[4,this._cache.getStoreAsync(o)];case 1:if(i=d.sent(),!i)throw new Error(JSON.stringify({code:oi.OPERATION_FAIL,msg:"refresh token is not exist, your local data might be messed up, please retry after clear localStorage or sessionStorage"}));return[4,this._cache.getStoreAsync(r)];case 2:return s=d.sent(),f=Number,[4,this._cache.getStoreAsync(n)];case 3:return u=f.apply(void 0,[d.sent()]),a=!0,c=this._shouldRefreshAccessTokenHook,c?[4,this._shouldRefreshAccessTokenHook(s,u)]:[3,5];case 4:c=!d.sent(),d.label=5;case 5:return c&&(a=!1),(!s||!u||u<Date.now())&&a?[4,this.refreshAccessToken()]:[3,7];case 6:return[2,d.sent()];case 7:return[2,{accessToken:s,accessTokenExpire:u}]}})})},e.prototype.request=function(t,r,n){return ar(this,void 0,void 0,function(){var o,i,s,u,f,a,c,d,d,g,v,T,I,_,w,P,R,N,D,$,q,M,G,Q,oe,he,te,Se;return ur(this,function(Re){switch(Re.label){case 0:return o="x-tcb-trace_"+this.config.env,i="application/x-www-form-urlencoded",s=Ot({action:t,dataVersion:Bv,env:this.config.env},r),lf.indexOf(t)!==-1?[3,3]:(u=this._cache.keys.refreshTokenKey,[4,this._cache.getStoreAsync(u)]);case 1:return f=Re.sent(),f?(a=s,[4,this.getAccessToken()]):[3,3];case 2:a.access_token=Re.sent().accessToken,Re.label=3;case 3:if(t==="storage.uploadFile"){c=new FormData;for(d in c)c.hasOwnProperty(d)&&c[d]!==void 0&&c.append(d,s[d]);i="multipart/form-data"}else{i="application/json;charset=UTF-8",c={};for(d in s)s[d]!==void 0&&(c[d]=s[d])}return g={headers:{"content-type":i}},n!=null&&n.onUploadProgress&&(g.onUploadProgress=n.onUploadProgress),this.config.region&&(g.headers["X-TCB-Region"]=this.config.region),v=this._localCache.getStore(o),v&&(g.headers["X-TCB-Trace"]=v),wt.runtime!==jv.WEB&&(T=this.config,I=T.appSign,_=T.appSecret,w=Date.now(),P=_.appAccessKey,R=_.appAccessKeyId,N=kv({data:{},timestamp:w,appAccessKeyId:R,appSign:I},P),g.headers["X-TCB-App-Source"]="timestamp="+w+";appAccessKeyId="+R+";appSign="+I+";sign="+N),D=r.parse,$=r.inQuery,q=r.search,M={env:this.config.env},D&&(M.parse=!0),$&&(M=Ot(Ot({},$),M)),G=Dv(),Q=G.BASE_URL,oe=G.PROTOCOL,he=$v(oe,Q,M),q&&(he+=q),[4,this.post(Ot({url:he,data:c},g))];case 4:if(te=Re.sent(),Se=te.header&&te.header["x-tcb-trace"],Se&&this._localCache.setStore(o,Se),Number(te.status)!==200&&Number(te.statusCode)!==200||!te.data)throw new Error("network request error");return[2,te]}})})},e.prototype.send=function(t,r){return r===void 0&&(r={}),ar(this,void 0,void 0,function(){var n;return ur(this,function(o){switch(o.label){case 0:return[4,this.request(t,r,{onUploadProgress:r.onUploadProgress})];case 1:return n=o.sent(),n.data.code==="ACCESS_TOKEN_EXPIRED"&&lf.indexOf(t)===-1?[4,this.refreshAccessToken()]:[3,4];case 2:return o.sent(),[4,this.request(t,r,{onUploadProgress:r.onUploadProgress})];case 3:n=o.sent(),o.label=4;case 4:if(n.data.code&&this._throwWhenRequestFail)throw new Error(JSON.stringify({code:oi.OPERATION_FAIL,msg:"["+n.data.code+"] "+n.data.message}));return[2,n.data]}})})},e.prototype._refreshAccessToken=function(t){return t===void 0&&(t=1),ar(this,void 0,void 0,function(){var r,n,o,i,s,u,f,a,c,d,g,v,T,I;return ur(this,function(_){switch(_.label){case 0:return r=this._cache.keys,n=r.accessTokenKey,o=r.accessTokenExpireKey,i=r.refreshTokenKey,s=r.loginTypeKey,u=r.anonymousUuidKey,[4,this._cache.removeStoreAsync(n)];case 1:return _.sent(),[4,this._cache.removeStoreAsync(o)];case 2:return _.sent(),[4,this._cache.getStoreAsync(i)];case 3:if(f=_.sent(),!f)throw new Error(JSON.stringify({code:oi.INVALID_OPERATION,msg:"not login"}));return a={refresh_token:f},[4,this.request("auth.fetchAccessTokenWithRefreshToken",a)];case 4:return c=_.sent(),c.data.code?(d=c.data.code,d==="SIGN_PARAM_INVALID"||d==="REFRESH_TOKEN_EXPIRED"||d==="INVALID_REFRESH_TOKEN"?[4,this._cache.getStoreAsync(s)]:[3,11]):[3,12];case 5:return g=_.sent()===Xa.ANONYMOUS,g&&d==="INVALID_REFRESH_TOKEN"?[4,this._cache.getStoreAsync(u)]:[3,9];case 6:return v=_.sent(),[4,this._cache.getStoreAsync(i)];case 7:return T=_.sent(),[4,this.send("auth.signInAnonymously",{anonymous_uuid:v,refresh_token:T})];case 8:if(I=_.sent(),this._setRefreshToken(I.refresh_token),t>=1)return[2,this._refreshAccessToken(--t)];throw new Error(JSON.stringify({code:oi.OPERATION_FAIL,message:"\u91CD\u8BD5\u83B7\u53D6 refresh token \u5931\u8D25"}));case 9:return Tt.fire(ff.LOGIN_STATE_EXPIRED),[4,this._cache.removeStoreAsync(i)];case 10:_.sent(),_.label=11;case 11:throw new Error(JSON.stringify({code:oi.NETWORK_ERROR,msg:"refresh access_token failed\uFF1A"+c.data.code}));case 12:return c.data.access_token?(Tt.fire(ff.ACCESS_TOKEN_REFRESHD),[4,this._cache.setStoreAsync(n,c.data.access_token)]):[3,15];case 13:return _.sent(),[4,this._cache.setStoreAsync(o,c.data.access_token_expire+Date.now())];case 14:return _.sent(),[2,{accessToken:c.data.access_token,accessTokenExpire:c.data.access_token_expire}];case 15:return c.data.refresh_token?[4,this._cache.removeStoreAsync(i)]:[3,19];case 16:return _.sent(),[4,this._cache.setStoreAsync(i,c.data.refresh_token)];case 17:return _.sent(),[4,this._refreshAccessToken()];case 18:_.sent(),_.label=19;case 19:return[2]}})})},e.prototype._setRefreshToken=function(t){return ar(this,void 0,void 0,function(){var r,n,o,i;return ur(this,function(s){switch(s.label){case 0:return r=this._cache.keys,n=r.accessTokenKey,o=r.accessTokenExpireKey,i=r.refreshTokenKey,[4,this._cache.removeStoreAsync(n)];case 1:return s.sent(),[4,this._cache.removeStoreAsync(o)];case 2:return s.sent(),[4,this._cache.setStoreAsync(i,t)];case 3:return s.sent(),[2]}})})},e}(),Yh={};function qv(e){Yh[e.env]=new Wv(Ot(Ot({},e),{throw:!0}))}function Hv(e){return Yh[e]}var Uo=globalThis&&globalThis.__assign||function(){return Uo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Uo.apply(this,arguments)},hf=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},wn=globalThis&&globalThis.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},Kv=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},Gv=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Vv=fn.useAdapters,Jv=fn.useDefaultAdapter,Yv=fn.RUNTIME,Hr=ge.ERRORS,df=ge.COMMUNITY_SITE_URL,pf=Ee.printWarn,gf=Ct.catchErrorsDecorator,zv={timeout:15e3,persistence:"local"},yf=1e3*60*10,mf=100,_f={},Xv=function(){function e(t){this._config=t||this._config,this.authInstance=null}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"platform",{get:function(){return wt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cache",{get:function(){return Wh(this._config.env)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localCache",{get:function(){return qh(this._config.env)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"request",{get:function(){return Hv(this._config.env)},enumerable:!1,configurable:!0}),e.prototype.init=function(t){if(!t.env)throw new Error(JSON.stringify({code:Hr.INVALID_PARAMS,msg:"env must not be specified"}));if(wt.adapter||this._useDefaultAdapter(),this.requestClient=new wt.adapter.reqClass({timeout:t.timeout||5e3,timeoutMsg:"["+Fv()+"][REQUEST TIMEOUT] request had been abort since didn't finished within"+t.timeout/1e3+"s"}),wt.runtime!==Yv.WEB){if(!t.appSecret)throw new Error(JSON.stringify({code:Hr.INVALID_PARAMS,msg:"invalid appSecret"}));var r=wt.adapter.getAppSign?wt.adapter.getAppSign():"";if(t.appSign&&r&&t.appSign!==r)throw new Error(JSON.stringify({code:Hr.INVALID_PARAMS,msg:"invalid appSign"}));if(r&&(t.appSign=r),!t.appSign)throw new Error(JSON.stringify({code:Hr.INVALID_PARAMS,msg:"invalid appSign"}))}this._config=Uo(Uo({},zv),t),this._config.timeout=this._formatTimeout(this._config.timeout);var n=this._config,o=n.env,i=n.persistence,s=n.debug,u=n.timeout,f=n.appSecret,a=n.appSign;cf({env:o,persistence:i,debug:s,platformInfo:this.platform}),qv({env:o,region:t.region||"",timeout:u,appSecret:f,appSign:a}),t.region&&Lv(o,t.region||"");var c=new e(this._config);return c.requestClient=this.requestClient,c},e.prototype.updateConfig=function(t){var r=t.persistence,n=t.debug;this._config.persistence=r,this._config.debug=n,cf({env:this._config.env,persistence:r,debug:n,platformInfo:this.platform})},e.prototype.registerExtension=function(t){_f[t.name]=t},e.prototype.invokeExtension=function(t,r){return Kv(this,void 0,void 0,function(){var n;return Gv(this,function(o){switch(o.label){case 0:if(n=_f[t],!n)throw new Error(JSON.stringify({code:Hr.INVALID_PARAMS,msg:"extension:"+t+" must be registered before invoke"}));return[4,n.invoke(r,this)];case 1:return[2,o.sent()]}})})},e.prototype.useAdapters=function(t){var r=Vv(t)||{},n=r.adapter,o=r.runtime;n&&(wt.adapter=n),o&&(wt.runtime=o)},e.prototype.registerHook=function(t){wv(e,t)},e.prototype.registerComponent=function(t){Ev(e,t)},e.prototype.registerVersion=function(t){Rv(t)},e.prototype.registerSdkName=function(t){Pv(t)},e.prototype.registerEndPoint=function(t,r){Jh(t,r)},e.prototype._useDefaultAdapter=function(){var t=Jv(),r=t.adapter,n=t.runtime;wt.adapter=r,wt.runtime=n},e.prototype._formatTimeout=function(t){switch(!0){case t>yf:return pf(Hr.INVALID_PARAMS,"timeout is greater than maximum value[10min]"),yf;case t<mf:return pf(Hr.INVALID_PARAMS,"timeout is less than maximum value[100ms]"),mf;default:return t}},hf([gf({mode:"sync",title:"Cloudbase \u521D\u59CB\u5316\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 cloudbase.init() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5982\u679C\u662F\u975E\u6D4F\u89C8\u5668\u73AF\u5883\uFF0C\u662F\u5426\u914D\u7F6E\u4E86\u5B89\u5168\u5E94\u7528\u6765\u6E90\uFF08https://docs.cloudbase.net/api-reference/webv2/adapter.html#jie-ru-liu-cheng\uFF09","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+df]}),wn("design:type",Function),wn("design:paramtypes",[Object]),wn("design:returntype",e)],e.prototype,"init",null),hf([gf({title:"\u8C03\u7528\u6269\u5C55\u80FD\u529B\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 invokeExtension() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u88AB\u8C03\u7528\u7684\u6269\u5C55\u80FD\u529B\u662F\u5426\u5DF2\u7ECF\u5B89\u88C5\u5E76\u901A\u8FC7 registerExtension() \u6CE8\u518C","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+df]}),wn("design:type",Function),wn("design:paramtypes",[String,Object]),wn("design:returntype",Promise)],e.prototype,"invokeExtension",null),e}(),Tt=new Xv;Tt.useAdapters(vv);var si=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},ai=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Zn=function(){function e(t){this._config=t,this._cache=t.cache,this._request=t.request}return e.prototype.checkLocalLoginState=function(){return si(this,void 0,void 0,function(){var t,r,n,o,i,s;return ai(this,function(u){switch(u.label){case 0:return t=this._cache.keys,r=t.accessTokenKey,n=t.accessTokenExpireKey,[4,this._cache.getStoreAsync(r)];case 1:return o=u.sent(),[4,this._cache.getStoreAsync(n)];case 2:return i=u.sent(),o?i&&i>Date.now()?(s=new nr({envId:this._config.env,cache:this._cache,request:this._request}),[4,s.checkLocalStateAsync()]):[3,4]:[3,7];case 3:return u.sent(),[2,s];case 4:return[4,this._cache.removeStoreAsync(r)];case 5:return u.sent(),[4,this._cache.removeStoreAsync(n)];case 6:u.sent(),u.label=7;case 7:return[2]}})})},e.prototype.setRefreshToken=function(t){return si(this,void 0,void 0,function(){var r,n,o,i;return ai(this,function(s){switch(s.label){case 0:return r=this._cache.keys,n=r.accessTokenKey,o=r.accessTokenExpireKey,i=r.refreshTokenKey,[4,this._cache.removeStoreAsync(n)];case 1:return s.sent(),[4,this._cache.removeStoreAsync(o)];case 2:return s.sent(),[4,this._cache.setStoreAsync(i,t)];case 3:return s.sent(),[2]}})})},e.prototype.setAccessToken=function(t,r){return si(this,void 0,void 0,function(){var n,o,i;return ai(this,function(s){switch(s.label){case 0:return n=this._cache.keys,o=n.accessTokenKey,i=n.accessTokenExpireKey,[4,this._cache.setStoreAsync(o,t)];case 1:return s.sent(),[4,this._cache.setStoreAsync(i,r)];case 2:return s.sent(),[2]}})})},e.prototype.refreshUserInfo=function(){return si(this,void 0,void 0,function(){var t,r;return ai(this,function(n){switch(n.label){case 0:return t="auth.getUserInfo",[4,this._request.send(t,{})];case 1:return r=n.sent().data,[4,this.setLocalUserInfo(r)];case 2:return n.sent(),[2,r]}})})},e.prototype.setLocalUserInfo=function(t){return si(this,void 0,void 0,function(){var r;return ai(this,function(n){switch(n.label){case 0:return r=this._cache.keys.userInfoKey,[4,this._cache.setStoreAsync(r,t)];case 1:return n.sent(),[2]}})})},e}(),Ne;(function(e){e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.WECHAT_PUBLIC="WECHAT-PUBLIC",e.WECHAT_OPEN="WECHAT-OPEN",e.CUSTOM="CUSTOM",e.EMAIL="EMAIL",e.USERNAME="USERNAME",e.NULL="NULL",e.PHONE="PHONE"})(Ne||(Ne={}));var Qv=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qs=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},cr=globalThis&&globalThis.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},bn=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},An=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Zs=ge.getSdkName,uo=ge.ERRORS,ea=ge.COMMUNITY_SITE_URL,vf=fn.RUNTIME,Zv=Ee.getQuery,eE=Ee.getHash,Ef=Ee.removeParam,tE=Ee.printWarn,ta=Ct.catchErrorsDecorator,rE=function(e){Qv(t,e);function t(r,n,o,i){var s=e.call(this,r)||this;return s._runtime=r.runtime,s._appid=n,s._scope=o,s._state=i||"weixin",s}return t.prototype.signIn=function(){return bn(this,void 0,void 0,function(){return An(this,function(r){return[2,tE(uo.OPERATION_FAIL,"API signIn has been deprecated, please use signInWithRedirect insteed")]})})},t.prototype.signInWithRedirect=function(){return bn(this,void 0,void 0,function(){return An(this,function(r){return[2,this._redirect()]})})},t.prototype.getRedirectResult=function(r){return bn(this,void 0,void 0,function(){var n;return An(this,function(o){return n=wf(),n?[2,this._signInWithCode(n,r)]:[2,null]})})},t.prototype.getLinkRedirectResult=function(r){return r===void 0&&(r={}),bn(this,void 0,void 0,function(){var n,o,i,s,u,f;return An(this,function(a){return n=r.withUnionId,o=n===void 0?!1:n,i=wf(),i?(s=this._appid,u=function(c){switch(c){case"snsapi_login":return"WECHAT-OPEN";default:return"WECHAT-PUBLIC"}}(this._scope),f=this._runtime===vf.WX_MP?"1":"0",[2,this._request.send("auth.linkWithWeixinCode",{payload:{appid:s,loginType:u,code:i,hybridMiniapp:f,withUnionId:o}})]):[2,null]})})},t.prototype._redirect=function(){var r=Ef("code",location.href);r=Ef("state",r),r=encodeURIComponent(r);var n="//open.weixin.qq.com/connect/oauth2/authorize";this._scope==="snsapi_login"&&(n="//open.weixin.qq.com/connect/qrconnect");try{location.href=n+"?appid="+this._appid+"&redirect_uri="+r+"&response_type=code&scope="+this._scope+"&state="+this._state+"#wechat_redirect"}catch(o){throw new Error("["+Zs()+"]["+uo.UNKOWN_ERROR+"]"+o)}},t.prototype._signInWithCode=function(r,n){return bn(this,void 0,void 0,function(){var o,i,s,u,f,a,c,d;return An(this,function(g){switch(g.label){case 0:return o=this._cache.keys,i=o.accessTokenKey,s=o.accessTokenExpireKey,u=o.refreshTokenKey,f=function(v){switch(v){case"snsapi_login":return"WECHAT-OPEN";default:return"WECHAT-PUBLIC"}}(this._scope),[4,this._getRefreshTokenByWXCode(this._appid,f,r,n)];case 1:return a=g.sent(),c=a.refreshToken,[4,this._cache.setStoreAsync(u,c)];case 2:return g.sent(),a.accessToken?[4,this._cache.setStoreAsync(i,a.accessToken)]:[3,4];case 3:g.sent(),g.label=4;case 4:return a.accessTokenExpire?[4,this._cache.setStoreAsync(s,String(a.accessTokenExpire+Date.now()))]:[3,6];case 5:g.sent(),g.label=6;case 6:return Ae.fire(ye.LOGIN_STATE_CHANGED),Ae.fire(ye.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:Ne.WECHAT,persistence:this._config.persistence}),[4,this.refreshUserInfo()];case 7:return g.sent(),d=new nr({envId:this._config.env,cache:this._cache,request:this._request}),[4,d.checkLocalStateAsync()];case 8:return g.sent(),[2,d]}})})},t.prototype._getRefreshTokenByWXCode=function(r,n,o,i){return i===void 0&&(i={}),bn(this,void 0,void 0,function(){var s,u,f,a,c,d,g;return An(this,function(v){return s=i.withUnionId,u=s===void 0?!1:s,f=i.createUser,a=f===void 0?!0:f,c=this._scope==="snsapi_base"?!1:i.syncUserInfo||!1,d="auth.signIn",g=this._runtime===vf.WX_MP?"1":"0",[2,this._request.send(d,{appid:r,loginType:n,hybridMiniapp:g,syncUserInfo:c,loginCredential:o,withUnionId:u,createUser:a}).then(function(T){if(T.code)throw new Error("["+Zs()+"]["+uo.OPERATION_FAIL+"] failed login via wechat: "+T.code);if(T.refresh_token)return{refreshToken:T.refresh_token,accessToken:T.access_token,accessTokenExpire:T.access_token_expire};throw new Error("["+Zs()+"]["+uo.OPERATION_FAIL+"] action:getJwt not return refreshToken")})]})})},Qs([ta({title:"\u8DF3\u8F6C\u5FAE\u4FE1\u516C\u4F17\u53F7\u6388\u6743\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().weixinAuthProvider().signInWithRedirect() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+ea]}),cr("design:type",Function),cr("design:paramtypes",[]),cr("design:returntype",Promise)],t.prototype,"signInWithRedirect",null),Qs([ta({title:"\u5FAE\u4FE1\u516C\u4F17\u53F7\u767B\u5F55\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().weixinAuthProvider().getRedirectResult() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u5FAE\u4FE1\u516C\u4F17\u53F7\u767B\u5F55\u6388\u6743","  3 - \u5FAE\u4FE1\u516C\u4F17\u53F7\u7684 AppId \u4E0E AppSecret \u914D\u7F6E\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+ea]}),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",Promise)],t.prototype,"getRedirectResult",null),Qs([ta({title:"\u83B7\u53D6\u5FAE\u4FE1\u91CD\u5B9A\u5411\u7ED1\u5B9A\u7ED3\u679C",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().weixinAuthProvider().getLinkRedirectResult() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u5FAE\u4FE1\u516C\u4F17\u53F7\u767B\u5F55\u6388\u6743","  3 - \u5FAE\u4FE1\u516C\u4F17\u53F7\u7684 AppId \u4E0E AppSecret \u914D\u7F6E\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+ea]}),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",Promise)],t.prototype,"getLinkRedirectResult",null),t}(Zn);function wf(){return Zv("code")||eE("code")}var nE=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iE=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},ra=globalThis&&globalThis.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},ui=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},ci=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},na=ge.ERRORS,oE=ge.COMMUNITY_SITE_URL,bf=Ee.throwError,sE=Ee.isString,aE=Mu.addEventListener,uE=Ct.catchErrorsDecorator,cE=function(e){nE(t,e);function t(r){var n=e.call(this,r)||this;return n._onConverted=n._onConverted.bind(n),aE(ye.ANONYMOUS_CONVERTED,n._onConverted),n}return t.prototype.signIn=function(){return ui(this,void 0,void 0,function(){var r,n,o,i,s,u,f;return ci(this,function(a){switch(a.label){case 0:return[4,this._cache.updatePersistenceAsync("local")];case 1:return a.sent(),r=this._cache.keys,n=r.anonymousUuidKey,o=r.refreshTokenKey,[4,this._cache.getStoreAsync(n)];case 2:return i=a.sent(),[4,this._cache.getStoreAsync(o)];case 3:return s=a.sent(),[4,this._request.send("auth.signInAnonymously",{anonymous_uuid:i,refresh_token:s})];case 4:return u=a.sent(),u.uuid&&u.refresh_token?[4,this._setAnonymousUUID(u.uuid)]:[3,10];case 5:return a.sent(),[4,this.setRefreshToken(u.refresh_token)];case 6:return a.sent(),[4,this._request.refreshAccessToken()];case 7:return a.sent(),Ae.fire(ye.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:Ne.ANONYMOUS,persistence:"local"}),Ae.fire(ye.LOGIN_STATE_CHANGED),f=new nr({envId:this._config.env,cache:this._cache,request:this._request}),[4,f.checkLocalStateAsync()];case 8:return a.sent(),[4,f.user.refresh()];case 9:return a.sent(),[2,f];case 10:throw new Error(JSON.stringify({code:na.OPERATION_FAIL,msg:JSON.stringify(u)||"anonymous signIn failed"}))}})})},t.prototype.linkAndRetrieveDataWithTicket=function(r){return ui(this,void 0,void 0,function(){var n,o,i,s,u,f,a;return ci(this,function(c){switch(c.label){case 0:return sE(r)||bf(na.INVALID_PARAMS,"ticket must be a string"),n=this._cache.keys,o=n.anonymousUuidKey,i=n.refreshTokenKey,[4,this._cache.getStoreAsync(o)];case 1:return s=c.sent(),[4,this._cache.getStoreAsync(i)];case 2:return u=c.sent(),[4,this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:s,refresh_token:u,ticket:r})];case 3:return f=c.sent(),f.refresh_token?[4,this._clearAnonymousUUID()]:[3,8];case 4:return c.sent(),[4,this.setRefreshToken(f.refresh_token)];case 5:return c.sent(),[4,this._request.refreshAccessToken()];case 6:return c.sent(),Ae.fire(ye.ANONYMOUS_CONVERTED,{env:this._config.env}),Ae.fire(ye.LOGIN_TYPE_CHANGED,{loginType:Ne.CUSTOM,persistence:"local"}),a=new nr({envId:this._config.env,cache:this._cache,request:this._request}),[4,a.checkLocalStateAsync()];case 7:return c.sent(),[2,a];case 8:bf(na.OPERATION_FAIL,JSON.stringify(f)||"linkAndRetrieveDataWithTicket failed"),c.label=9;case 9:return[2]}})})},t.prototype._setAnonymousUUID=function(r){return ui(this,void 0,void 0,function(){var n,o,i;return ci(this,function(s){switch(s.label){case 0:return n=this._cache.keys,o=n.anonymousUuidKey,i=n.loginTypeKey,[4,this._cache.removeStoreAsync(o)];case 1:return s.sent(),[4,this._cache.setStoreAsync(o,r)];case 2:return s.sent(),[4,this._cache.setStoreAsync(i,Ne.ANONYMOUS)];case 3:return s.sent(),[2]}})})},t.prototype._clearAnonymousUUID=function(){return ui(this,void 0,void 0,function(){return ci(this,function(r){switch(r.label){case 0:return[4,this._cache.removeStoreAsync(this._cache.keys.anonymousUuidKey)];case 1:return r.sent(),[2]}})})},t.prototype._onConverted=function(r){return ui(this,void 0,void 0,function(){var n;return ci(this,function(o){switch(o.label){case 0:return n=r.data.env,n!==this._config.env?[2]:[4,this._cache.updatePersistenceAsync(this._config.persistence)];case 1:return o.sent(),[2]}})})},iE([uE({title:"\u533F\u540D\u767B\u5F55\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u542F\u4E86\u533F\u540D\u767B\u5F55","  2 - \u8C03\u7528 auth().anonymouseProvider().signIn() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+oE]}),ra("design:type",Function),ra("design:paramtypes",[]),ra("design:returntype",Promise)],t.prototype,"signIn",null),t}(Zn),fE=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lE=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},ia=globalThis&&globalThis.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},hE=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},dE=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Af=ge.ERRORS,pE=ge.COMMUNITY_SITE_URL,gE=Ee.isString,yE=Ct.catchErrorsDecorator,mE=function(e){fE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.signIn=function(r){return hE(this,void 0,void 0,function(){var n,o,i,s,u,f,a;return dE(this,function(c){switch(c.label){case 0:if(!gE(r))throw new Error(JSON.stringify({code:Af.INVALID_PARAMS,msg:"ticket must be a string"}));return n=this._cache.keys.refreshTokenKey,s=(i=this._request).send,u=["auth.signInWithTicket"],f={ticket:r},[4,this._cache.getStoreAsync(n)];case 1:return[4,s.apply(i,u.concat([(f.refresh_token=c.sent()||"",f)]))];case 2:return o=c.sent(),o.refresh_token?[4,this.setRefreshToken(o.refresh_token)]:[3,7];case 3:return c.sent(),[4,this._request.refreshAccessToken()];case 4:return c.sent(),Ae.fire(ye.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:Ne.CUSTOM,persistence:this._config.persistence}),Ae.fire(ye.LOGIN_STATE_CHANGED),[4,this.refreshUserInfo()];case 5:return c.sent(),a=new nr({envId:this._config.env,cache:this._cache,request:this._request}),[4,a.checkLocalStateAsync()];case 6:return c.sent(),[2,a];case 7:throw new Error(JSON.stringify({code:Af.OPERATION_FAIL,msg:"custom signIn failed"}))}})})},lE([yE({title:"\u81EA\u5B9A\u4E49\u767B\u5F55\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u542F\u4E86\u81EA\u5B9A\u4E49\u767B\u5F55","  2 - \u8C03\u7528 auth().customAuthProvider().signIn() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  3 - ticket \u662F\u5426\u5F52\u5C5E\u4E8E\u5F53\u524D\u73AF\u5883","  4 - \u521B\u5EFA ticket \u7684\u81EA\u5B9A\u4E49\u767B\u5F55\u79C1\u94A5\u662F\u5426\u8FC7\u671F","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+pE]}),ia("design:type",Function),ia("design:paramtypes",[String]),ia("design:returntype",Promise)],t.prototype,"signIn",null),t}(Zn),_E=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fi=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},Ye=globalThis&&globalThis.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},li=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},hi=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},oa=Ee.throwError,vE=Ee.isString,sa=ge.ERRORS,di=ge.COMMUNITY_SITE_URL,pi=Ct.catchErrorsDecorator,EE=function(e){_E(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.signIn=function(r,n){return li(this,void 0,void 0,function(){var o,i,s,u,f;return hi(this,function(a){switch(a.label){case 0:return vE(r)||oa(sa.INVALID_PARAMS,"email must be a string"),o=this._cache.keys.refreshTokenKey,[4,this._request.send("auth.signIn",{loginType:"EMAIL",email:r,password:n,refresh_token:this._cache.getStore(o)||""})];case 1:return i=a.sent(),s=i.refresh_token,u=i.access_token,f=i.access_token_expire,s?[4,this.setRefreshToken(s)]:[3,8];case 2:return a.sent(),u&&f?[4,this.setAccessToken(u,f)]:[3,4];case 3:return a.sent(),[3,6];case 4:return[4,this._request.refreshAccessToken()];case 5:a.sent(),a.label=6;case 6:return[4,this.refreshUserInfo()];case 7:return a.sent(),Ae.fire(ye.LOGIN_STATE_CHANGED),Ae.fire(ye.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:Ne.EMAIL,persistence:this._config.persistence}),[2,new nr({envId:this._config.env,cache:this._cache,request:this._request})];case 8:i.code?oa(sa.OPERATION_FAIL,"Email login fail["+i.code+"] "+i.message):oa(sa.OPERATION_FAIL,"Email login fail"),a.label=9;case 9:return[2]}})})},t.prototype.signUp=function(r,n){return li(this,void 0,void 0,function(){return hi(this,function(o){return[2,this._request.send("auth.signUpWithEmailAndPassword",{email:r,password:n})]})})},t.prototype.resetPassword=function(r){return li(this,void 0,void 0,function(){return hi(this,function(n){return[2,this._request.send("auth.sendPasswordResetEmail",{email:r})]})})},t.prototype.resetPasswordWithToken=function(r,n){return li(this,void 0,void 0,function(){return hi(this,function(o){return[2,this._request.send("auth.resetPasswordWithToken",{token:r,newPassword:n})]})})},t.prototype.activate=function(r){return li(this,void 0,void 0,function(){return hi(this,function(n){return[2,this._request.send("auth.activateEndUserMail",{token:r})]})})},fi([pi({title:"\u90AE\u7BB1\u5BC6\u7801\u767B\u5F55\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().emailAuthProvider() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u90AE\u7BB1\u767B\u5F55","  3 - \u90AE\u7BB1\u5730\u5740\u4E0E\u5BC6\u7801\u662F\u5426\u5339\u914D","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+di]}),Ye("design:type",Function),Ye("design:paramtypes",[String,String]),Ye("design:returntype",Promise)],t.prototype,"signIn",null),fi([pi({title:"\u90AE\u7BB1\u6CE8\u518C\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().signUpWithEmailAndPassword() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u90AE\u7BB1\u767B\u5F55","  3 - \u6B64\u90AE\u7BB1\u5730\u5740\u662F\u5426\u5DF2\u7ECF\u88AB\u5176\u4ED6\u7528\u6237\u5360\u7528","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+di]}),Ye("design:type",Function),Ye("design:paramtypes",[String,String]),Ye("design:returntype",Promise)],t.prototype,"signUp",null),fi([pi({title:"\u91CD\u7F6E\u5BC6\u7801\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().sendPasswordResetEmail() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u90AE\u7BB1\u767B\u5F55","  3 - \u6B64\u90AE\u7BB1\u5730\u5740\u662F\u5426\u5DF2\u7ECF\u4E0E\u5F53\u524D\u7528\u6237\u7ED1\u5B9A","  4 - \u6B64\u90AE\u7BB1\u5730\u5740\u662F\u5426\u5DF2\u7ECF\u88AB\u5176\u4ED6\u7528\u6237\u5360\u7528","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+di]}),Ye("design:type",Function),Ye("design:paramtypes",[String]),Ye("design:returntype",Promise)],t.prototype,"resetPassword",null),fi([pi({title:"\u91CD\u7F6E\u5BC6\u7801\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u90AE\u7BB1\u767B\u5F55","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+di]}),Ye("design:type",Function),Ye("design:paramtypes",[String,String]),Ye("design:returntype",Promise)],t.prototype,"resetPasswordWithToken",null),fi([pi({title:"\u90AE\u7BB1\u6FC0\u6D3B\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u90AE\u7BB1\u767B\u5F55","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+di]}),Ye("design:type",Function),Ye("design:paramtypes",[String]),Ye("design:returntype",Promise)],t.prototype,"activate",null),t}(Zn),wE=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bE=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},aa=globalThis&&globalThis.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},AE=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},SE=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},TE=Ee.printWarn,co=ge.ERRORS,IE=ge.COMMUNITY_SITE_URL,OE=Ct.catchErrorsDecorator,xE=function(e){wE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.signIn=function(r,n){return AE(this,void 0,void 0,function(){var o,i,s,u,f,a,c,d,g;return SE(this,function(v){switch(v.label){case 0:if(typeof r!="string")throw new Error(JSON.stringify({code:co.INVALID_PARAMS,msg:"username must be a string"}));return typeof n!="string"&&(n="",TE(co.INVALID_PARAMS,"password is empty")),o=this._cache.keys.refreshTokenKey,u=(s=this._request).send,f=["auth.signIn"],a={loginType:Ne.USERNAME,username:r,password:n},[4,this._cache.getStoreAsync(o)];case 1:return[4,u.apply(s,f.concat([(a.refresh_token=v.sent()||"",a)]))];case 2:return i=v.sent(),c=i.refresh_token,d=i.access_token_expire,g=i.access_token,c?[4,this.setRefreshToken(c)]:[3,9];case 3:return v.sent(),g&&d?[4,this.setAccessToken(g,d)]:[3,5];case 4:return v.sent(),[3,7];case 5:return[4,this._request.refreshAccessToken()];case 6:v.sent(),v.label=7;case 7:return[4,this.refreshUserInfo()];case 8:return v.sent(),Ae.fire(ye.LOGIN_STATE_CHANGED),Ae.fire(ye.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:Ne.USERNAME,persistence:this._config.persistence}),[2,new nr({envId:this._config.env,cache:this._cache,request:this._request})];case 9:throw i.code?new Error(JSON.stringify({code:co.OPERATION_FAIL,msg:"login by username failed:["+i.code+"] "+i.message})):new Error(JSON.stringify({code:co.OPERATION_FAIL,msg:"login by username failed"}));case 10:return[2]}})})},bE([OE({title:"\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().signInWithUsernameAndPassword() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55","  3 - \u7528\u6237\u540D\u5BC6\u7801\u662F\u5426\u5339\u914D","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+IE]}),aa("design:type",Function),aa("design:paramtypes",[String,String]),aa("design:returntype",Promise)],t.prototype,"signIn",null),t}(Zn),NE=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ua=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},fr=globalThis&&globalThis.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},ca=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},fa=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},fo=Ee.throwError,la=Ee.isString,RE=Ee.transformPhone,lo=ge.ERRORS,ha=ge.COMMUNITY_SITE_URL,da=Ct.catchErrorsDecorator,To={SIGNIN:"SIGNIN",SIGNUP:"SIGNUP",FORCERESETPWD:"FORCERESETPWD"},CE=function(e){NE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.signIn=function(r){return ca(this,void 0,void 0,function(){var n,o,i,s,u,f,a,c,d;return fa(this,function(g){switch(g.label){case 0:return n=r.phoneNumber,o=r.phoneCode,i=r.password,s=r.signMethod,la(n)||fo(lo.INVALID_PARAMS,"phoneNumber must be a string"),!la(o)&&!la(i)&&fo(lo.INVALID_PARAMS,"phoneCode or password must be a string"),s||(s=To.SIGNIN),u=this._cache.keys.refreshTokenKey,[4,this._request.send("auth.signIn",{loginType:Ne.PHONE,phoneNumber:RE(n),phoneCode:o,password:i,refresh_token:this._cache.getStore(u)||"",signMethod:s})];case 1:return f=g.sent(),a=f.refresh_token,c=f.access_token,d=f.access_token_expire,a?[4,this.setRefreshToken(a)]:[3,8];case 2:return g.sent(),c&&d?[4,this.setAccessToken(c,d)]:[3,4];case 3:return g.sent(),[3,6];case 4:return[4,this._request.refreshAccessToken()];case 5:g.sent(),g.label=6;case 6:return[4,this.refreshUserInfo()];case 7:return g.sent(),Ae.fire(ye.LOGIN_STATE_CHANGED),Ae.fire(ye.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:Ne.PHONE,persistence:this._config.persistence}),[2,new nr({envId:this._config.env,cache:this._cache,request:this._request})];case 8:f.code?fo(lo.OPERATION_FAIL,"Phone login fail["+f.code+"] "+f.message):fo(lo.OPERATION_FAIL,"Phone login fail"),g.label=9;case 9:return[2]}})})},t.prototype.signUp=function(r,n,o){return ca(this,void 0,void 0,function(){return fa(this,function(i){return[2,this.signIn({phoneNumber:r,phoneCode:n,password:o,signMethod:To.SIGNUP})]})})},t.prototype.forceResetPwd=function(r,n,o){return ca(this,void 0,void 0,function(){return fa(this,function(i){return[2,this.signIn({phoneNumber:r,phoneCode:n,password:o,signMethod:To.FORCERESETPWD})]})})},ua([da({title:"\u624B\u673A\u53F7\u767B\u5F55\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().SmsAuthProvider() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u77ED\u4FE1\u9A8C\u8BC1\u7801\u767B\u5F55","  3 - \u77ED\u4FE1\u9A8C\u8BC1\u7801/\u5BC6\u7801\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+ha]}),fr("design:type",Function),fr("design:paramtypes",[Object]),fr("design:returntype",Promise)],t.prototype,"signIn",null),ua([da({title:"\u624B\u673A\u77ED\u4FE1\u6CE8\u518C\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().signUpWithPhoneCode() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u77ED\u4FE1\u9A8C\u8BC1\u7801\u767B\u5F55","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+ha]}),fr("design:type",Function),fr("design:paramtypes",[String,String,String]),fr("design:returntype",Promise)],t.prototype,"signUp",null),ua([da({title:"\u624B\u673A\u5BC6\u7801\u91CD\u7F6E\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().forceResetPwd() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u77ED\u4FE1\u9A8C\u8BC1\u7801\u767B\u5F55","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+ha]}),fr("design:type",Function),fr("design:paramtypes",[String,String,String]),fr("design:returntype",Promise)],t.prototype,"forceResetPwd",null),t}(Zn),Fe=globalThis&&globalThis.__assign||function(){return Fe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Fe.apply(this,arguments)},Le=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},J=globalThis&&globalThis.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},de=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},pe=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},PE=Mu.CloudbaseEventEmitter,FE=fn.RUNTIME,Qa=Ee.printWarn,$u=Ee.throwError,Za=Ee.transformPhone,$n=ge.ERRORS,De=ge.COMMUNITY_SITE_URL,Ue=Ct.catchErrorsDecorator,BE="auth",Ae=new PE,LE=function(){function e(t){var r=t.cache,n=t.request;this._cache=r,this._request=n,this._setUserInfo()}return e.prototype.checkLocalInfo=function(){return de(this,void 0,void 0,function(){return pe(this,function(t){return this.uid=this._getLocalUserInfo("uid"),this.loginType=this._getLocalUserInfo("loginType"),this.openid=this._getLocalUserInfo("wxOpenId"),this.wxOpenId=this._getLocalUserInfo("wxOpenId"),this.wxPublicId=this._getLocalUserInfo("wxPublicId"),this.unionId=this._getLocalUserInfo("wxUnionId"),this.qqMiniOpenId=this._getLocalUserInfo("qqMiniOpenId"),this.customUserId=this._getLocalUserInfo("customUserId"),this.nickName=this._getLocalUserInfo("nickName"),this.gender=this._getLocalUserInfo("gender"),this.avatarUrl=this._getLocalUserInfo("avatarUrl"),this.email=this._getLocalUserInfo("email"),this.hasPassword=Boolean(this._getLocalUserInfo("hasPassword")),this.phone=this._getLocalUserInfo("phone"),this.username=this._getLocalUserInfo("username"),this.location={country:this._getLocalUserInfo("country"),province:this._getLocalUserInfo("province"),city:this._getLocalUserInfo("city")},[2]})})},e.prototype.checkLocalInfoAsync=function(){return de(this,void 0,void 0,function(){var t,r,n,o,i,s,u,f,a,c,d,g,v,T,I,_,w,P;return pe(this,function(R){switch(R.label){case 0:return t=this,[4,this._getLocalUserInfoAsync("uid")];case 1:return t.uid=R.sent(),r=this,[4,this._getLocalUserInfoAsync("loginType")];case 2:return r.loginType=R.sent(),n=this,[4,this._getLocalUserInfoAsync("wxOpenId")];case 3:return n.openid=R.sent(),o=this,[4,this._getLocalUserInfoAsync("wxOpenId")];case 4:return o.wxOpenId=R.sent(),i=this,[4,this._getLocalUserInfoAsync("wxPublicId")];case 5:return i.wxPublicId=R.sent(),s=this,[4,this._getLocalUserInfoAsync("wxUnionId")];case 6:return s.unionId=R.sent(),u=this,[4,this._getLocalUserInfoAsync("qqMiniOpenId")];case 7:return u.qqMiniOpenId=R.sent(),f=this,[4,this._getLocalUserInfoAsync("customUserId")];case 8:return f.customUserId=R.sent(),a=this,[4,this._getLocalUserInfoAsync("nickName")];case 9:return a.nickName=R.sent(),c=this,[4,this._getLocalUserInfoAsync("gender")];case 10:return c.gender=R.sent(),d=this,[4,this._getLocalUserInfoAsync("avatarUrl")];case 11:return d.avatarUrl=R.sent(),g=this,[4,this._getLocalUserInfoAsync("email")];case 12:return g.email=R.sent(),v=this,T=Boolean,[4,this._getLocalUserInfoAsync("hasPassword")];case 13:return v.hasPassword=T.apply(void 0,[R.sent()]),I=this,[4,this._getLocalUserInfoAsync("phone")];case 14:return I.phone=R.sent(),_=this,[4,this._getLocalUserInfoAsync("username")];case 15:return _.username=R.sent(),w=this,P={},[4,this._getLocalUserInfoAsync("country")];case 16:return P.country=R.sent(),[4,this._getLocalUserInfoAsync("province")];case 17:return P.province=R.sent(),[4,this._getLocalUserInfoAsync("city")];case 18:return w.location=(P.city=R.sent(),P),[2]}})})},e.prototype.linkWithTicket=function(t){if(typeof t!="string")throw new Error("ticket must be string");return this._request.send("auth.linkWithTicket",{ticket:t})},e.prototype.linkWithRedirect=function(t){t.signInWithRedirect()},e.prototype.getLinkedUidList=function(){return de(this,void 0,void 0,function(){var t,r,n,o,i,s;return pe(this,function(u){switch(u.label){case 0:return[4,this._request.send("auth.getLinkedUidList",{})];case 1:for(t=u.sent().data,r=!1,n=t.users,o=0,i=n;o<i.length;o++)if(s=i[o],s.wxOpenId&&s.wxPublicId){r=!0;break}return[2,{users:n,hasPrimaryUid:r}]}})})},e.prototype.setPrimaryUid=function(t){return this._request.send("auth.setPrimaryUid",{uid:t})},e.prototype.unlink=function(t){return this._request.send("auth.unlink",{platform:t})},e.prototype.update=function(t){return de(this,void 0,void 0,function(){var r,n,o,i,s,u,f;return pe(this,function(a){switch(a.label){case 0:return r=t.nickName,n=t.gender,o=t.avatarUrl,i=t.province,s=t.country,u=t.city,[4,this._request.send("auth.updateUserInfo",{nickName:r,gender:n,avatarUrl:o,province:i,country:s,city:u})];case 1:return f=a.sent().data,this._setLocalUserInfo(f),[2]}})})},e.prototype.updatePassword=function(t,r){return this._request.send("auth.updatePassword",{oldPassword:r,newPassword:t})},e.prototype.updateEmail=function(t,r){return this._request.send("auth.updateEmail",{newEmail:t,password:r})},e.prototype.updateUsername=function(t){return typeof t!="string"&&$u($n.INVALID_PARAMS,"username must be a string"),this._request.send("auth.updateUsername",{username:t})},e.prototype.refresh=function(){return de(this,void 0,void 0,function(){var t,r;return pe(this,function(n){switch(n.label){case 0:return t="auth.getUserInfo",[4,this._request.send(t,{})];case 1:return r=n.sent().data,this._setLocalUserInfo(r),[2,r]}})})},e.prototype.linkWithPhoneNumber=function(t,r){return de(this,void 0,void 0,function(){return pe(this,function(n){return[2,this._request.send("auth.linkOrUpdatePhoneNumber",{phoneNumber:Za(t),phoneCode:r})]})})},e.prototype.updatePhoneNumber=function(t,r){return de(this,void 0,void 0,function(){return pe(this,function(n){return[2,this._request.send("auth.linkOrUpdatePhoneNumber",{phoneNumber:Za(t),phoneCode:r})]})})},e.prototype._getLocalUserInfo=function(t){var r=this._cache.keys.userInfoKey,n=this._cache.getStore(r);return n[t]},e.prototype._getLocalUserInfoAsync=function(t){return de(this,void 0,void 0,function(){var r,n;return pe(this,function(o){switch(o.label){case 0:return r=this._cache.keys.userInfoKey,[4,this._cache.getStoreAsync(r)];case 1:return n=o.sent(),[2,n[t]]}})})},e.prototype._setUserInfo=function(){var t=this,r=this._cache.keys.userInfoKey,n=this._cache.getStore(r);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl","phone","username"].forEach(function(o){t[o]=n[o]}),this.location={country:n.country,province:n.province,city:n.city}},e.prototype._setLocalUserInfo=function(t){var r=this._cache.keys.userInfoKey;this._cache.setStore(r,t),this._setUserInfo()},Le([Ue({title:"\u7ED1\u5B9A\u81EA\u5B9A\u4E49\u767B\u5F55\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 User.linkWithTicket() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u6B64\u8D26\u6237\u662F\u5426\u5DF2\u7ECF\u7ED1\u5B9A\u81EA\u5B9A\u4E49\u767B\u5F55","  3 - ticket \u53C2\u6570\u662F\u5426\u5F52\u5C5E\u5F53\u524D\u73AF\u5883","  4 - \u521B\u5EFA ticket \u7684\u81EA\u5B9A\u4E49\u767B\u5F55\u79C1\u94A5\u662F\u5426\u8FC7\u671F","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[String]),J("design:returntype",Promise)],e.prototype,"linkWithTicket",null),Le([Ue({title:"\u7ED1\u5B9A\u7B2C\u4E09\u65B9\u767B\u5F55\u65B9\u5F0F\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 User.linkWithRedirect() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u6B64\u8D26\u6237\u662F\u5426\u5DF2\u7ECF\u7ED1\u5B9A\u6B64\u7B2C\u4E09\u65B9","  3 - \u6B64\u7B2C\u4E09\u65B9\u662F\u5426\u5DF2\u7ECF\u6388\u6743","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[Object]),J("design:returntype",void 0)],e.prototype,"linkWithRedirect",null),Le([Ue({title:"\u83B7\u53D6\u8D26\u6237\u5217\u8868\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 User.getLinkedUidList() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[]),J("design:returntype",Promise)],e.prototype,"getLinkedUidList",null),Le([Ue({title:"\u8BBE\u7F6E\u5FAE\u4FE1\u4E3B\u8D26\u53F7\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 User.setPrimaryUid() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[String]),J("design:returntype",void 0)],e.prototype,"setPrimaryUid",null),Le([Ue({title:"\u63A5\u89E6\u7ED1\u5B9A\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 User.unlink() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u8D26\u6237\u662F\u5426\u5DF2\u7ECF\u4E0E\u6B64\u767B\u5F55\u65B9\u5F0F\u89E3\u7ED1","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[String]),J("design:returntype",void 0)],e.prototype,"unlink",null),Le([Ue({title:"\u66F4\u65B0\u7528\u6237\u4FE1\u606F\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 User.update() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u7528\u6237\u4FE1\u606F\u4E2D\u662F\u5426\u5305\u542B\u975E\u6CD5\u503C","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[Object]),J("design:returntype",Promise)],e.prototype,"update",null),Le([Ue({title:"\u66F4\u65B0\u5BC6\u7801\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 User.updatePassword() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  3 - \u65B0\u5BC6\u7801\u4E2D\u662F\u5426\u5305\u542B\u975E\u6CD5\u5B57\u7B26","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[String,String]),J("design:returntype",void 0)],e.prototype,"updatePassword",null),Le([Ue({title:"\u66F4\u65B0\u90AE\u7BB1\u5730\u5740\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 User.updateEmail() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u90AE\u7BB1\u5BC6\u7801\u767B\u5F55","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[String,String]),J("design:returntype",void 0)],e.prototype,"updateEmail",null),Le([Ue({title:"\u66F4\u65B0\u7528\u6237\u540D\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 User.updateUsername() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[String]),J("design:returntype",void 0)],e.prototype,"updateUsername",null),Le([Ue({title:"\u5237\u65B0\u672C\u5730\u7528\u6237\u4FE1\u606F\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 User.refresh() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[]),J("design:returntype",Promise)],e.prototype,"refresh",null),Le([Ue({title:"\u7ED1\u5B9A\u624B\u673A\u53F7\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().linkWithPhoneNumber() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u77ED\u4FE1\u9A8C\u8BC1\u7801\u767B\u5F55","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[String,String]),J("design:returntype",Promise)],e.prototype,"linkWithPhoneNumber",null),Le([Ue({title:"\u66F4\u65B0\u624B\u673A\u53F7\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u77ED\u4FE1\u9A8C\u8BC1\u7801\u767B\u5F55","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[String,String]),J("design:returntype",Promise)],e.prototype,"updatePhoneNumber",null),e}(),nr=function(){function e(t){var r=t.envId,n=t.cache,o=t.request;r||$u($n.INVALID_PARAMS,"envId is not defined"),this._cache=n,this.user=new LE({cache:n,request:o})}return e.prototype.checkLocalState=function(){return de(this,void 0,void 0,function(){var t,r,n,o,i,s,u;return pe(this,function(f){return t=this._cache.keys,r=t.refreshTokenKey,n=t.accessTokenKey,o=t.accessTokenExpireKey,i=this._cache.getStore(r),s=this._cache.getStore(n),u=this._cache.getStore(o),this.credential={refreshToken:i,accessToken:s,accessTokenExpire:u},this._loginType=this._cache.getStore(this._cache.keys.loginTypeKey),this.user.checkLocalInfo(),[2]})})},e.prototype.checkLocalStateAsync=function(){return de(this,void 0,void 0,function(){var t,r,n,o,i,s,u,f;return pe(this,function(a){switch(a.label){case 0:return t=this._cache.keys,r=t.refreshTokenKey,n=t.accessTokenKey,o=t.accessTokenExpireKey,[4,this._cache.getStoreAsync(r)];case 1:return i=a.sent(),[4,this._cache.getStoreAsync(n)];case 2:return s=a.sent(),[4,this._cache.getStoreAsync(o)];case 3:return u=a.sent(),this.credential={refreshToken:i,accessToken:s,accessTokenExpire:u},f=this,[4,this._cache.getStoreAsync(this._cache.keys.loginTypeKey)];case 4:return f._loginType=a.sent(),[4,this.user.checkLocalInfoAsync()];case 5:return a.sent(),[2]}})})},Object.defineProperty(e.prototype,"isAnonymousAuth",{get:function(){return this.loginType===Ne.ANONYMOUS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCustomAuth",{get:function(){return this.loginType===Ne.CUSTOM},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWeixinAuth",{get:function(){return this.loginType===Ne.WECHAT||this.loginType===Ne.WECHAT_OPEN||this.loginType===Ne.WECHAT_PUBLIC},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsernameAuth",{get:function(){return this.loginType===Ne.USERNAME},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loginType",{get:function(){return this._loginType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPhoneAuth",{get:function(){return this.loginType===Ne.PHONE},enumerable:!1,configurable:!0}),e}(),DE=function(){function e(t){this._config=t,this._cache=t.cache,this._request=t.request,this._runtime=t.runtime||FE.WEB,Ae.on(ye.LOGIN_TYPE_CHANGED,this._onLoginTypeChanged.bind(this))}return Object.defineProperty(e.prototype,"currentUser",{get:function(){if(this._cache.mode==="async"){Qa($n.INVALID_OPERATION,"current platform's storage is asynchronous, please use getCurrenUser insteed");return}var t=this.hasLoginState();return t&&t.user||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loginType",{get:function(){return this._cache.getStore(this._cache.keys.loginTypeKey)},enumerable:!1,configurable:!0}),e.prototype.getCurrenUser=function(){return de(this,void 0,void 0,function(){var t;return pe(this,function(r){switch(r.label){case 0:return[4,this.getLoginState()];case 1:return t=r.sent(),t?[4,t.user.checkLocalInfoAsync()]:[3,3];case 2:return r.sent(),[2,t.user||null];case 3:return[2,null]}})})},e.prototype.getLoginType=function(){return de(this,void 0,void 0,function(){return pe(this,function(t){switch(t.label){case 0:return[4,this._cache.getStoreAsync(this._cache.keys.loginTypeKey)];case 1:return[2,t.sent()]}})})},e.prototype.getAccessToken=function(){return de(this,void 0,void 0,function(){var t;return pe(this,function(r){switch(r.label){case 0:return t={},[4,this._request.getAccessToken()];case 1:return[2,(t.accessToken=r.sent().accessToken,t.env=this._config.env,t)]}})})},e.prototype.weixinAuthProvider=function(t){var r=t.appid,n=t.scope,o=t.state;return this._weixinAuthProvider||(this._weixinAuthProvider=new rE(Fe(Fe({},this._config),{cache:this._cache,request:this._request,runtime:this._runtime}),r,n,o)),this._weixinAuthProvider},e.prototype.anonymousAuthProvider=function(){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new cE(Fe(Fe({},this._config),{cache:this._cache,request:this._request}))),this._anonymousAuthProvider},e.prototype.customAuthProvider=function(){return this._customAuthProvider||(this._customAuthProvider=new mE(Fe(Fe({},this._config),{cache:this._cache,request:this._request}))),this._customAuthProvider},e.prototype.emailAuthProvider=function(){return this._emailAuthProvider||(this._emailAuthProvider=new EE(Fe(Fe({},this._config),{cache:this._cache,request:this._request}))),this._emailAuthProvider},e.prototype.usernameAuthProvider=function(){return this._usernameAuthProvider||(this._usernameAuthProvider=new xE(Fe(Fe({},this._config),{cache:this._cache,request:this._request}))),this._usernameAuthProvider},e.prototype.phoneAuthProvider=function(){return this._phoneAuthProvider||(this._phoneAuthProvider=new CE(Fe(Fe({},this._config),{cache:this._cache,request:this._request}))),this._phoneAuthProvider},e.prototype.signInWithUsernameAndPassword=function(t,r){return de(this,void 0,void 0,function(){return pe(this,function(n){return[2,this.usernameAuthProvider().signIn(t,r)]})})},e.prototype.isUsernameRegistered=function(t){return de(this,void 0,void 0,function(){var r;return pe(this,function(n){switch(n.label){case 0:return typeof t!="string"&&$u($n.INVALID_PARAMS,"username must be a string"),[4,this._request.send("auth.isUsernameRegistered",{username:t})];case 1:return r=n.sent().data,[2,r==null?void 0:r.isRegistered]}})})},e.prototype.signInWithEmailAndPassword=function(t,r){return de(this,void 0,void 0,function(){return pe(this,function(n){return[2,this.emailAuthProvider().signIn(t,r)]})})},e.prototype.signUpWithEmailAndPassword=function(t,r){return de(this,void 0,void 0,function(){return pe(this,function(n){return[2,this.emailAuthProvider().signUp(t,r)]})})},e.prototype.sendPasswordResetEmail=function(t){return de(this,void 0,void 0,function(){return pe(this,function(r){return[2,this.emailAuthProvider().resetPassword(t)]})})},e.prototype.signOut=function(){return de(this,void 0,void 0,function(){var t,r,n,o,i,s,u;return pe(this,function(f){switch(f.label){case 0:return t=this._cache.keys,r=t.refreshTokenKey,n=t.accessTokenKey,o=t.accessTokenExpireKey,i="auth.logout",[4,this._cache.getStoreAsync(r)];case 1:return s=f.sent(),s?[4,this._request.send(i,{refresh_token:s})]:[2];case 2:return u=f.sent(),this._cache.removeStoreAsync(r),this._cache.removeStoreAsync(n),this._cache.removeStoreAsync(o),Ae.fire(ye.LOGIN_STATE_CHANGED),Ae.fire(ye.LOGIN_TYPE_CHANGED,{env:this._config.env,loginType:Ne.NULL,persistence:this._config.persistence}),[2,u]}})})},e.prototype.onLoginStateChanged=function(t){return de(this,void 0,void 0,function(){var r,n=this;return pe(this,function(o){switch(o.label){case 0:return Ae.on(ye.LOGIN_STATE_CHANGED,function(){return de(n,void 0,void 0,function(){var i;return pe(this,function(s){switch(s.label){case 0:return[4,this.getLoginState()];case 1:return i=s.sent(),t.call(this,i),[2]}})})}),[4,this.getLoginState()];case 1:return r=o.sent(),t.call(this,r),[2]}})})},e.prototype.onLoginStateExpired=function(t){Ae.on(ye.LOGIN_STATE_EXPIRED,t.bind(this))},e.prototype.onAccessTokenRefreshed=function(t){Ae.on(ye.ACCESS_TOKEN_REFRESHD,t.bind(this))},e.prototype.onAnonymousConverted=function(t){Ae.on(ye.ANONYMOUS_CONVERTED,t.bind(this))},e.prototype.onLoginTypeChanged=function(t){var r=this;Ae.on(ye.LOGIN_TYPE_CHANGED,function(){return de(r,void 0,void 0,function(){var n;return pe(this,function(o){switch(o.label){case 0:return[4,this.getLoginState()];case 1:return n=o.sent(),t.call(this,n),[2]}})})})},e.prototype.hasLoginState=function(){if(this._cache.mode==="async"){Qa($n.INVALID_OPERATION,"current platform's storage is asynchronous, please use getLoginState insteed");return}var t=this._cache.keys.refreshTokenKey,r=this._cache.getStore(t);if(r){var n=new nr({envId:this._config.env,cache:this._cache,request:this._request});return n.checkLocalState(),n}else return null},e.prototype.getLoginState=function(){return de(this,void 0,void 0,function(){var t,r,n;return pe(this,function(o){switch(o.label){case 0:return t=this._cache.keys.refreshTokenKey,[4,this._cache.getStoreAsync(t)];case 1:return r=o.sent(),r?(n=new nr({envId:this._config.env,cache:this._cache,request:this._request}),[4,n.checkLocalStateAsync()]):[3,3];case 2:return o.sent(),[2,n];case 3:return[2,null]}})})},e.prototype.shouldRefreshAccessToken=function(t){this._request._shouldRefreshAccessTokenHook=t.bind(this)},e.prototype.getUserInfo=function(){return de(this,void 0,void 0,function(){var t,r;return pe(this,function(n){switch(n.label){case 0:return t="auth.getUserInfo",[4,this._request.send(t,{})];case 1:return r=n.sent(),r.code?[2,r]:[2,Fe(Fe({},r.data),{requestId:r.seqId})]}})})},e.prototype.getAuthHeader=function(){var t=this._cache.keys,r=t.refreshTokenKey,n=t.accessTokenKey,o=this._cache.getStore(r),i=this._cache.getStore(n);return{"x-cloudbase-credentials":i+"/@@/"+o}},e.prototype.getAuthHeaderAsync=function(){return de(this,void 0,void 0,function(){var t,r,n,o,i;return pe(this,function(s){switch(s.label){case 0:return[4,this._request.refreshAccessToken()];case 1:return s.sent(),t=this._cache.keys,r=t.refreshTokenKey,n=t.accessTokenKey,[4,this._cache.getStoreAsync(r)];case 2:return o=s.sent(),[4,this._cache.getStoreAsync(n)];case 3:return i=s.sent(),[2,{"x-cloudbase-credentials":i+"/@@/"+o}]}})})},e.prototype.sendPhoneCode=function(t){return de(this,void 0,void 0,function(){var r;return pe(this,function(n){switch(n.label){case 0:return[4,this._request.send("auth.sendPhoneCode",{phoneNumber:Za(t)})];case 1:return r=n.sent().data,[2,r.SendStatus==="Ok"]}})})},e.prototype.signUpWithPhoneCode=function(t,r,n){return de(this,void 0,void 0,function(){return pe(this,function(o){return[2,this.phoneAuthProvider().signUp(t,r,n)]})})},e.prototype.signInWithPhoneCodeOrPassword=function(t){return de(this,void 0,void 0,function(){return pe(this,function(r){return[2,this.phoneAuthProvider().signIn(t)]})})},e.prototype.forceResetPwdByPhoneCode=function(t){return de(this,void 0,void 0,function(){return pe(this,function(r){return[2,this.phoneAuthProvider().signIn(Fe(Fe({},t),{signMethod:To.FORCERESETPWD}))]})})},e.prototype._onLoginTypeChanged=function(t){return de(this,void 0,void 0,function(){var r,n,o,i;return pe(this,function(s){switch(s.label){case 0:return r=t.data,n=r.loginType,o=r.persistence,i=r.env,i!==this._config.env?[2]:[4,this._cache.updatePersistenceAsync(o)];case 1:return s.sent(),[4,this._cache.setStoreAsync(this._cache.keys.loginTypeKey,n)];case 2:return s.sent(),[2]}})})},Le([Ue({title:"\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().getCurrenUser() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[]),J("design:returntype",Promise)],e.prototype,"getCurrenUser",null),Le([Ue({title:"\u83B7\u53D6\u7528\u6237\u662F\u5426\u88AB\u5360\u7528\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().isUsernameRegistered() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[String]),J("design:returntype",Promise)],e.prototype,"isUsernameRegistered",null),Le([Ue({title:"\u7528\u6237\u767B\u51FA\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().signOut() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u7528\u6237\u662F\u5426\u4E3A\u533F\u540D\u767B\u5F55\uFF08\u533F\u540D\u767B\u5F55\u4E0D\u652F\u6301signOut\uFF09","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[]),J("design:returntype",Promise)],e.prototype,"signOut",null),Le([Ue({title:"\u83B7\u53D6\u672C\u5730\u767B\u5F55\u6001\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 auth().getLoginState() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[]),J("design:returntype",Promise)],e.prototype,"getLoginState",null),Le([Ue({title:"\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u662F\u5426\u5DF2\u767B\u5F55","  2 - \u8C03\u7528 auth().getUserInfo() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[]),J("design:returntype",Promise)],e.prototype,"getUserInfo",null),Le([Ue({title:"\u53D1\u9001\u77ED\u4FE1\u9A8C\u8BC1\u7801\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u662F\u5426\u5F00\u901A\u4E86\u77ED\u4FE1\u9A8C\u8BC1\u7801\u767B\u5F55","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+De]}),J("design:type",Function),J("design:paramtypes",[String]),J("design:returntype",Promise)],e.prototype,"sendPhoneCode",null),e}(),ye={LOGIN_STATE_CHANGED:"loginStateChanged",LOGIN_STATE_EXPIRED:"loginStateExpire",LOGIN_TYPE_CHANGED:"loginTypeChanged",ANONYMOUS_CONVERTED:"anonymousConverted",ACCESS_TOKEN_REFRESHD:"refreshAccessToken"},zh={name:BE,namespace:"auth",injectEvents:{bus:Ae,events:[ye.LOGIN_TYPE_CHANGED,ye.LOGIN_STATE_EXPIRED,ye.LOGIN_STATE_CHANGED,ye.ACCESS_TOKEN_REFRESHD,ye.ANONYMOUS_CONVERTED]},entity:function(e){if(e===void 0&&(e={region:"",persistence:"local"}),this.authInstance)return Qa($n.INVALID_OPERATION,"every cloudbase instance should has only one auth object"),this.authInstance;var t=this.platform,r=t.adapter,n=t.runtime,o=e.persistence||r.primaryStorage;o&&o!==this.config.persistence&&this.updateConfig({persistence:o});var i=this.config,s=i.env,u=i.persistence,f=i.debug;return this.authInstance=new DE({env:s,region:e.region,persistence:u,debug:f,cache:this.cache,request:this.request,runtime:n}),this.authInstance}};try{cloudbase.registerComponent(zh)}catch{}function UE(e){try{e.registerComponent(zh)}catch(t){console.warn(t)}}var ME=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},pa=globalThis&&globalThis.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},$E=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},kE=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},jE=ge.getSdkName,ga=ge.ERRORS,WE=ge.COMMUNITY_SITE_URL,gi=Ee.execCallback,qE=Ct.catchErrorsDecorator,Io="functions",HE=function(){function e(){}return e.prototype.callFunction=function(t,r){return $E(this,void 0,void 0,function(){var n,o,i,s,u,f,a,c,d,g,v,T;return kE(this,function(I){switch(I.label){case 0:if(n=t.name,o=t.data,i=t.query,s=t.parse,u=t.search,!n)throw new Error(JSON.stringify({code:ga.INVALID_PARAMS,msg:"["+Io+".callFunction] invalid function name"}));try{f=o?JSON.stringify(o):""}catch{throw new Error(JSON.stringify({code:ga.INVALID_PARAMS,msg:"["+Io+".callFunction] invalid data"}))}a="functions.invokeFunction",c={inQuery:i,parse:s,search:u,function_name:n,request_data:f},d=this.request,I.label=1;case 1:return I.trys.push([1,3,,4]),[4,d.send(a,c)];case 2:if(g=I.sent(),g.code)return[2,gi(r,null,g)];if(v=g.data.response_data,s)return[2,gi(r,null,{result:v,requestId:g.requestId})];try{return v=JSON.parse(g.data.response_data),[2,gi(r,null,{result:v,requestId:g.requestId})]}catch{gi(r,new Error("["+jE()+"]["+ga.INVALID_PARAMS+"]["+Io+".callFunction] response data must be json"))}return[3,4];case 3:return T=I.sent(),gi(r,T),[3,4];case 4:return[2]}})})},ME([qE({customInfo:{className:"Cloudbase",methodName:"callFunction"},title:"\u51FD\u6570\u8C03\u7528\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 callFunction() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u73AF\u5883\u4E0B\u662F\u5426\u5B58\u5728\u6B64\u51FD\u6570","  3 - \u51FD\u6570\u5B89\u5168\u89C4\u5219\u662F\u5426\u9650\u5236\u4E86\u5F53\u524D\u767B\u5F55\u72B6\u6001\u8BBF\u95EE","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+WE]}),pa("design:type",Function),pa("design:paramtypes",[Object,Function]),pa("design:returntype",Promise)],e.prototype,"callFunction",null),e}(),KE=new HE,Xh={name:Io,entity:{callFunction:KE.callFunction}};try{cloudbase.registerComponent(Xh)}catch{}function GE(e){try{e.registerComponent(Xh)}catch(t){console.warn(t)}}var yi=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},ze=globalThis&&globalThis.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},mi=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},_i=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},VE=ge.getSdkName,lr=ge.ERRORS,vi=ge.COMMUNITY_SITE_URL,Sf=Ee.isArray,Ei=Ee.isString,JE=Ee.isPalinObject,Kt=Ee.execCallback,wi=Ct.catchErrorsDecorator,Jt="storage",YE=function(){function e(){}return e.prototype.uploadFile=function(t,r){return mi(this,void 0,void 0,function(){var n,o,i,s,u,f,a,c,d,g,v,T,I,_,w,P;return _i(this,function(R){switch(R.label){case 0:if(n=t.cloudPath,o=t.filePath,i=t.onUploadProgress,!Ei(n)||!o)throw new Error(JSON.stringify({code:lr.INVALID_PARAMS,msg:"["+Jt+".uploadFile] invalid params"}));return s="storage.getUploadMetadata",u=this.request,[4,u.send(s,{path:n})];case 1:return f=R.sent(),a=f.data,c=a.url,d=a.authorization,g=a.token,v=a.fileId,T=a.cosFileId,I=a.download_url,_=f.requestId,w={key:n,signature:d,"x-cos-meta-fileid":T,success_action_status:"201","x-cos-security-token":g},[4,u.upload({url:c,data:w,file:o,name:n,onUploadProgress:i})];case 2:return P=R.sent(),P.statusCode===201?[2,Kt(r,null,{fileID:v,download_url:I,requestId:_})]:[2,Kt(r,new Error("["+VE()+"]["+lr.OPERATION_FAIL+"]["+Jt+"]:"+P.data))]}})})},e.prototype.getUploadMetadata=function(t,r){return mi(this,void 0,void 0,function(){var n,o,i,s,u;return _i(this,function(f){switch(f.label){case 0:if(n=t.cloudPath,!Ei(n))throw new Error(JSON.stringify({code:lr.INVALID_PARAMS,msg:"["+Jt+".getUploadMetadata] invalid cloudPath"}));o=this.request,i="storage.getUploadMetadata",f.label=1;case 1:return f.trys.push([1,3,,4]),[4,o.send(i,{path:n})];case 2:return s=f.sent(),[2,Kt(r,null,s)];case 3:return u=f.sent(),[2,Kt(r,u)];case 4:return[2]}})})},e.prototype.deleteFile=function(t,r){return mi(this,void 0,void 0,function(){var n,o,i,s,u,f,a,c;return _i(this,function(d){switch(d.label){case 0:if(n=t.fileList,!n||!Sf(n)||n.length===0)throw new Error(JSON.stringify({code:lr.INVALID_PARAMS,msg:"["+Jt+".deleteFile] fileList must not be empty"}));for(o=0,i=n;o<i.length;o++)if(s=i[o],!s||!Ei(s))throw new Error(JSON.stringify({code:lr.INVALID_PARAMS,msg:"["+Jt+".deleteFile] fileID must be string"}));return u="storage.batchDeleteFile",f=this.request,[4,f.send(u,{fileid_list:n})];case 1:return a=d.sent(),a.code?[2,Kt(r,null,a)]:(c={fileList:a.data.delete_list,requestId:a.requestId},[2,Kt(r,null,c)])}})})},e.prototype.getTempFileURL=function(t,r){return mi(this,void 0,void 0,function(){var n,o,i,s,u,f,a,c;return _i(this,function(d){switch(d.label){case 0:if(n=t.fileList,!n||!Sf(n)||n.length===0)throw new Error(JSON.stringify({code:lr.INVALID_PARAMS,msg:"["+Jt+".getTempFileURL] fileList must not be empty"}));for(o=[],i=0,s=n;i<s.length;i++)if(u=s[i],JE(u)){if(!u.hasOwnProperty("fileID")||!u.hasOwnProperty("maxAge"))throw new Error(JSON.stringify({code:lr.INVALID_PARAMS,msg:"["+Jt+".getTempFileURL] file info must include fileID and maxAge"}));o.push({fileid:u.fileID,max_age:u.maxAge})}else if(Ei(u))o.push({fileid:u});else throw new Error(JSON.stringify({code:lr.INVALID_PARAMS,msg:"["+Jt+".getTempFileURL] invalid fileList"}));return f="storage.batchGetDownloadUrl",a=this.request,[4,a.send(f,{file_list:o})];case 1:return c=d.sent(),c.code?[2,Kt(r,null,c)]:[2,Kt(r,null,{fileList:c.data.download_list,requestId:c.requestId})]}})})},e.prototype.downloadFile=function(t,r){return mi(this,void 0,void 0,function(){var n,o,i,s,u,f;return _i(this,function(a){switch(a.label){case 0:if(n=t.fileID,!Ei(n))throw new Error(JSON.stringify({code:lr.INVALID_PARAMS,msg:"["+Jt+".getTempFileURL] fileID must be string"}));return[4,this.getTempFileURL.call(this,{fileList:[{fileID:n,maxAge:600}]})];case 1:return o=a.sent(),i=o.fileList[0],i.code!=="SUCCESS"?[2,Kt(r,i)]:(s=this.request,u=encodeURI(i.download_url),[4,s.download({url:u})]);case 2:return f=a.sent(),[2,Kt(r,null,f)]}})})},yi([wi({customInfo:{className:"Cloudbase",methodName:"uploadFile"},title:"\u4E0A\u4F20\u6587\u4EF6\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 uploadFile() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u57DF\u540D\u662F\u5426\u5728\u5B89\u5168\u57DF\u540D\u5217\u8868\u4E2D\uFF1Ahttps://console.cloud.tencent.com/tcb/env/safety","  3 - \u4E91\u5B58\u50A8\u5B89\u5168\u89C4\u5219\u662F\u5426\u9650\u5236\u4E86\u5F53\u524D\u767B\u5F55\u72B6\u6001\u8BBF\u95EE","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+vi]}),ze("design:type",Function),ze("design:paramtypes",[Object,Function]),ze("design:returntype",Promise)],e.prototype,"uploadFile",null),yi([wi({customInfo:{className:"Cloudbase",methodName:"getUploadMetadata"},title:"\u83B7\u53D6\u4E0A\u4F20\u5143\u4FE1\u606F\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 getUploadMetadata() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u57DF\u540D\u662F\u5426\u5728\u5B89\u5168\u57DF\u540D\u5217\u8868\u4E2D\uFF1Ahttps://console.cloud.tencent.com/tcb/env/safety","  3 - \u4E91\u5B58\u50A8\u5B89\u5168\u89C4\u5219\u662F\u5426\u9650\u5236\u4E86\u5F53\u524D\u767B\u5F55\u72B6\u6001\u8BBF\u95EE","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+vi]}),ze("design:type",Function),ze("design:paramtypes",[Object,Function]),ze("design:returntype",Promise)],e.prototype,"getUploadMetadata",null),yi([wi({customInfo:{className:"Cloudbase",methodName:"deleteFile"},title:"\u5220\u9664\u6587\u4EF6\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 deleteFile() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u57DF\u540D\u662F\u5426\u5728\u5B89\u5168\u57DF\u540D\u5217\u8868\u4E2D\uFF1Ahttps://console.cloud.tencent.com/tcb/env/safety","  3 - \u4E91\u5B58\u50A8\u5B89\u5168\u89C4\u5219\u662F\u5426\u9650\u5236\u4E86\u5F53\u524D\u767B\u5F55\u72B6\u6001\u8BBF\u95EE","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+vi]}),ze("design:type",Function),ze("design:paramtypes",[Object,Function]),ze("design:returntype",Promise)],e.prototype,"deleteFile",null),yi([wi({customInfo:{className:"Cloudbase",methodName:"getTempFileURL"},title:"\u83B7\u53D6\u6587\u4EF6\u4E0B\u8F7D\u94FE\u63A5",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 getTempFileURL() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u57DF\u540D\u662F\u5426\u5728\u5B89\u5168\u57DF\u540D\u5217\u8868\u4E2D\uFF1Ahttps://console.cloud.tencent.com/tcb/env/safety","  3 - \u4E91\u5B58\u50A8\u5B89\u5168\u89C4\u5219\u662F\u5426\u9650\u5236\u4E86\u5F53\u524D\u767B\u5F55\u72B6\u6001\u8BBF\u95EE","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+vi]}),ze("design:type",Function),ze("design:paramtypes",[Object,Function]),ze("design:returntype",Promise)],e.prototype,"getTempFileURL",null),yi([wi({customInfo:{className:"Cloudbase",methodName:"downloadFile"},title:"\u4E0B\u8F7D\u6587\u4EF6\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 downloadFile() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","  2 - \u5F53\u524D\u57DF\u540D\u662F\u5426\u5728\u5B89\u5168\u57DF\u540D\u5217\u8868\u4E2D\uFF1Ahttps://console.cloud.tencent.com/tcb/env/safety","  3 - \u4E91\u5B58\u50A8\u5B89\u5168\u89C4\u5219\u662F\u5426\u9650\u5236\u4E86\u5F53\u524D\u767B\u5F55\u72B6\u6001\u8BBF\u95EE","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+vi]}),ze("design:type",Function),ze("design:paramtypes",[Object,Function]),ze("design:returntype",Promise)],e.prototype,"downloadFile",null),e}(),bi=new YE,Qh={name:Jt,entity:{uploadFile:bi.uploadFile,deleteFile:bi.deleteFile,getTempFileURL:bi.getTempFileURL,downloadFile:bi.downloadFile,getUploadMetadata:bi.getUploadMetadata}};try{cloudbase.registerComponent(Qh)}catch{}function zE(e){try{e.registerComponent(Qh)}catch(t){console.warn(t)}}var XE="Expected a function",Zh="__lodash_hash_undefined__",ed=1/0,QE=9007199254740991,ZE="[object Function]",ew="[object GeneratorFunction]",tw="[object Symbol]",rw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nw=/^\w*$/,iw=/^\./,ow=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sw=/[\\^$.*+?()[\]{}|]/g,aw=/\\(\\)?/g,uw=/^\[object .+?Constructor\]$/,cw=/^(?:0|[1-9]\d*)$/,fw=typeof H=="object"&&H&&H.Object===Object&&H,lw=typeof self=="object"&&self&&self.Object===Object&&self,ku=fw||lw||Function("return this")();function hw(e,t){return e==null?void 0:e[t]}function dw(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}var pw=Array.prototype,gw=Function.prototype,td=Object.prototype,ya=ku["__core-js_shared__"],Tf=function(){var e=/[^.]+$/.exec(ya&&ya.keys&&ya.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),rd=gw.toString,gs=td.hasOwnProperty,nd=td.toString,yw=RegExp("^"+rd.call(gs).replace(sw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),If=ku.Symbol,mw=pw.splice,_w=id(ku,"Map"),Mi=id(Object,"create"),Of=If?If.prototype:void 0,xf=Of?Of.toString:void 0;function an(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function vw(){this.__data__=Mi?Mi(null):{}}function Ew(e){return this.has(e)&&delete this.__data__[e]}function ww(e){var t=this.__data__;if(Mi){var r=t[e];return r===Zh?void 0:r}return gs.call(t,e)?t[e]:void 0}function bw(e){var t=this.__data__;return Mi?t[e]!==void 0:gs.call(t,e)}function Aw(e,t){var r=this.__data__;return r[e]=Mi&&t===void 0?Zh:t,this}an.prototype.clear=vw;an.prototype.delete=Ew;an.prototype.get=ww;an.prototype.has=bw;an.prototype.set=Aw;function ei(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Sw(){this.__data__=[]}function Tw(e){var t=this.__data__,r=ys(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():mw.call(t,r,1),!0}function Iw(e){var t=this.__data__,r=ys(t,e);return r<0?void 0:t[r][1]}function Ow(e){return ys(this.__data__,e)>-1}function xw(e,t){var r=this.__data__,n=ys(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}ei.prototype.clear=Sw;ei.prototype.delete=Tw;ei.prototype.get=Iw;ei.prototype.has=Ow;ei.prototype.set=xw;function ln(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Nw(){this.__data__={hash:new an,map:new(_w||ei),string:new an}}function Rw(e){return ms(this,e).delete(e)}function Cw(e){return ms(this,e).get(e)}function Pw(e){return ms(this,e).has(e)}function Fw(e,t){return ms(this,e).set(e,t),this}ln.prototype.clear=Nw;ln.prototype.delete=Rw;ln.prototype.get=Cw;ln.prototype.has=Pw;ln.prototype.set=Fw;function Bw(e,t,r){var n=e[t];(!(gs.call(e,t)&&od(n,r))||r===void 0&&!(t in e))&&(e[t]=r)}function ys(e,t){for(var r=e.length;r--;)if(od(e[r][0],t))return r;return-1}function Lw(e){if(!Mo(e)||Ww(e))return!1;var t=Gw(e)||dw(e)?yw:uw;return t.test(Kw(e))}function Dw(e,t,r,n){if(!Mo(e))return e;t=kw(t,e)?[t]:Mw(t);for(var o=-1,i=t.length,s=i-1,u=e;u!=null&&++o<i;){var f=Hw(t[o]),a=r;if(o!=s){var c=u[f];a=n?n(c,f,u):void 0,a===void 0&&(a=Mo(c)?c:$w(t[o+1])?[]:{})}Bw(u,f,a),u=u[f]}return e}function Uw(e){if(typeof e=="string")return e;if(Wu(e))return xf?xf.call(e):"";var t=e+"";return t=="0"&&1/e==-ed?"-0":t}function Mw(e){return sd(e)?e:qw(e)}function ms(e,t){var r=e.__data__;return jw(t)?r[typeof t=="string"?"string":"hash"]:r.map}function id(e,t){var r=hw(e,t);return Lw(r)?r:void 0}function $w(e,t){return t=t==null?QE:t,!!t&&(typeof e=="number"||cw.test(e))&&e>-1&&e%1==0&&e<t}function kw(e,t){if(sd(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Wu(e)?!0:nw.test(e)||!rw.test(e)||t!=null&&e in Object(t)}function jw(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ww(e){return!!Tf&&Tf in e}var qw=ju(function(e){e=Jw(e);var t=[];return iw.test(e)&&t.push(""),e.replace(ow,function(r,n,o,i){t.push(o?i.replace(aw,"$1"):n||r)}),t});function Hw(e){if(typeof e=="string"||Wu(e))return e;var t=e+"";return t=="0"&&1/e==-ed?"-0":t}function Kw(e){if(e!=null){try{return rd.call(e)}catch{}try{return e+""}catch{}}return""}function ju(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(XE);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s),s};return r.cache=new(ju.Cache||ln),r}ju.Cache=ln;function od(e,t){return e===t||e!==e&&t!==t}var sd=Array.isArray;function Gw(e){var t=Mo(e)?nd.call(e):"";return t==ZE||t==ew}function Mo(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Vw(e){return!!e&&typeof e=="object"}function Wu(e){return typeof e=="symbol"||Vw(e)&&nd.call(e)==tw}function Jw(e){return e==null?"":Uw(e)}function Yw(e,t,r){return e==null?e:Dw(e,t,r)}var zw=Yw,Xw="Expected a function",ad="__lodash_hash_undefined__",ud=1/0,Qw="[object Function]",Zw="[object GeneratorFunction]",eb="[object Symbol]",tb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rb=/^\w*$/,nb=/^\./,ib=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ob=/[\\^$.*+?()[\]{}|]/g,sb=/\\(\\)?/g,ab=/^\[object .+?Constructor\]$/,ub=typeof H=="object"&&H&&H.Object===Object&&H,cb=typeof self=="object"&&self&&self.Object===Object&&self,qu=ub||cb||Function("return this")();function fb(e,t){return e==null?void 0:e[t]}function lb(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}var hb=Array.prototype,db=Function.prototype,cd=Object.prototype,ma=qu["__core-js_shared__"],Nf=function(){var e=/[^.]+$/.exec(ma&&ma.keys&&ma.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),fd=db.toString,_s=cd.hasOwnProperty,ld=cd.toString,pb=RegExp("^"+fd.call(_s).replace(ob,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rf=qu.Symbol,gb=hb.splice,yb=dd(qu,"Map"),$i=dd(Object,"create"),Cf=Rf?Rf.prototype:void 0,Pf=Cf?Cf.toString:void 0;function un(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function mb(){this.__data__=$i?$i(null):{}}function _b(e){return this.has(e)&&delete this.__data__[e]}function vb(e){var t=this.__data__;if($i){var r=t[e];return r===ad?void 0:r}return _s.call(t,e)?t[e]:void 0}function Eb(e){var t=this.__data__;return $i?t[e]!==void 0:_s.call(t,e)}function wb(e,t){var r=this.__data__;return r[e]=$i&&t===void 0?ad:t,this}un.prototype.clear=mb;un.prototype.delete=_b;un.prototype.get=vb;un.prototype.has=Eb;un.prototype.set=wb;function ti(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function bb(){this.__data__=[]}function Ab(e){var t=this.__data__,r=vs(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():gb.call(t,r,1),!0}function Sb(e){var t=this.__data__,r=vs(t,e);return r<0?void 0:t[r][1]}function Tb(e){return vs(this.__data__,e)>-1}function Ib(e,t){var r=this.__data__,n=vs(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}ti.prototype.clear=bb;ti.prototype.delete=Ab;ti.prototype.get=Sb;ti.prototype.has=Tb;ti.prototype.set=Ib;function hn(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ob(){this.__data__={hash:new un,map:new(yb||ti),string:new un}}function xb(e){return Es(this,e).delete(e)}function Nb(e){return Es(this,e).get(e)}function Rb(e){return Es(this,e).has(e)}function Cb(e,t){return Es(this,e).set(e,t),this}hn.prototype.clear=Ob;hn.prototype.delete=xb;hn.prototype.get=Nb;hn.prototype.has=Rb;hn.prototype.set=Cb;function vs(e,t){for(var r=e.length;r--;)if(qb(e[r][0],t))return r;return-1}function Pb(e,t){t=pd(t,e)?[t]:hd(t);for(var r=0,n=t.length;e!=null&&r<n;)e=e[gd(t[r++])];return r&&r==n?e:void 0}function Fb(e){if(!md(e)||Mb(e))return!1;var t=Hb(e)||lb(e)?pb:ab;return t.test(jb(e))}function Bb(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}function Lb(e){if(typeof e=="string")return e;if(Ku(e))return Pf?Pf.call(e):"";var t=e+"";return t=="0"&&1/e==-ud?"-0":t}function Db(e,t){t=pd(t,e)?[t]:hd(t),e=$b(e,t);var r=gd(Wb(t));return!(e!=null&&_s.call(e,r))||delete e[r]}function hd(e){return yd(e)?e:kb(e)}function Es(e,t){var r=e.__data__;return Ub(t)?r[typeof t=="string"?"string":"hash"]:r.map}function dd(e,t){var r=fb(e,t);return Fb(r)?r:void 0}function pd(e,t){if(yd(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Ku(e)?!0:rb.test(e)||!tb.test(e)||t!=null&&e in Object(t)}function Ub(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Mb(e){return!!Nf&&Nf in e}function $b(e,t){return t.length==1?e:Pb(e,Bb(t,0,-1))}var kb=Hu(function(e){e=Gb(e);var t=[];return nb.test(e)&&t.push(""),e.replace(ib,function(r,n,o,i){t.push(o?i.replace(sb,"$1"):n||r)}),t});function gd(e){if(typeof e=="string"||Ku(e))return e;var t=e+"";return t=="0"&&1/e==-ud?"-0":t}function jb(e){if(e!=null){try{return fd.call(e)}catch{}try{return e+""}catch{}}return""}function Wb(e){var t=e?e.length:0;return t?e[t-1]:void 0}function Hu(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(Xw);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s),s};return r.cache=new(Hu.Cache||hn),r}Hu.Cache=hn;function qb(e,t){return e===t||e!==e&&t!==t}var yd=Array.isArray;function Hb(e){var t=md(e)?ld.call(e):"";return t==Qw||t==Zw}function md(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Kb(e){return!!e&&typeof e=="object"}function Ku(e){return typeof e=="symbol"||Kb(e)&&ld.call(e)==eb}function Gb(e){return e==null?"":Lb(e)}function Vb(e,t){return e==null?!0:Db(e,t)}var Jb=Vb,eu={exports:{}};(function(e,t){var r=200,n="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",s="[object Array]",u="[object Boolean]",f="[object Date]",a="[object Error]",c="[object Function]",d="[object GeneratorFunction]",g="[object Map]",v="[object Number]",T="[object Object]",I="[object Promise]",_="[object RegExp]",w="[object Set]",P="[object String]",R="[object Symbol]",N="[object WeakMap]",D="[object ArrayBuffer]",$="[object DataView]",q="[object Float32Array]",M="[object Float64Array]",G="[object Int8Array]",Q="[object Int16Array]",oe="[object Int32Array]",he="[object Uint8Array]",te="[object Uint8ClampedArray]",Se="[object Uint16Array]",Re="[object Uint32Array]",we=/[\\^$.*+?()[\]{}|]/g,z=/\w*$/,re=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,W={};W[i]=W[s]=W[D]=W[$]=W[u]=W[f]=W[q]=W[M]=W[G]=W[Q]=W[oe]=W[g]=W[v]=W[T]=W[_]=W[w]=W[P]=W[R]=W[he]=W[te]=W[Se]=W[Re]=!0,W[a]=W[c]=W[N]=!1;var Te=typeof H=="object"&&H&&H.Object===Object&&H,Ft=typeof self=="object"&&self&&self.Object===Object&&self,Oe=Te||Ft||Function("return this")(),mr=t&&!t.nodeType&&t,dn=mr&&!0&&e&&!e.nodeType&&e,ri=dn&&dn.exports===mr;function Ge(m,x){return m.set(x[0],x[1]),m}function _r(m,x){return m.add(x),m}function pn(m,x){for(var F=-1,K=m?m.length:0;++F<K&&x(m[F],F,m)!==!1;);return m}function Bt(m,x){for(var F=-1,K=x.length,Pe=m.length;++F<K;)m[Pe+F]=x[F];return m}function Lt(m,x,F,K){var Pe=-1,Je=m?m.length:0;for(K&&Je&&(F=m[++Pe]);++Pe<Je;)F=x(F,m[Pe],Pe,m);return F}function qe(m,x){for(var F=-1,K=Array(m);++F<m;)K[F]=x(F);return K}function b(m,x){return m==null?void 0:m[x]}function S(m){var x=!1;if(m!=null&&typeof m.toString!="function")try{x=!!(m+"")}catch{}return x}function p(m){var x=-1,F=Array(m.size);return m.forEach(function(K,Pe){F[++x]=[Pe,K]}),F}function l(m,x){return function(F){return m(x(F))}}function h(m){var x=-1,F=Array(m.size);return m.forEach(function(K){F[++x]=K}),F}var y=Array.prototype,E=Function.prototype,A=Object.prototype,O=Oe["__core-js_shared__"],C=function(){var m=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),U=E.toString,B=A.hasOwnProperty,k=A.toString,j=RegExp("^"+U.call(B).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=ri?Oe.Buffer:void 0,ue=Oe.Symbol,ce=Oe.Uint8Array,me=l(Object.getPrototypeOf,Object),ut=Object.create,vr=A.propertyIsEnumerable,Vi=y.splice,Er=Object.getOwnPropertySymbols,Ji=ne?ne.isBuffer:void 0,Ve=l(Object.keys,Object),tt=mn(Oe,"DataView"),wr=mn(Oe,"Map"),xs=mn(Oe,"Promise"),Ns=mn(Oe,"Set"),Rs=mn(Oe,"WeakMap"),ni=mn(Object,"create"),np=jr(tt),ip=jr(wr),op=jr(xs),sp=jr(Ns),ap=jr(Rs),ec=ue?ue.prototype:void 0,tc=ec?ec.valueOf:void 0;function $r(m){var x=-1,F=m?m.length:0;for(this.clear();++x<F;){var K=m[x];this.set(K[0],K[1])}}function up(){this.__data__=ni?ni(null):{}}function cp(m){return this.has(m)&&delete this.__data__[m]}function fp(m){var x=this.__data__;if(ni){var F=x[m];return F===n?void 0:F}return B.call(x,m)?x[m]:void 0}function lp(m){var x=this.__data__;return ni?x[m]!==void 0:B.call(x,m)}function hp(m,x){var F=this.__data__;return F[m]=ni&&x===void 0?n:x,this}$r.prototype.clear=up,$r.prototype.delete=cp,$r.prototype.get=fp,$r.prototype.has=lp,$r.prototype.set=hp;function or(m){var x=-1,F=m?m.length:0;for(this.clear();++x<F;){var K=m[x];this.set(K[0],K[1])}}function dp(){this.__data__=[]}function pp(m){var x=this.__data__,F=Yi(x,m);if(F<0)return!1;var K=x.length-1;return F==K?x.pop():Vi.call(x,F,1),!0}function gp(m){var x=this.__data__,F=Yi(x,m);return F<0?void 0:x[F][1]}function yp(m){return Yi(this.__data__,m)>-1}function mp(m,x){var F=this.__data__,K=Yi(F,m);return K<0?F.push([m,x]):F[K][1]=x,this}or.prototype.clear=dp,or.prototype.delete=pp,or.prototype.get=gp,or.prototype.has=yp,or.prototype.set=mp;function gn(m){var x=-1,F=m?m.length:0;for(this.clear();++x<F;){var K=m[x];this.set(K[0],K[1])}}function _p(){this.__data__={hash:new $r,map:new(wr||or),string:new $r}}function vp(m){return zi(this,m).delete(m)}function Ep(m){return zi(this,m).get(m)}function wp(m){return zi(this,m).has(m)}function bp(m,x){return zi(this,m).set(m,x),this}gn.prototype.clear=_p,gn.prototype.delete=vp,gn.prototype.get=Ep,gn.prototype.has=wp,gn.prototype.set=bp;function yn(m){this.__data__=new or(m)}function Ap(){this.__data__=new or}function Sp(m){return this.__data__.delete(m)}function Tp(m){return this.__data__.get(m)}function Ip(m){return this.__data__.has(m)}function Op(m,x){var F=this.__data__;if(F instanceof or){var K=F.__data__;if(!wr||K.length<r-1)return K.push([m,x]),this;F=this.__data__=new gn(K)}return F.set(m,x),this}yn.prototype.clear=Ap,yn.prototype.delete=Sp,yn.prototype.get=Tp,yn.prototype.has=Ip,yn.prototype.set=Op;function xp(m,x){var F=Fs(m)||Qp(m)?qe(m.length,String):[],K=F.length,Pe=!!K;for(var Je in m)(x||B.call(m,Je))&&!(Pe&&(Je=="length"||Jp(Je,K)))&&F.push(Je);return F}function rc(m,x,F){var K=m[x];(!(B.call(m,x)&&sc(K,F))||F===void 0&&!(x in m))&&(m[x]=F)}function Yi(m,x){for(var F=m.length;F--;)if(sc(m[F][0],x))return F;return-1}function Np(m,x){return m&&nc(x,Bs(x),m)}function Cs(m,x,F,K,Pe,Je,mt){var rt;if(K&&(rt=Je?K(m,Pe,Je,mt):K(m)),rt!==void 0)return rt;if(!Xi(m))return m;var cc=Fs(m);if(cc){if(rt=Kp(m),!x)return Wp(m,rt)}else{var _n=kr(m),fc=_n==c||_n==d;if(eg(m))return Lp(m,x);if(_n==T||_n==i||fc&&!Je){if(S(m))return Je?m:{};if(rt=Gp(fc?{}:m),!x)return qp(m,Np(rt,m))}else{if(!W[_n])return Je?m:{};rt=Vp(m,_n,Cs,x)}}mt||(mt=new yn);var lc=mt.get(m);if(lc)return lc;if(mt.set(m,rt),!cc)var hc=F?Hp(m):Bs(m);return pn(hc||m,function(Ls,Qi){hc&&(Qi=Ls,Ls=m[Qi]),rc(rt,Qi,Cs(Ls,x,F,K,Qi,m,mt))}),rt}function Rp(m){return Xi(m)?ut(m):{}}function Cp(m,x,F){var K=x(m);return Fs(m)?K:Bt(K,F(m))}function Pp(m){return k.call(m)}function Fp(m){if(!Xi(m)||zp(m))return!1;var x=uc(m)||S(m)?j:re;return x.test(jr(m))}function Bp(m){if(!oc(m))return Ve(m);var x=[];for(var F in Object(m))B.call(m,F)&&F!="constructor"&&x.push(F);return x}function Lp(m,x){if(x)return m.slice();var F=new m.constructor(m.length);return m.copy(F),F}function Ps(m){var x=new m.constructor(m.byteLength);return new ce(x).set(new ce(m)),x}function Dp(m,x){var F=x?Ps(m.buffer):m.buffer;return new m.constructor(F,m.byteOffset,m.byteLength)}function Up(m,x,F){var K=x?F(p(m),!0):p(m);return Lt(K,Ge,new m.constructor)}function Mp(m){var x=new m.constructor(m.source,z.exec(m));return x.lastIndex=m.lastIndex,x}function $p(m,x,F){var K=x?F(h(m),!0):h(m);return Lt(K,_r,new m.constructor)}function kp(m){return tc?Object(tc.call(m)):{}}function jp(m,x){var F=x?Ps(m.buffer):m.buffer;return new m.constructor(F,m.byteOffset,m.length)}function Wp(m,x){var F=-1,K=m.length;for(x||(x=Array(K));++F<K;)x[F]=m[F];return x}function nc(m,x,F,K){F||(F={});for(var Pe=-1,Je=x.length;++Pe<Je;){var mt=x[Pe],rt=K?K(F[mt],m[mt],mt,F,m):void 0;rc(F,mt,rt===void 0?m[mt]:rt)}return F}function qp(m,x){return nc(m,ic(m),x)}function Hp(m){return Cp(m,Bs,ic)}function zi(m,x){var F=m.__data__;return Yp(x)?F[typeof x=="string"?"string":"hash"]:F.map}function mn(m,x){var F=b(m,x);return Fp(F)?F:void 0}var ic=Er?l(Er,Object):ng,kr=Pp;(tt&&kr(new tt(new ArrayBuffer(1)))!=$||wr&&kr(new wr)!=g||xs&&kr(xs.resolve())!=I||Ns&&kr(new Ns)!=w||Rs&&kr(new Rs)!=N)&&(kr=function(m){var x=k.call(m),F=x==T?m.constructor:void 0,K=F?jr(F):void 0;if(K)switch(K){case np:return $;case ip:return g;case op:return I;case sp:return w;case ap:return N}return x});function Kp(m){var x=m.length,F=m.constructor(x);return x&&typeof m[0]=="string"&&B.call(m,"index")&&(F.index=m.index,F.input=m.input),F}function Gp(m){return typeof m.constructor=="function"&&!oc(m)?Rp(me(m)):{}}function Vp(m,x,F,K){var Pe=m.constructor;switch(x){case D:return Ps(m);case u:case f:return new Pe(+m);case $:return Dp(m,K);case q:case M:case G:case Q:case oe:case he:case te:case Se:case Re:return jp(m,K);case g:return Up(m,K,F);case v:case P:return new Pe(m);case _:return Mp(m);case w:return $p(m,K,F);case R:return kp(m)}}function Jp(m,x){return x=x==null?o:x,!!x&&(typeof m=="number"||Z.test(m))&&m>-1&&m%1==0&&m<x}function Yp(m){var x=typeof m;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?m!=="__proto__":m===null}function zp(m){return!!C&&C in m}function oc(m){var x=m&&m.constructor,F=typeof x=="function"&&x.prototype||A;return m===F}function jr(m){if(m!=null){try{return U.call(m)}catch{}try{return m+""}catch{}}return""}function Xp(m){return Cs(m,!0,!0)}function sc(m,x){return m===x||m!==m&&x!==x}function Qp(m){return Zp(m)&&B.call(m,"callee")&&(!vr.call(m,"callee")||k.call(m)==i)}var Fs=Array.isArray;function ac(m){return m!=null&&tg(m.length)&&!uc(m)}function Zp(m){return rg(m)&&ac(m)}var eg=Ji||ig;function uc(m){var x=Xi(m)?k.call(m):"";return x==c||x==d}function tg(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=o}function Xi(m){var x=typeof m;return!!m&&(x=="object"||x=="function")}function rg(m){return!!m&&typeof m=="object"}function Bs(m){return ac(m)?xp(m):Bp(m)}function ng(){return[]}function ig(){return!1}e.exports=Xp})(eu,eu.exports);var Yb=eu.exports;function Fn(e){return e===void 0&&(e=""),(e?e+"_":"")+ +new Date+"_"+Math.random()}var zb=function(){function e(t){this.close=t.close,this.onChange=t.onChange,this.onError=t.onError,t.debug&&Object.defineProperty(this,"virtualClient",{get:function(){return t.virtualClient}})}return e}(),Ff=function(){function e(t){var r=t.id,n=t.docChanges,o=t.docs,i=t.msgType,s=t.type,u,f;Object.defineProperties(this,{id:{get:function(){return r},enumerable:!0},docChanges:{get:function(){return u||(u=JSON.parse(JSON.stringify(n))),u},enumerable:!0},docs:{get:function(){return f||(f=JSON.parse(JSON.stringify(o))),f},enumerable:!0},msgType:{get:function(){return i},enumerable:!0},type:{get:function(){return s},enumerable:!0}})}return e}(),ws=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xb=function(e){ws(t,e);function t(r){var n=e.call(this,"Watch Error "+JSON.stringify(r.msgData)+" (requestid: "+r.requestId+")")||this;return n.isRealtimeErrorMessageError=!0,n.payload=r,n}return t}(Error),Bf=function(e){return e==null?void 0:e.isRealtimeErrorMessageError},Qb=function(e){ws(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="timeout",r.payload=null,r.generic=!0,r}return t}(Error),Zb=function(e){return e.type==="timeout"},e1=function(e){ws(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cancelled",r.payload=null,r.generic=!0,r}return t}(Error),t1=function(e){return e.type==="cancelled"},At=function(e){ws(t,e);function t(r){var n=e.call(this,r.errMsg)||this;return n.errCode="UNKNOWN_ERROR",Object.defineProperties(n,{message:{get:function(){return"errCode: "+this.errCode+" "+(ot[this.errCode]||"")+" | errMsg: "+this.errMsg},set:function(o){this.errMsg=o}}}),n.errCode=r.errCode||"UNKNOWN_ERROR",n.errMsg=r.errMsg,n}return Object.defineProperty(t.prototype,"message",{get:function(){return"errCode: "+this.errCode+" | errMsg: "+this.errMsg},set:function(r){this.errMsg=r},enumerable:!1,configurable:!0}),t}(Error),ot={UNKNOWN_ERROR:"UNKNOWN_ERROR",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:"SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:"SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:"SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:"SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:"SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:"SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR"},tu=function(e){return e===void 0&&(e=0),new Promise(function(t){return setTimeout(t,e)})},ft=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},nt=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Lf=globalThis&&globalThis.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,u=i.length;s<u;s++,o++)n[o]=i[s];return n},_e;(function(e){e.LOGGINGIN="LOGGINGIN",e.INITING="INITING",e.REBUILDING="REBUILDING",e.ACTIVE="ACTIVE",e.ERRORED="ERRORED",e.CLOSING="CLOSING",e.CLOSED="CLOSED",e.PAUSED="PAUSED",e.RESUMING="RESUMING"})(_e||(_e={}));var r1=100,ho=2,n1=2,i1=10*1e3,o1=10*1e3,s1=10*1e3,a1=function(){function e(t){var r=this;this.watchStatus=_e.INITING,this._login=function(n,o){return ft(r,void 0,void 0,function(){var i;return nt(this,function(s){switch(s.label){case 0:return this.watchStatus=_e.LOGGINGIN,[4,this.login(n,o)];case 1:return i=s.sent(),this.envId||(this.envId=i.envId),[2,i]}})})},this.initWatch=function(n){return ft(r,void 0,void 0,function(){var o,i=this;return nt(this,function(s){switch(s.label){case 0:if(this._initWatchPromise)return[2,this._initWatchPromise];this._initWatchPromise=new Promise(function(u,f){return ft(i,void 0,void 0,function(){var a,c,d,g,v,T,I,_,w,P,R;return nt(this,function(N){switch(N.label){case 0:return N.trys.push([0,3,,4]),this.watchStatus===_e.PAUSED?(console.log("[realtime] initWatch cancelled on pause"),[2,u()]):[4,this._login(this.envId,n)];case 1:return a=N.sent().envId,this.watchStatus===_e.PAUSED?(console.log("[realtime] initWatch cancelled on pause"),[2,u()]):(this.watchStatus=_e.INITING,c={watchId:this.watchId,requestId:Fn(),msgType:"INIT_WATCH",msgData:{envId:a,collName:this.collectionName,query:this.query,limit:this.limit,orderBy:this.orderBy}},[4,this.send({msg:c,waitResponse:!0,skipOnMessage:!0,timeout:o1})]);case 2:if(d=N.sent(),g=d.msgData,v=g.events,T=g.currEvent,this.sessionInfo={queryID:d.msgData.queryID,currentEventId:T-1,currentDocs:[]},v.length>0){for(I=0,_=v;I<_.length;I++)w=_[I],w.ID=T;this.handleServerEvents(d)}else this.sessionInfo.currentEventId=T,P=new Ff({id:T,docChanges:[],docs:[],type:"init"}),this.listener.onChange(P),this.scheduleSendACK();return this.onWatchStart(this,this.sessionInfo.queryID),this.watchStatus=_e.ACTIVE,this._availableRetries.INIT_WATCH=ho,u(),[3,4];case 3:return R=N.sent(),this.handleWatchEstablishmentError(R,{operationName:"INIT_WATCH",resolve:u,reject:f}),[3,4];case 4:return[2]}})})}),o=!1,s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this._initWatchPromise];case 2:return s.sent(),o=!0,[3,4];case 3:return this._initWatchPromise=void 0,[7];case 4:return console.log("[realtime] initWatch "+(o?"success":"fail")),[2]}})})},this.rebuildWatch=function(n){return ft(r,void 0,void 0,function(){var o,i=this;return nt(this,function(s){switch(s.label){case 0:if(this._rebuildWatchPromise)return[2,this._rebuildWatchPromise];this._rebuildWatchPromise=new Promise(function(u,f){return ft(i,void 0,void 0,function(){var a,c,d,g;return nt(this,function(v){switch(v.label){case 0:return v.trys.push([0,3,,4]),this.watchStatus===_e.PAUSED?(console.log("[realtime] rebuildWatch cancelled on pause"),[2,u()]):[4,this._login(this.envId,n)];case 1:if(a=v.sent().envId,!this.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");return this.watchStatus===_e.PAUSED?(console.log("[realtime] rebuildWatch cancelled on pause"),[2,u()]):(this.watchStatus=_e.REBUILDING,c={watchId:this.watchId,requestId:Fn(),msgType:"REBUILD_WATCH",msgData:{envId:a,collName:this.collectionName,queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:c,waitResponse:!0,skipOnMessage:!1,timeout:s1})]);case 2:return d=v.sent(),this.handleServerEvents(d),this.watchStatus=_e.ACTIVE,this._availableRetries.REBUILD_WATCH=ho,u(),[3,4];case 3:return g=v.sent(),this.handleWatchEstablishmentError(g,{operationName:"REBUILD_WATCH",resolve:u,reject:f}),[3,4];case 4:return[2]}})})}),o=!1,s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this._rebuildWatchPromise];case 2:return s.sent(),o=!0,[3,4];case 3:return this._rebuildWatchPromise=void 0,[7];case 4:return console.log("[realtime] rebuildWatch "+(o?"success":"fail")),[2]}})})},this.handleWatchEstablishmentError=function(n,o){return ft(r,void 0,void 0,function(){var i,s,u,f=this;return nt(this,function(a){return i=o.operationName==="INIT_WATCH",s=function(){f.closeWithError(new At({errCode:i?ot.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:ot.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:n})),o.reject(n)},u=function(c){f.useRetryTicket(o.operationName)?i?(f._initWatchPromise=void 0,o.resolve(f.initWatch(c))):(f._rebuildWatchPromise=void 0,o.resolve(f.rebuildWatch(c))):s()},this.handleCommonError(n,{onSignError:function(){return u(!0)},onTimeoutError:function(){return u(!1)},onNotRetryableError:s,onCancelledError:o.reject,onUnknownError:function(){return ft(f,void 0,void 0,function(){var c,d=this;return nt(this,function(g){switch(g.label){case 0:return g.trys.push([0,8,,9]),c=function(){return ft(d,void 0,void 0,function(){return nt(this,function(v){switch(v.label){case 0:return this.pause(),[4,this.onceWSConnected()];case 1:return v.sent(),u(!0),[2]}})})},this.isWSConnected()?[3,2]:[4,c()];case 1:return g.sent(),[3,7];case 2:return[4,tu(r1)];case 3:return g.sent(),this.watchStatus!==_e.PAUSED?[3,4]:(o.reject(new e1(o.operationName+" cancelled due to pause after unknownError")),[3,7]);case 4:return this.isWSConnected()?[3,6]:[4,c()];case 5:return g.sent(),[3,7];case 6:u(!1),g.label=7;case 7:return[3,9];case 8:return g.sent(),u(!0),[3,9];case 9:return[2]}})})}}),[2]})})},this.closeWatch=function(){return ft(r,void 0,void 0,function(){var n,o,i;return nt(this,function(s){switch(s.label){case 0:if(n=this.sessionInfo?this.sessionInfo.queryID:"",this.watchStatus!==_e.ACTIVE)return this.watchStatus=_e.CLOSED,this.onWatchClose(this,n),[2];s.label=1;case 1:return s.trys.push([1,3,4,5]),this.watchStatus=_e.CLOSING,o={watchId:this.watchId,requestId:Fn(),msgType:"CLOSE_WATCH",msgData:null},[4,this.send({msg:o})];case 2:return s.sent(),this.sessionInfo=void 0,this.watchStatus=_e.CLOSED,[3,5];case 3:return i=s.sent(),this.closeWithError(new At({errCode:ot.SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL,errMsg:i})),[3,5];case 4:return this.onWatchClose(this,n),[7];case 5:return[2]}})})},this.scheduleSendACK=function(){r.clearACKSchedule(),r._ackTimeoutId=setTimeout(function(){r._waitExpectedTimeoutId?r.scheduleSendACK():r.sendACK()},i1)},this.clearACKSchedule=function(){r._ackTimeoutId&&clearTimeout(r._ackTimeoutId)},this.sendACK=function(){return ft(r,void 0,void 0,function(){var n,o,i;return nt(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.watchStatus!==_e.ACTIVE?(this.scheduleSendACK(),[2]):this.sessionInfo?(n={watchId:this.watchId,requestId:Fn(),msgType:"CHECK_LAST",msgData:{queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:n})]):(console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)"),[2]);case 1:return s.sent(),this.scheduleSendACK(),[3,3];case 2:if(o=s.sent(),Bf(o))switch(i=o.payload,i.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return this.rebuildWatch(),[2];case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return this.closeWithError(new At({errCode:ot.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:i.msgData.code})),[2]}return this._availableRetries.CHECK_LAST&&this._availableRetries.CHECK_LAST>0?(this._availableRetries.CHECK_LAST--,this.scheduleSendACK()):this.closeWithError(new At({errCode:ot.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:o})),[3,3];case 3:return[2]}})})},this.handleCommonError=function(n,o){if(Bf(n)){var i=n.payload;switch(i.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":{o.onSignError(n);return}case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":{o.onNotRetryableError(n);return}default:{o.onNotRetryableError(n);return}}}else if(Zb(n)){o.onTimeoutError(n);return}else if(t1(n)){o.onCancelledError(n);return}o.onUnknownError(n)},this.watchId="watchid_"+ +new Date+"_"+Math.random(),this.envId=t.envId,this.collectionName=t.collectionName,this.query=t.query,this.limit=t.limit,this.orderBy=t.orderBy,this.send=t.send,this.login=t.login,this.isWSConnected=t.isWSConnected,this.onceWSConnected=t.onceWSConnected,this.getWaitExpectedTimeoutLength=t.getWaitExpectedTimeoutLength,this.onWatchStart=t.onWatchStart,this.onWatchClose=t.onWatchClose,this.debug=t.debug,this._availableRetries={INIT_WATCH:ho,REBUILD_WATCH:ho,CHECK_LAST:n1},this.listener=new zb({close:this.closeWatch,onChange:t.onChange,onError:t.onError,debug:this.debug,virtualClient:this}),this.initWatch()}return e.prototype.onMessage=function(t){var r=this;switch(this.watchStatus){case _e.PAUSED:{if(t.msgType!=="ERROR")return;break}case _e.LOGGINGIN:case _e.INITING:case _e.REBUILDING:{console.warn("[realtime listener] internal non-fatal error: unexpected message received while "+this.watchStatus);return}case _e.CLOSED:{console.warn("[realtime listener] internal non-fatal error: unexpected message received when the watch has closed");return}case _e.ERRORED:{console.warn("[realtime listener] internal non-fatal error: unexpected message received when the watch has ended with error");return}}if(!this.sessionInfo){console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.");return}switch(this.scheduleSendACK(),t.msgType){case"NEXT_EVENT":{console.warn("nextevent "+t.msgData.currEvent+" ignored",t),this.handleServerEvents(t);break}case"CHECK_EVENT":{this.sessionInfo.currentEventId<t.msgData.currEvent&&(this.sessionInfo.expectEventId=t.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout(function(){r.rebuildWatch()},this.getWaitExpectedTimeoutLength()),console.log("[realtime] waitExpectedTimeoutLength "+this.getWaitExpectedTimeoutLength()));break}case"ERROR":{this.closeWithError(new At({errCode:ot.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:t.msgData.code+" - "+t.msgData.message}));break}default:{console.warn("[realtime listener] virtual client receive unexpected msg "+t.msgType+": ",t);break}}},e.prototype.closeWithError=function(t){this.watchStatus=_e.ERRORED,this.clearACKSchedule(),this.listener.onError(t),this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),console.log("[realtime] client closed ("+this.collectionName+" "+this.query+") (watchId "+this.watchId+")")},e.prototype.pause=function(){this.watchStatus=_e.PAUSED,console.log("[realtime] client paused ("+this.collectionName+" "+this.query+") (watchId "+this.watchId+")")},e.prototype.resume=function(){return ft(this,void 0,void 0,function(){var t;return nt(this,function(r){switch(r.label){case 0:this.watchStatus=_e.RESUMING,console.log("[realtime] client resuming with "+(this.sessionInfo?"REBUILD_WATCH":"INIT_WATCH")+" ("+this.collectionName+" "+this.query+") ("+this.watchId+")"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.sessionInfo?this.rebuildWatch():this.initWatch()];case 2:return r.sent(),console.log("[realtime] client successfully resumed ("+this.collectionName+" "+this.query+") ("+this.watchId+")"),[3,4];case 3:return t=r.sent(),console.error("[realtime] client resume failed ("+this.collectionName+" "+this.query+") ("+this.watchId+")",t),[3,4];case 4:return[2]}})})},e.prototype.useRetryTicket=function(t){return this._availableRetries[t]&&this._availableRetries[t]>0?(this._availableRetries[t]--,console.log("[realtime] "+t+" use a retry ticket, now only "+this._availableRetries[t]+" retry left"),!0):!1},e.prototype.handleServerEvents=function(t){return ft(this,void 0,void 0,function(){var r;return nt(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.scheduleSendACK(),[4,this._handleServerEvents(t)];case 1:return n.sent(),this._postHandleServerEventsValidityCheck(t),[3,3];case 2:throw r=n.sent(),console.error("[realtime listener] internal non-fatal error: handle server events failed with error: ",r),r;case 3:return[2]}})})},e.prototype._handleServerEvents=function(t){return ft(this,void 0,void 0,function(){var r,n,o,i,s,u,f,a,c,d,g,v;return nt(this,function(T){switch(T.label){case 0:if(r=t.requestId,n=t.msgData.events,o=t.msgType,!n.length||!this.sessionInfo)return[2];i=this.sessionInfo;try{s=n.map(u1)}catch(I){return this.closeWithError(new At({errCode:ot.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:I})),[2]}u=Lf(i.currentDocs),f=!1,a=function(I,_){var w,P,$,D,R,N,D,q,q,$,$,q,M,M,G,Q,oe;return nt(this,function(he){switch(he.label){case 0:return w=s[I],i.currentEventId>=w.id?(!s[I-1]||w.id>s[I-1].id?console.warn("[realtime] duplicate event received, cur "+i.currentEventId+" but got "+w.id):console.error("[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId "+r+")"),[2,"continue"]):[3,1];case 1:if(i.currentEventId!==w.id-1)return[3,2];switch(w.dataType){case"update":{if(!w.doc)switch(w.queueType){case"update":case"dequeue":{if(P=u.find(function(te){return te._id===w.docId}),P){if($=Yb(P),w.updatedFields)for(D in w.updatedFields)zw($,D,w.updatedFields[D]);if(w.removedFields)for(R=0,N=w.removedFields;R<N.length;R++)D=N[R],Jb($,D);w.doc=$}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated.");break}case"enqueue":throw q=new At({errCode:ot.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId '+t.requestId+")"}),c.closeWithError(q),q}break}case"replace":{if(!w.doc)throw q=new At({errCode:ot.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="replace" (requestId '+t.requestId+")"}),c.closeWithError(q),q;break}case"remove":{$=u.find(function(te){return te._id===w.docId}),$?w.doc=$:console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated.");break}case"limit":{if(!w.doc)switch(w.queueType){case"dequeue":{$=u.find(function(te){return te._id===w.docId}),$?w.doc=$:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType event where no doc is associated.");break}case"enqueue":throw q=new At({errCode:ot.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="limit" and queueType="enqueue" (requestId '+t.requestId+")"}),c.closeWithError(q),q}break}}switch(w.queueType){case"init":{f?u.push(w.doc):(f=!0,u=[w.doc]);break}case"enqueue":{u.push(w.doc);break}case"dequeue":{M=u.findIndex(function(te){return te._id===w.docId}),M>-1?u.splice(M,1):console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated.");break}case"update":{M=u.findIndex(function(te){return te._id===w.docId}),M>-1?u[M]=w.doc:console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated.");break}}return(I===_-1||s[I+1]&&s[I+1].id!==w.id)&&(G=Lf(u),Q=s.slice(0,I+1).filter(function(te){return te.id===w.id}),c.sessionInfo.currentEventId=w.id,c.sessionInfo.currentDocs=u,oe=new Ff({id:w.id,docChanges:Q,docs:G,msgType:o}),c.listener.onChange(oe)),[3,4];case 2:return console.warn("[realtime listener] event received is out of order, cur "+c.sessionInfo.currentEventId+" but got "+w.id),[4,c.rebuildWatch()];case 3:return he.sent(),[2,{value:void 0}];case 4:return[2]}})},c=this,d=0,g=s.length,T.label=1;case 1:return d<g?[5,a(d,g)]:[3,4];case 2:if(v=T.sent(),typeof v=="object")return[2,v.value];T.label=3;case 3:return d++,[3,1];case 4:return[2]}})})},e.prototype._postHandleServerEventsValidityCheck=function(t){if(!this.sessionInfo){console.error("[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur");return}if(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<t.msgData.currEvent){console.warn("[realtime listener] internal non-fatal error: client eventId does not match with server event id after server event handling");return}},e.prototype.clearWaitExpectedEvent=function(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)},e}();function u1(e){var t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&e.Doc!=="{}"?JSON.parse(e.Doc):void 0};return e.DataType==="update"&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=JSON.parse(e.removedFields))),t}var _d={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3050:{code:3050,name:"Server Close",description:"The client is terminating the connection because no heartbeat response is received from the server"}},bt;(function(e){e[e.NormalClosure=1e3]="NormalClosure",e[e.GoingAway=1001]="GoingAway",e[e.ProtocolError=1002]="ProtocolError",e[e.UnsupportedData=1003]="UnsupportedData",e[e.NoStatusReceived=1005]="NoStatusReceived",e[e.AbnormalClosure=1006]="AbnormalClosure",e[e.InvalidFramePayloadData=1007]="InvalidFramePayloadData",e[e.PolicyViolation=1008]="PolicyViolation",e[e.MessageTooBig=1009]="MessageTooBig",e[e.MissingExtension=1010]="MissingExtension",e[e.InternalError=1011]="InternalError",e[e.ServiceRestart=1012]="ServiceRestart",e[e.TryAgainLater=1013]="TryAgainLater",e[e.BadGateway=1014]="BadGateway",e[e.TLSHandshake=1015]="TLSHandshake",e[e.ReconnectWebSocket=3e3]="ReconnectWebSocket",e[e.NoRealtimeListeners=3001]="NoRealtimeListeners",e[e.HeartbeatPingError=3002]="HeartbeatPingError",e[e.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",e[e.NoAuthentication=3050]="NoAuthentication"})(bt||(bt={}));var _a=function(e,t){var r=_d[e],n=r?r.name+", code "+e+", reason "+(t||r.description):"code "+e;return new At({errCode:ot.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:n})},vd=null,Ed="web";function c1(){return vd}function f1(e){vd=e}function Df(){return Ed}function l1(e){Ed=e}var $o=globalThis&&globalThis.__assign||function(){return $o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$o.apply(this,arguments)},Ut=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},Mt=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},va={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},Uf=3,h1=5e3,d1=1e4,p1=5,g1=1e4,y1=2,m1=2,_1=5e3,v1=function(){function e(t){var r=this;this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._pingFailed=0,this._pongMissed=0,this._logins=new Map,this._wsReadySubsribers=[],this._wsResponseWait=new Map,this._rttObserved=[],this.send=function(n){return Ut(r,void 0,void 0,function(){var o=this;return Mt(this,function(i){return[2,new Promise(function(s,u){return Ut(o,void 0,void 0,function(){var f,a,c,d,g,v,T,I=this;return Mt(this,function(_){switch(_.label){case 0:a=!1,c=!1,d=function(w){a=!0,f&&clearTimeout(f),s(w)},g=function(w){c=!0,f&&clearTimeout(f),u(w)},n.timeout&&(f=setTimeout(function(){return Ut(I,void 0,void 0,function(){return Mt(this,function(w){switch(w.label){case 0:return!a||!c?[4,tu(0)]:[3,2];case 1:w.sent(),(!a||!c)&&g(new Qb("wsclient.send timedout")),w.label=2;case 2:return[2]}})})},n.timeout)),_.label=1;case 1:return _.trys.push([1,8,,9]),this._wsInitPromise?[4,this._wsInitPromise]:[3,3];case 2:_.sent(),_.label=3;case 3:if(!this._ws)return g(new Error("invalid state: ws connection not exists, can not send message")),[2];if(this._ws.readyState!==va.OPEN)return g(new Error("ws readyState invalid: "+this._ws.readyState+", can not send message")),[2];n.waitResponse&&this._wsResponseWait.set(n.msg.requestId,{resolve:d,reject:g,skipOnMessage:n.skipOnMessage}),_.label=4;case 4:return _.trys.push([4,6,,7]),[4,this._ws.send(JSON.stringify(n.msg))];case 5:return _.sent(),n.waitResponse||d(),[3,7];case 6:return v=_.sent(),v&&(g(v),n.waitResponse&&this._wsResponseWait.delete(n.msg.requestId)),[3,7];case 7:return[3,9];case 8:return T=_.sent(),g(T),[3,9];case 9:return[2]}})})})]})})},this.closeAllClients=function(n){r._virtualWSClient.forEach(function(o){o.closeWithError(n)})},this.pauseClients=function(n){(n||r._virtualWSClient).forEach(function(o){o.pause()})},this.resumeClients=function(n){(n||r._virtualWSClient).forEach(function(o){o.resume()})},this.initWebSocketConnection=function(n,o){return o===void 0&&(o=r._maxReconnect),Ut(r,void 0,void 0,function(){var i=this;return Mt(this,function(s){switch(s.label){case 0:if(n&&this._reconnectState)return[2];if(n&&(this._reconnectState=!0),this._wsInitPromise)return[2,this._wsInitPromise];n&&this.pauseClients(),this.close(bt.ReconnectWebSocket),this._wsInitPromise=new Promise(function(u,f){return Ut(i,void 0,void 0,function(){var a,c,d,g=this;return Mt(this,function(v){switch(v.label){case 0:return v.trys.push([0,6,,11]),[4,this.getWsSign()];case 1:return a=v.sent(),[4,new Promise(function(T){var I=a.wsUrl||"wss://tcb-ws.tencentcloudapi.com",_=c1();g._ws=_?new _(I):new WebSocket(I),T()})];case 2:return v.sent(),this._ws.connect?[4,this._ws.connect()]:[3,4];case 3:v.sent(),v.label=4;case 4:return[4,this.initWebSocketEvent()];case 5:return v.sent(),u(),n&&(this.resumeClients(),this._reconnectState=!1),[3,11];case 6:return c=v.sent(),console.error("[realtime] initWebSocketConnection connect fail",c),o>0?(d=!0,this._wsInitPromise=void 0,d?[4,tu(this._reconnectInterval)]:[3,8]):[3,9];case 7:v.sent(),n&&(this._reconnectState=!1),v.label=8;case 8:return u(this.initWebSocketConnection(n,o-1)),[3,10];case 9:f(c),n&&this.closeAllClients(new At({errCode:ot.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL,errMsg:c})),v.label=10;case 10:return[3,11];case 11:return[2]}})})}),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this._wsInitPromise];case 2:return s.sent(),this._wsReadySubsribers.forEach(function(u){var f=u.resolve;return f()}),[3,5];case 3:return s.sent(),this._wsReadySubsribers.forEach(function(u){var f=u.reject;return f()}),[3,5];case 4:return this._wsInitPromise=void 0,this._wsReadySubsribers=[],[7];case 5:return[2]}})})},this.initWebSocketEvent=function(){return new Promise(function(n,o){if(!r._ws)throw new Error("can not initWebSocketEvent, ws not exists");var i=!1;r._ws.onopen=function(s){console.warn("[realtime] ws event: open",s),i=!0,n()},r._ws.onerror=function(s){r._logins=new Map,i?(console.error("[realtime] ws event: error",s),r.clearHeartbeat(),r._virtualWSClient.forEach(function(u){return u.closeWithError(new At({errCode:ot.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR,errMsg:s}))})):(console.error("[realtime] ws open failed with ws event: error",s),o(s))},r._ws.onclose=function(s){switch(console.warn("[realtime] ws event: close",s),r._logins=new Map,r.clearHeartbeat(),s.code){case bt.ReconnectWebSocket:break;case bt.NoRealtimeListeners:break;case bt.HeartbeatPingError:case bt.HeartbeatPongTimeoutError:case bt.NormalClosure:case bt.AbnormalClosure:{r._maxReconnect>0?r.initWebSocketConnection(!0,r._maxReconnect):r.closeAllClients(_a(s.code));break}case bt.NoAuthentication:{r.closeAllClients(_a(s.code,s.reason));break}default:r._maxReconnect>0?r.initWebSocketConnection(!0,r._maxReconnect):r.closeAllClients(_a(s.code))}},r._ws.onmessage=function(s){var u=s.data;r.heartbeat();var f;try{f=JSON.parse(u)}catch(w){throw new Error("[realtime] onMessage parse res.data error: "+w)}if(f.msgType==="ERROR"){var a=null;r._virtualWSClient.forEach(function(w){w.watchId===f.watchId&&(a=w)}),a&&a.listener.onError(f)}var c=r._wsResponseWait.get(f.requestId);if(c){try{f.msgType==="ERROR"?c.reject(new Xb(f)):c.resolve(f)}catch(w){console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",w)}finally{r._wsResponseWait.delete(f.requestId)}if(c.skipOnMessage)return}if(f.msgType==="PONG"){if(r._lastPingSendTS){var d=Date.now()-r._lastPingSendTS;if(d>d1){console.warn("[realtime] untrusted rtt observed: "+d);return}r._rttObserved.length>=Uf&&r._rttObserved.splice(0,r._rttObserved.length-Uf+1),r._rttObserved.push(d)}return}var g=f.watchId&&r._watchIdClientMap.get(f.watchId);if(g)g.onMessage(f);else switch(console.error("[realtime] no realtime listener found responsible for watchId "+f.watchId+": ",f),f.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":{g=r._queryIdClientMap.get(f.msgData.queryID),g&&g.onMessage(f);break}default:for(var v=0,T=Array.from(r._watchIdClientMap.entries());v<T.length;v++){var I=T[v],_=I[1];_.onMessage(f);break}}},r.heartbeat()})},this.isWSConnected=function(){return Boolean(r._ws&&r._ws.readyState===va.OPEN)},this.onceWSConnected=function(){return Ut(r,void 0,void 0,function(){var n=this;return Mt(this,function(o){return this.isWSConnected()?[2]:this._wsInitPromise?[2,this._wsInitPromise]:[2,new Promise(function(i,s){n._wsReadySubsribers.push({resolve:i,reject:s})})]})})},this.webLogin=function(n,o){return Ut(r,void 0,void 0,function(){var i,s,u,f,a,c,d,g,v=this;return Mt(this,function(T){switch(T.label){case 0:if(!o){if(n){if(i=this._logins.get(n),i){if(i.loggedIn&&i.loginResult)return[2,i.loginResult];if(i.loggingInPromise)return[2,i.loggingInPromise]}}else if(s=this._logins.get(""),s!=null&&s.loggingInPromise)return[2,s.loggingInPromise]}u=new Promise(function(I,_){return Ut(v,void 0,void 0,function(){var w,P,R,N,D;return Mt(this,function($){switch($.label){case 0:return $.trys.push([0,3,,4]),[4,this.getWsSign()];case 1:return w=$.sent(),P={envId:w.envId||"",accessToken:"",referrer:"web",sdkVersion:"",dataVersion:""},R={watchId:void 0,requestId:Fn(),msgType:"LOGIN",msgData:P,exMsgData:{runtime:Df(),signStr:w.signStr,secretVersion:w.secretVersion}},[4,this.send({msg:R,waitResponse:!0,skipOnMessage:!0,timeout:_1})];case 2:return N=$.sent(),N.msgData.code?_(new Error(N.msgData.code+" "+N.msgData.message)):I({envId:w.envId}),[3,4];case 3:return D=$.sent(),_(D),[3,4];case 4:return[2]}})})}),f=n&&this._logins.get(n),a=Date.now(),f?(f.loggedIn=!1,f.loggingInPromise=u,f.loginStartTS=a):(f={loggedIn:!1,loggingInPromise:u,loginStartTS:a},this._logins.set(n||"",f)),T.label=1;case 1:return T.trys.push([1,3,,4]),[4,u];case 2:if(c=T.sent(),d=n&&this._logins.get(n),d&&d===f&&d.loginStartTS===a)return f.loggedIn=!0,f.loggingInPromise=void 0,f.loginStartTS=void 0,f.loginResult=c,[2,c];if(d){if(d.loggedIn&&d.loginResult)return[2,d.loginResult];if(d.loggingInPromise)return[2,d.loggingInPromise];throw new Error("ws unexpected login info")}else throw new Error("ws login info reset");case 3:throw g=T.sent(),f.loggedIn=!1,f.loggingInPromise=void 0,f.loginStartTS=void 0,f.loginResult=void 0,g;case 4:return[2]}})})},this.getWsSign=function(){return Ut(r,void 0,void 0,function(){var n,o,i,s,u,f,a;return Mt(this,function(c){switch(c.label){case 0:return this._wsSign&&this._wsSign.expiredTs>Date.now()?[2,this._wsSign]:(n=Date.now()+6e4,[4,this._context.appConfig.request.send("auth.wsWebSign",{runtime:Df()})]);case 1:if(o=c.sent(),o.code)throw new Error("[tcb-js-sdk] \u83B7\u53D6\u5B9E\u65F6\u6570\u636E\u63A8\u9001\u767B\u5F55\u7968\u636E\u5931\u8D25: "+o.code);if(o.data)return i=o.data,s=i.signStr,u=i.wsUrl,f=i.secretVersion,a=i.envId,[2,{signStr:s,wsUrl:u,secretVersion:f,envId:a,expiredTs:n}];throw new Error("[tcb-js-sdk] \u83B7\u53D6\u5B9E\u65F6\u6570\u636E\u63A8\u9001\u767B\u5F55\u7968\u636E\u5931\u8D25")}})})},this.getWaitExpectedTimeoutLength=function(){return r._rttObserved.length?r._rttObserved.reduce(function(n,o){return n+o})/r._rttObserved.length*1.5:h1},this.ping=function(){return Ut(r,void 0,void 0,function(){var n;return Mt(this,function(o){switch(o.label){case 0:return n={watchId:void 0,requestId:Fn(),msgType:"PING",msgData:null},[4,this.send({msg:n})];case 1:return o.sent(),[2]}})})},this.onWatchStart=function(n,o){r._queryIdClientMap.set(o,n)},this.onWatchClose=function(n,o){o&&r._queryIdClientMap.delete(o),r._watchIdClientMap.delete(n.watchId),r._virtualWSClient.delete(n),r._virtualWSClient.size||r.close(bt.NoRealtimeListeners)},this._maxReconnect=t.maxReconnect||p1,this._reconnectInterval=t.reconnectInterval||g1,this._context=t.context}return e.prototype.clearHeartbeat=function(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)},e.prototype.close=function(t){this.clearHeartbeat(),this._ws&&(this._ws.close(t,_d[t].name),this._ws=void 0)},e.prototype.watch=function(t){!this._ws&&!this._wsInitPromise&&this.initWebSocketConnection(!1);var r=new a1($o($o({},t),{send:this.send,login:this.webLogin,isWSConnected:this.isWSConnected,onceWSConnected:this.onceWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,debug:!0}));return this._virtualWSClient.add(r),this._watchIdClientMap.set(r.watchId,r),r.listener},e.prototype.heartbeat=function(t){var r=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout(function(){return Ut(r,void 0,void 0,function(){var n=this;return Mt(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),!this._ws||this._ws.readyState!==va.OPEN?[2]:(this._lastPingSendTS=Date.now(),[4,this.ping()]);case 1:return o.sent(),this._pingFailed=0,this._pongTimeoutId=setTimeout(function(){console.error("pong timed out"),n._pongMissed<m1?(n._pongMissed++,n.heartbeat(!0)):n.initWebSocketConnection(!0)},this._context.appConfig.realtimePongWaitTimeout),[3,3];case 2:return o.sent(),this._pingFailed<y1?(this._pingFailed++,this.heartbeat()):this.close(bt.HeartbeatPingError),[3,3];case 3:return[2]}})})},t?0:this._context.appConfig.realtimePingInterval)},e}(),wd={target:"database",entity:function(){var e=this.platform,t=e.adapter,r=e.runtime;f1(t.wsClass),l1(r)}},bd={name:"realtime",IIFE:!0,entity:function(){this.prototype.wsClientClass=v1}};try{cloudbase.registerComponent(bd),cloudbase.registerHook(wd)}catch{}function E1(e){try{e.registerComponent(bd),e.registerHook(wd)}catch(t){console.warn(t)}}var w1=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},Ea=globalThis&&globalThis.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},b1=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},A1=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},S1=ge.ERRORS,T1=ge.COMMUNITY_SITE_URL,I1=Ct.catchErrorsDecorator,Ad="analytics",O1=["mall"];function x1(e){if(Object.prototype.toString.call(e).slice(8,-1)!=="Object")return!1;var t=e.report_data,r=e.report_type;return!(O1.includes(r)===!1||Object.prototype.toString.call(t).slice(8,-1)!=="Object"||t.action_time!==void 0&&!Number.isInteger(t.action_time)||typeof t.action_type!="string")}var N1=function(){function e(){}return e.prototype.analytics=function(t){return b1(this,void 0,void 0,function(){var r,n,o,i,s;return A1(this,function(u){if(!x1(t))throw new Error(JSON.stringify({code:S1.INVALID_PARAMS,msg:"["+Ad+".analytics] invalid report data"}));return r="analytics.report",n=t.report_data.action_time===void 0?Math.floor(Date.now()/1e3):t.report_data.action_time,o={analytics_scene:t.report_type,analytics_data:Object.assign({},t.report_data,{action_time:n})},i={requestData:o},s=this.request,s.send(r,i),[2]})})},w1([I1({customInfo:{className:"Cloudbase",methodName:"analytics"},title:"\u4E0A\u62A5\u8C03\u7528\u5931\u8D25",messages:["\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5404\u9879\uFF1A","  1 - \u8C03\u7528 analytics() \u7684\u8BED\u6CD5\u6216\u53C2\u6570\u662F\u5426\u6B63\u786E","\u5982\u679C\u95EE\u9898\u4F9D\u7136\u5B58\u5728\uFF0C\u5EFA\u8BAE\u5230\u5B98\u65B9\u95EE\u7B54\u793E\u533A\u63D0\u95EE\u6216\u5BFB\u627E\u5E2E\u52A9\uFF1A"+T1]}),Ea("design:type",Function),Ea("design:paramtypes",[Object]),Ea("design:returntype",Promise)],e.prototype,"analytics",null),e}(),R1=new N1,Sd={name:Ad,entity:{analytics:R1.analytics}};try{cloudbase.registerComponent(Sd)}catch{}function C1(e){try{e.registerComponent(Sd)}catch(t){console.warn(t)}}var Kr,dr;(function(e){e.DocIDError="\u6587\u6863ID\u4E0D\u5408\u6CD5",e.CollNameError="\u96C6\u5408\u540D\u79F0\u4E0D\u5408\u6CD5",e.OpStrError="\u64CD\u4F5C\u7B26\u4E0D\u5408\u6CD5",e.DirectionError="\u6392\u5E8F\u5B57\u7B26\u4E0D\u5408\u6CD5",e.IntergerError="must be integer",e.QueryParamTypeError="\u67E5\u8BE2\u53C2\u6570\u5FC5\u987B\u4E3A\u5BF9\u8C61",e.QueryParamValueError="\u67E5\u8BE2\u53C2\u6570\u5BF9\u8C61\u503C\u4E0D\u80FD\u5747\u4E3Aundefined"})(dr||(dr={}));var be={String:"String",Number:"Number",Object:"Object",Array:"Array",Boolean:"Boolean",Null:"Null",GeoPoint:"GeoPoint",GeoLineString:"GeoLineString",GeoPolygon:"GeoPolygon",GeoMultiPoint:"GeoMultiPoint",GeoMultiLineString:"GeoMultiLineString",GeoMultiPolygon:"GeoMultiPolygon",Timestamp:"Date",Command:"Command",ServerDate:"ServerDate",BsonDate:"BsonDate"},P1=["desc","asc"],F1=["<","<=","==",">=",">"],Xr;(function(e){e.lt="<",e.gt=">",e.lte="<=",e.gte=">=",e.eq="=="})(Xr||(Xr={}));Kr={},Kr[Xr.eq]="$eq",Kr[Xr.lt]="$lt",Kr[Xr.lte]="$lte",Kr[Xr.gt]="$gt",Kr[Xr.gte]="$gte";var er;(function(e){e.WHERE="WHERE",e.DOC="DOC"})(er||(er={}));var B1=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),po=[],Mf={},L1=function(){function e(t){Object.defineProperties(this,{target:{enumerable:!1,writable:!1,configurable:!1,value:t}})}return e}(),Td=function(e){B1(t,e);function t(r,n){var o=this;if(n!==Mf)throw new TypeError("InternalSymbol cannot be constructed with new operator");return o=e.call(this,r)||this,o}return t.for=function(r){for(var n=0,o=po.length;n<o;n++)if(po[n].target===r)return po[n].instance;var i=new t(r,Mf);return po.push({target:r,instance:i}),i},t}(L1),Pt=Td,ki=Pt.for("UNSET_FIELD_NAME"),Id=Pt.for("UPDATE_COMMAND"),Od=Pt.for("QUERY_COMMAND"),xd=Pt.for("LOGIC_COMMAND"),Nd=Pt.for("GEO_POINT"),D1=Pt.for("SYMBOL_GEO_LINE_STRING"),U1=Pt.for("SYMBOL_GEO_POLYGON"),M1=Pt.for("SYMBOL_GEO_MULTI_POINT"),$1=Pt.for("SYMBOL_GEO_MULTI_LINE_STRING"),k1=Pt.for("SYMBOL_GEO_MULTI_POLYGON"),Rd=Pt.for("SERVER_DATE"),Cd=Pt.for("REGEXP"),Pd=function(){function e(t){var r=(t===void 0?{}:t).offset,n=r===void 0?0:r;this.offset=n}return Object.defineProperty(e.prototype,"_internalType",{get:function(){return Rd},enumerable:!0,configurable:!0}),e.prototype.parse=function(){return{$date:{offset:this.offset}}},e}();function j1(e){return new Pd(e)}var wa=globalThis&&globalThis.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},bs=function(){function e(){}return e.formatResDocumentData=function(t){return t.map(function(r){return e.formatField(r)})},e.formatField=function(t){var r=Object.keys(t),n={};return Array.isArray(t)&&(n=[]),r.forEach(function(o){var i=t[o],s=e.whichType(i),u;switch(s){case be.GeoPoint:u=new ht(i.coordinates[0],i.coordinates[1]);break;case be.GeoLineString:u=new Qt(i.coordinates.map(function(f){return new ht(f[0],f[1])}));break;case be.GeoPolygon:u=new nn(i.coordinates.map(function(f){return new Qt(f.map(function(a){var c=wa(a,2),d=c[0],g=c[1];return new ht(d,g)}))}));break;case be.GeoMultiPoint:u=new ko(i.coordinates.map(function(f){return new ht(f[0],f[1])}));break;case be.GeoMultiLineString:u=new jo(i.coordinates.map(function(f){return new Qt(f.map(function(a){var c=wa(a,2),d=c[0],g=c[1];return new ht(d,g)}))}));break;case be.GeoMultiPolygon:u=new ji(i.coordinates.map(function(f){return new nn(f.map(function(a){return new Qt(a.map(function(c){var d=wa(c,2),g=d[0],v=d[1];return new ht(g,v)}))}))}));break;case be.Timestamp:u=new Date(i.$timestamp*1e3);break;case be.Object:case be.Array:u=e.formatField(i);break;case be.ServerDate:u=new Date(i.$date);break;default:u=i}Array.isArray(n)?n.push(u):n[o]=u}),n},e.whichType=function(t){var r=Object.prototype.toString.call(t).slice(8,-1);if(r===be.Timestamp)return be.BsonDate;if(r===be.Object){if(t instanceof ht)return be.GeoPoint;if(t instanceof Date)return be.Timestamp;if(t instanceof Pd)return be.ServerDate;t.$timestamp?r=be.Timestamp:t.$date?r=be.ServerDate:ht.validate(t)?r=be.GeoPoint:Qt.validate(t)?r=be.GeoLineString:nn.validate(t)?r=be.GeoPolygon:ko.validate(t)?r=be.GeoMultiPoint:jo.validate(t)?r=be.GeoMultiLineString:ji.validate(t)&&(r=be.GeoMultiPolygon)}return r},e.generateDocId=function(){for(var t="ABCDEFabcdef0123456789",r="",n=0;n<24;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r},e}(),Rr=function(){function e(){}return e.isGeopoint=function(t,r){if(bs.whichType(r)!==be.Number)throw new Error("Geo Point must be number type");var n=Math.abs(r);if(t==="latitude"&&n>90)throw new Error("latitude should be a number ranges from -90 to 90");if(t==="longitude"&&n>180)throw new Error("longitude should be a number ranges from -180 to 180");return!0},e.isInteger=function(t,r){if(!Number.isInteger(r))throw new Error(t+dr.IntergerError);return!0},e.isFieldOrder=function(t){if(P1.indexOf(t)===-1)throw new Error(dr.DirectionError);return!0},e.isFieldPath=function(t){if(!/^[a-zA-Z0-9-_\.]/.test(t))throw new Error;return!0},e.isOperator=function(t){if(F1.indexOf(t)===-1)throw new Error(dr.OpStrError);return!0},e.isCollName=function(t){if(!/^[a-zA-Z0-9]([a-zA-Z0-9-_]){1,32}$/.test(t))throw new Error(dr.CollNameError);return!0},e.isDocID=function(t){if(!/^([a-fA-F0-9]){24}$/.test(t))throw new Error(dr.DocIDError);return!0},e}(),ir=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},Br=function(e){return ir(e)==="object"},W1=function(e){return ir(e)==="string"},Nt=function(e){return ir(e)==="number"},xe=function(e){return Array.isArray(e)},Fd=function(e){return ir(e)==="date"},Gu=function(e){return ir(e)==="regexp"},Bd=function(e){return e&&e._internalType instanceof Td},ht=function(){function e(t,r){Rr.isGeopoint("longitude",t),Rr.isGeopoint("latitude",r),this.longitude=t,this.latitude=r}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"Point",coordinates:[this.longitude,this.latitude]},r},e.prototype.toJSON=function(){return{type:"Point",coordinates:[this.longitude,this.latitude]}},e.prototype.toReadableString=function(){return"["+this.longitude+","+this.latitude+"]"},e.validate=function(t){return t.type==="Point"&&xe(t.coordinates)&&Rr.isGeopoint("longitude",t.coordinates[0])&&Rr.isGeopoint("latitude",t.coordinates[1])},Object.defineProperty(e.prototype,"_internalType",{get:function(){return Nd},enumerable:!0,configurable:!0}),e}(),q1=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qt=function(){function e(t){if(!xe(t))throw new TypeError('"points" must be of type Point[]. Received type '+typeof t);if(t.length<2)throw new Error('"points" must contain 2 points at least');t.forEach(function(r){if(!(r instanceof ht))throw new TypeError('"points" must be of type Point[]. Received type '+typeof r+"[]")}),this.points=t}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"LineString",coordinates:this.points.map(function(n){return n.toJSON().coordinates})},r},e.prototype.toJSON=function(){return{type:"LineString",coordinates:this.points.map(function(t){return t.toJSON().coordinates})}},e.validate=function(t){var r,n;if(t.type!=="LineString"||!xe(t.coordinates))return!1;try{for(var o=q1(t.coordinates),i=o.next();!i.done;i=o.next()){var s=i.value;if(!Nt(s[0])||!Nt(s[1]))return!1}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!0},e.isClosed=function(t){var r=t.points[0],n=t.points[t.points.length-1];if(r.latitude===n.latitude&&r.longitude===n.longitude)return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return D1},enumerable:!0,configurable:!0}),e}(),$f=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},nn=function(){function e(t){if(!xe(t))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof t);if(t.length===0)throw new Error("Polygon must contain 1 linestring at least");t.forEach(function(r){if(!(r instanceof Qt))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof r+"[]");if(!Qt.isClosed(r))throw new Error("LineString "+r.points.map(function(n){return n.toReadableString()})+" is not a closed cycle")}),this.lines=t}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"Polygon",coordinates:this.lines.map(function(n){return n.points.map(function(o){return[o.longitude,o.latitude]})})},r},e.prototype.toJSON=function(){return{type:"Polygon",coordinates:this.lines.map(function(t){return t.points.map(function(r){return[r.longitude,r.latitude]})})}},e.validate=function(t){var r,n,o,i;if(t.type!=="Polygon"||!xe(t.coordinates))return!1;try{for(var s=$f(t.coordinates),u=s.next();!u.done;u=s.next()){var f=u.value;if(!this.isCloseLineString(f))return!1;try{for(var a=(o=void 0,$f(f)),c=a.next();!c.done;c=a.next()){var d=c.value;if(!Nt(d[0])||!Nt(d[1]))return!1}}catch(g){o={error:g}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}}catch(g){r={error:g}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!0},e.isCloseLineString=function(t){var r=t[0],n=t[t.length-1];return!(r[0]!==n[0]||r[1]!==n[1])},Object.defineProperty(e.prototype,"_internalType",{get:function(){return k1},enumerable:!0,configurable:!0}),e}(),H1=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ko=function(){function e(t){if(!xe(t))throw new TypeError('"points" must be of type Point[]. Received type '+typeof t);if(t.length===0)throw new Error('"points" must contain 1 point at least');t.forEach(function(r){if(!(r instanceof ht))throw new TypeError('"points" must be of type Point[]. Received type '+typeof r+"[]")}),this.points=t}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"MultiPoint",coordinates:this.points.map(function(n){return n.toJSON().coordinates})},r},e.prototype.toJSON=function(){return{type:"MultiPoint",coordinates:this.points.map(function(t){return t.toJSON().coordinates})}},e.validate=function(t){var r,n;if(t.type!=="MultiPoint"||!xe(t.coordinates))return!1;try{for(var o=H1(t.coordinates),i=o.next();!i.done;i=o.next()){var s=i.value;if(!Nt(s[0])||!Nt(s[1]))return!1}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return M1},enumerable:!0,configurable:!0}),e}(),kf=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jo=function(){function e(t){if(!xe(t))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof t);if(t.length===0)throw new Error("Polygon must contain 1 linestring at least");t.forEach(function(r){if(!(r instanceof Qt))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof r+"[]")}),this.lines=t}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"MultiLineString",coordinates:this.lines.map(function(n){return n.points.map(function(o){return[o.longitude,o.latitude]})})},r},e.prototype.toJSON=function(){return{type:"MultiLineString",coordinates:this.lines.map(function(t){return t.points.map(function(r){return[r.longitude,r.latitude]})})}},e.validate=function(t){var r,n,o,i;if(t.type!=="MultiLineString"||!xe(t.coordinates))return!1;try{for(var s=kf(t.coordinates),u=s.next();!u.done;u=s.next()){var f=u.value;try{for(var a=(o=void 0,kf(f)),c=a.next();!c.done;c=a.next()){var d=c.value;if(!Nt(d[0])||!Nt(d[1]))return!1}}catch(g){o={error:g}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}}catch(g){r={error:g}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return $1},enumerable:!0,configurable:!0}),e}(),go=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ji=function(){function e(t){var r,n;if(!xe(t))throw new TypeError('"polygons" must be of type Polygon[]. Received type '+typeof t);if(t.length===0)throw new Error("MultiPolygon must contain 1 polygon at least");try{for(var o=go(t),i=o.next();!i.done;i=o.next()){var s=i.value;if(!(s instanceof nn))throw new TypeError('"polygon" must be of type Polygon[]. Received type '+typeof s+"[]")}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}this.polygons=t}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"MultiPolygon",coordinates:this.polygons.map(function(n){return n.lines.map(function(o){return o.points.map(function(i){return[i.longitude,i.latitude]})})})},r},e.prototype.toJSON=function(){return{type:"MultiPolygon",coordinates:this.polygons.map(function(t){return t.lines.map(function(r){return r.points.map(function(n){return[n.longitude,n.latitude]})})})}},e.validate=function(t){var r,n,o,i,s,u;if(t.type!=="MultiPolygon"||!xe(t.coordinates))return!1;try{for(var f=go(t.coordinates),a=f.next();!a.done;a=f.next()){var c=a.value;try{for(var d=(o=void 0,go(c)),g=d.next();!g.done;g=d.next()){var v=g.value;try{for(var T=(s=void 0,go(v)),I=T.next();!I.done;I=T.next()){var _=I.value;if(!Nt(_[0])||!Nt(_[1]))return!1}}catch(w){s={error:w}}finally{try{I&&!I.done&&(u=T.return)&&u.call(T)}finally{if(s)throw s.error}}}}catch(w){o={error:w}}finally{try{g&&!g.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}}}catch(w){r={error:w}}finally{try{a&&!a.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return U1},enumerable:!0,configurable:!0}),e}(),K1=Object.freeze(Object.defineProperty({__proto__:null,Point:ht,LineString:Qt,Polygon:nn,MultiPoint:ko,MultiLineString:jo,MultiPolygon:ji},Symbol.toStringTag,{value:"Module"})),pr=function(){var e;if(!Promise){e=function(){},e.promise={};var t=function(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}var r=new Promise(function(n,o){e=function(i,s){return i?o(i):n(s)}});return e.promise=r,e},ae;(function(e){e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.PUSH="push",e.PULL="pull",e.PULL_ALL="pullAll",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift",e.ADD_TO_SET="addToSet",e.BIT="bit",e.RENAME="rename",e.MAX="max",e.MIN="min"})(ae||(ae={}));var Ce=function(){function e(t,r,n){this._internalType=Id,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=t,this.operands=r,this.fieldName=n||ki}return e.prototype._setFieldName=function(t){var r=new e(this.operator,this.operands,t);return r},e}();function jf(e){return e&&e instanceof Ce&&e._internalType===Id}var gt;(function(e){e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor"})(gt||(gt={}));var en=function(){function e(t,r,n){if(this._internalType=xd,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=t,this.operands=r,this.fieldName=n||ki,this.fieldName!==ki)if(Array.isArray(r)){r=r.slice(),this.operands=r;for(var o=0,i=r.length;o<i;o++){var s=r[o];(Wo(s)||qo(s))&&(r[o]=s._setFieldName(this.fieldName))}}else{var s=r;(Wo(s)||qo(s))&&(r=s._setFieldName(this.fieldName))}}return e.prototype._setFieldName=function(t){var r=this.operands.map(function(o){return o instanceof e?o._setFieldName(t):o}),n=new e(this.operator,r,t);return n},e.prototype.and=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new e(gt.AND,t,this.fieldName)},e.prototype.or=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new e(gt.OR,t,this.fieldName)},e}();function Wo(e){return e&&e instanceof en&&e._internalType===xd}var G1=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X;(function(e){e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.ALL="all",e.ELEM_MATCH="elemMatch",e.EXISTS="exists",e.SIZE="size",e.MOD="mod",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects"})(X||(X={}));var Be=function(e){G1(t,e);function t(r,n,o){var i=e.call(this,r,n,o)||this;return i.operator=r,i._internalType=Od,i}return t.prototype.toJSON=function(){var r,n;switch(this.operator){case X.IN:case X.NIN:return r={},r["$"+this.operator]=this.operands,r;default:return n={},n["$"+this.operator]=this.operands[0],n}},t.prototype._setFieldName=function(r){var n=new t(this.operator,this.operands,r);return n},t.prototype.eq=function(r){var n=new t(X.EQ,[r],this.fieldName);return this.and(n)},t.prototype.neq=function(r){var n=new t(X.NEQ,[r],this.fieldName);return this.and(n)},t.prototype.gt=function(r){var n=new t(X.GT,[r],this.fieldName);return this.and(n)},t.prototype.gte=function(r){var n=new t(X.GTE,[r],this.fieldName);return this.and(n)},t.prototype.lt=function(r){var n=new t(X.LT,[r],this.fieldName);return this.and(n)},t.prototype.lte=function(r){var n=new t(X.LTE,[r],this.fieldName);return this.and(n)},t.prototype.in=function(r){var n=new t(X.IN,r,this.fieldName);return this.and(n)},t.prototype.nin=function(r){var n=new t(X.NIN,r,this.fieldName);return this.and(n)},t.prototype.geoNear=function(r){if(!(r.geometry instanceof ht))throw new TypeError('"geometry" must be of type Point. Received type '+typeof r.geometry);if(r.maxDistance!==void 0&&!Nt(r.maxDistance))throw new TypeError('"maxDistance" must be of type Number. Received type '+typeof r.maxDistance);if(r.minDistance!==void 0&&!Nt(r.minDistance))throw new TypeError('"minDistance" must be of type Number. Received type '+typeof r.minDistance);var n=new t(X.GEO_NEAR,[r],this.fieldName);return this.and(n)},t.prototype.geoWithin=function(r){if(!(r.geometry instanceof ji)&&!(r.geometry instanceof nn))throw new TypeError('"geometry" must be of type Polygon or MultiPolygon. Received type '+typeof r.geometry);var n=new t(X.GEO_WITHIN,[r],this.fieldName);return this.and(n)},t.prototype.geoIntersects=function(r){if(!(r.geometry instanceof ht)&&!(r.geometry instanceof Qt)&&!(r.geometry instanceof nn)&&!(r.geometry instanceof ko)&&!(r.geometry instanceof jo)&&!(r.geometry instanceof ji))throw new TypeError('"geometry" must be of type Point, LineString, Polygon, MultiPoint, MultiLineString or MultiPolygon. Received type '+typeof r.geometry);var n=new t(X.GEO_INTERSECTS,[r],this.fieldName);return this.and(n)},t}(en);function qo(e){return e&&e instanceof Be&&e._internalType===Od}function Wf(e){return qo(e)}var Mr={};for(var Ur in X)Mr[Ur]="$"+Ur;for(var Ur in gt)Mr[Ur]="$"+Ur;for(var Ur in ae)Mr[Ur]="$"+Ur;Mr[X.NEQ]="$ne";Mr[ae.REMOVE]="$unset";Mr[ae.SHIFT]="$pop";Mr[ae.UNSHIFT]="$push";function Bn(e){return Mr[e]||"$"+e}var ru=globalThis&&globalThis.__assign||function(){return ru=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ru.apply(this,arguments)},V1=globalThis&&globalThis.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},qf=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(V1(arguments[t]));return e};function Wi(e){return nu(e,[e])}function nu(e,t){if(Bd(e))switch(e._internalType){case Nd:return e.toJSON();case Rd:return e.parse();case Cd:return e.parse();default:return e.toJSON?e.toJSON():e}else{if(Fd(e))return{$date:+e};if(Gu(e))return{$regex:e.source,$options:e.flags};if(xe(e))return e.map(function(o){if(t.indexOf(o)>-1)throw new Error("Cannot convert circular structure to JSON");return nu(o,qf(t,[o]))});if(Br(e)){var r=ru({},e);for(var n in r){if(t.indexOf(r[n])>-1)throw new Error("Cannot convert circular structure to JSON");r[n]=nu(r[n],qf(t,[r[n]]))}return r}else return e}}var iu=globalThis&&globalThis.__assign||function(){return iu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},iu.apply(this,arguments)},J1=globalThis&&globalThis.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},Hf=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(J1(arguments[t]));return e};function Ld(e,t,r,n){var o=iu({},e);for(var i in e)if(!/^\$/.test(i)){var s=e[i];if(!!s&&Br(s)&&!t(s)){if(n.indexOf(s)>-1)throw new Error("Cannot convert circular structure to JSON");var u=Hf(r,[i]),f=Hf(n,[s]),a=Ld(s,t,u,f);o[i]=a;var c=!1;for(var d in a)/^\$/.test(d)?c=!0:(o[i+"."+d]=a[d],delete o[i][d]);c||delete o[i]}}return o}function Dd(e){return Ld(e,ou,[],[e])}function Kf(e,t,r){t[r]||delete e[r];for(var n in t)e[n]?xe(e[n])?e[n].push(t[n]):Br(e[n])?Br(t[n])?Object.assign(e[n],t[n]):(console.warn("unmergable condition, query is object but condition is "+ir(t)+", can only overwrite",t,r),e[n]=t[n]):(console.warn("to-merge query is of type "+ir(e)+", can only overwrite",e,t,r),e[n]=t[n]):e[n]=t[n]}function ou(e){return Bd(e)||Fd(e)||Gu(e)}function Cr(e){return Wi(e)}var Vu=function(){function e(){}return e.encode=function(t){var r=new e;return r.encodeUpdate(t)},e.prototype.encodeUpdate=function(t){return jf(t)?this.encodeUpdateCommand(t):ir(t)==="object"?this.encodeUpdateObject(t):t},e.prototype.encodeUpdateCommand=function(t){if(t.fieldName===ki)throw new Error("Cannot encode a comparison command with unset field name");switch(t.operator){case ae.PUSH:case ae.PULL:case ae.PULL_ALL:case ae.POP:case ae.SHIFT:case ae.UNSHIFT:case ae.ADD_TO_SET:return this.encodeArrayUpdateCommand(t);default:return this.encodeFieldUpdateCommand(t)}},e.prototype.encodeFieldUpdateCommand=function(t){var r,n,o,i,s=Bn(t.operator);switch(t.operator){case ae.REMOVE:return r={},r[s]=(n={},n[t.fieldName]="",n),r;default:return o={},o[s]=(i={},i[t.fieldName]=t.operands[0],i),o}},e.prototype.encodeArrayUpdateCommand=function(t){var r,n,o,i,s,u,f,a,c,d,g=Bn(t.operator);switch(t.operator){case ae.PUSH:{var v=void 0;return xe(t.operands)?v={$each:t.operands.map(Cr)}:v=t.operands,r={},r[g]=(n={},n[t.fieldName]=v,n),r}case ae.UNSHIFT:{var v={$each:t.operands.map(Cr),$position:0};return o={},o[g]=(i={},i[t.fieldName]=v,i),o}case ae.POP:return s={},s[g]=(u={},u[t.fieldName]=1,u),s;case ae.SHIFT:return f={},f[g]=(a={},a[t.fieldName]=-1,a),f;default:return c={},c[g]=(d={},d[t.fieldName]=Cr(t.operands),d),c}},e.prototype.encodeUpdateObject=function(t){var r=Dd(t);for(var n in r)if(!/^\$/.test(n)){var o=r[n];if(jf(o)){r[n]=o._setFieldName(n);var i=this.encodeUpdateCommand(r[n]);Kf(r,i,n)}else{r[n]=o=Cr(o);var s=new Ce(ae.SET,[o],n),i=this.encodeUpdateCommand(s);Kf(r,i,n)}}return r},e}(),ba={};function Ud(e){if(!Qe.wsClientClass)throw new Error("to use realtime you must import realtime module first");var t=e.config.env;return ba[t]||(ba[t]=new Qe.wsClientClass({context:{appConfig:{docSizeLimit:1e3,realtimePingInterval:1e4,realtimePongWaitTimeout:5e3,request:new Qe.reqClass(e.config)}}})),ba[t]}var Ho=globalThis&&globalThis.__assign||function(){return Ho=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ho.apply(this,arguments)},Gf=function(){function e(t,r,n,o){var i=this;o===void 0&&(o={}),this.watch=function(s){var u=Ud(i._db);return u.watch(Ho(Ho({},s),{envId:i._db.config.env,collectionName:i._coll,query:JSON.stringify({_id:i.id})}))},this._db=t,this._coll=r,this.id=n,this.request=new Qe.reqClass(this._db.config),this.projection=o}return e.prototype.create=function(t,r){r=r||pr();var n={collectionName:this._coll,data:Wi(t)};return this.id&&(n._id=this.id),this.request.send("database.addDocument",n).then(function(o){o.code?r(0,o):r(0,{id:o.data._id,requestId:o.requestId})}).catch(function(o){r(o)}),r.promise},e.prototype.set=function(t,r){if(r=r||pr(),!this.id)return Promise.resolve({code:"INVALID_PARAM",message:"docId\u4E0D\u80FD\u4E3A\u7A7A"});if(!t||typeof t!="object")return Promise.resolve({code:"INVALID_PARAM",message:"\u53C2\u6570\u5FC5\u9700\u662F\u975E\u7A7A\u5BF9\u8C61"});if(t.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"\u4E0D\u80FD\u66F4\u65B0_id\u7684\u503C"});var n=!1,o=function(u){if(typeof u=="object")for(var f in u)u[f]instanceof Ce?n=!0:typeof u[f]=="object"&&o(u[f])};if(o(t),n)return Promise.resolve({code:"DATABASE_REQUEST_FAILED",message:"update operator complicit"});var i=!1,s={collectionName:this._coll,queryType:er.DOC,data:Wi(t),multi:!1,merge:i,upsert:!0};return this.id&&(s.query={_id:this.id}),this.request.send("database.updateDocument",s).then(function(u){u.code?r(0,u):r(0,{updated:u.data.updated,upsertedId:u.data.upserted_id,requestId:u.requestId})}).catch(function(u){r(u)}),r.promise},e.prototype.update=function(t,r){if(r=r||pr(),!t||typeof t!="object")return Promise.resolve({code:"INVALID_PARAM",message:"\u53C2\u6570\u5FC5\u9700\u662F\u975E\u7A7A\u5BF9\u8C61"});if(t.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"\u4E0D\u80FD\u66F4\u65B0_id\u7684\u503C"});var n={_id:this.id},o=!0,i={collectionName:this._coll,data:Vu.encode(t),query:n,queryType:er.DOC,multi:!1,merge:o,upsert:!1};return this.request.send("database.updateDocument",i).then(function(s){s.code?r(0,s):r(0,{updated:s.data.updated,upsertedId:s.data.upserted_id,requestId:s.requestId})}).catch(function(s){r(s)}),r.promise},e.prototype.remove=function(t){t=t||pr();var r={_id:this.id},n={collectionName:this._coll,query:r,queryType:er.DOC,multi:!1};return this.request.send("database.deleteDocument",n).then(function(o){o.code?t(0,o):t(0,{deleted:o.data.deleted,requestId:o.requestId})}).catch(function(o){t(o)}),t.promise},e.prototype.get=function(t){t=t||pr();var r={_id:this.id},n={collectionName:this._coll,query:r,queryType:er.DOC,multi:!1,projection:this.projection};return this.request.send("database.queryDocument",n).then(function(o){if(o.code)t(0,o);else{var i=bs.formatResDocumentData(o.data.list);t(0,{data:i,requestId:o.requestId,total:o.TotalCount,limit:o.Limit,offset:o.Offset})}}).catch(function(o){t(o)}),t.promise},e.prototype.field=function(t){for(var r in t)t[r]?t[r]=1:t[r]=0;return new e(this._db,this._coll,this.id,t)},e}(),su=function(){function e(){}return e.encode=function(t){var r=new Y1;return r.encodeQuery(t)},e}(),Y1=function(){function e(){}return e.prototype.encodeQuery=function(t,r){var n;return ou(t)?Wo(t)?this.encodeLogicCommand(t):qo(t)?this.encodeQueryCommand(t):(n={},n[r]=this.encodeQueryObject(t),n):Br(t)?this.encodeQueryObject(t):t},e.prototype.encodeRegExp=function(t){return{$regex:t.source,$options:t.flags}},e.prototype.encodeLogicCommand=function(t){var r,n,o,i,s,u,f,a=this;switch(t.operator){case gt.NOR:case gt.AND:case gt.OR:{var c=Bn(t.operator),d=t.operands.map(function(T){return a.encodeQuery(T,t.fieldName)});return r={},r[c]=d,r}case gt.NOT:{var c=Bn(t.operator),g=t.operands[0];if(Gu(g))return n={},n[t.fieldName]=(o={},o[c]=this.encodeRegExp(g),o),n;var d=this.encodeQuery(g)[t.fieldName];return i={},i[t.fieldName]=(s={},s[c]=d,s),i}default:{var c=Bn(t.operator);if(t.operands.length===1){var v=this.encodeQuery(t.operands[0]);return u={},u[c]=v,u}else{var d=t.operands.map(this.encodeQuery.bind(this));return f={},f[c]=d,f}}}},e.prototype.encodeQueryCommand=function(t){return Wf(t)?this.encodeComparisonCommand(t):this.encodeComparisonCommand(t)},e.prototype.encodeComparisonCommand=function(t){var r,n,o,i,s,u,f,a,c;if(t.fieldName===ki)throw new Error("Cannot encode a comparison command with unset field name");var d=Bn(t.operator);switch(t.operator){case X.EQ:case X.NEQ:case X.LT:case X.LTE:case X.GT:case X.GTE:case X.ELEM_MATCH:case X.EXISTS:case X.SIZE:case X.MOD:return r={},r[t.fieldName]=(n={},n[d]=Cr(t.operands[0]),n),r;case X.IN:case X.NIN:case X.ALL:return o={},o[t.fieldName]=(i={},i[d]=Cr(t.operands),i),o;case X.GEO_NEAR:{var g=t.operands[0];return s={},s[t.fieldName]={$nearSphere:{$geometry:g.geometry.toJSON(),$maxDistance:g.maxDistance,$minDistance:g.minDistance}},s}case X.GEO_WITHIN:{var g=t.operands[0];return u={},u[t.fieldName]={$geoWithin:{$geometry:g.geometry.toJSON()}},u}case X.GEO_INTERSECTS:{var g=t.operands[0];return f={},f[t.fieldName]={$geoIntersects:{$geometry:g.geometry.toJSON()}},f}default:return a={},a[t.fieldName]=(c={},c[d]=Cr(t.operands[0]),c),a}},e.prototype.encodeQueryObject=function(t){var r=Dd(t);for(var n in r){var o=r[n];if(Wo(o)){r[n]=o._setFieldName(n);var i=this.encodeLogicCommand(r[n]);this.mergeConditionAfterEncode(r,i,n)}else if(Wf(o)){r[n]=o._setFieldName(n);var i=this.encodeComparisonCommand(r[n]);this.mergeConditionAfterEncode(r,i,n)}else ou(o)&&(r[n]=Cr(o))}return r},e.prototype.mergeConditionAfterEncode=function(t,r,n){r[n]||delete t[n];for(var o in r)t[o]?xe(t[o])?t[o]=t[o].concat(r[o]):Br(t[o])?Br(r[o])?Object.assign(t,r):(console.warn("unmergable condition, query is object but condition is "+ir(r)+", can only overwrite",r,n),t[o]=r[o]):(console.warn("to-merge query is of type "+ir(t)+", can only overwrite",t,r,n),t[o]=r[o]):t[o]=r[o]},e}(),Qr=globalThis&&globalThis.__assign||function(){return Qr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Qr.apply(this,arguments)},z1=function(){function e(t,r,n,o,i){var s=this;this.watch=function(u){var f=Ud(s._db);return f.watch(Qr(Qr({},u),{envId:s._db.config.env,collectionName:s._coll,query:JSON.stringify(s._fieldFilters||{}),limit:s._queryOptions.limit,orderBy:s._fieldOrders?s._fieldOrders.reduce(function(a,c){return a[c.field]=c.direction,a},{}):void 0}))},this._db=t,this._coll=r,this._fieldFilters=n,this._fieldOrders=o||[],this._queryOptions=i||{},this._request=new Qe.reqClass(this._db.config)}return e.prototype.get=function(t){t=t||pr();var r=[];this._fieldOrders&&this._fieldOrders.forEach(function(o){r.push(o)});var n={collectionName:this._coll,queryType:er.WHERE};return this._fieldFilters&&(n.query=this._fieldFilters),r.length>0&&(n.order=r),this._queryOptions.offset&&(n.offset=this._queryOptions.offset),this._queryOptions.limit?n.limit=this._queryOptions.limit<1e3?this._queryOptions.limit:1e3:n.limit=100,this._queryOptions.projection&&(n.projection=this._queryOptions.projection),this._request.send("database.queryDocument",n).then(function(o){if(o.code)t(0,o);else{var i=bs.formatResDocumentData(o.data.list),s={data:i,requestId:o.requestId};o.TotalCount&&(s.total=o.TotalCount),o.Limit&&(s.limit=o.Limit),o.Offset&&(s.offset=o.Offset),t(0,s)}}).catch(function(o){t(o)}),t.promise},e.prototype.count=function(t){t=t||pr();var r={collectionName:this._coll,queryType:er.WHERE};return this._fieldFilters&&(r.query=this._fieldFilters),this._request.send("database.countDocument",r).then(function(n){n.code?t(0,n):t(0,{requestId:n.requestId,total:n.data.total})}).catch(function(n){t(n)}),t.promise},e.prototype.where=function(t){if(Object.prototype.toString.call(t).slice(8,-1)!=="Object")throw Error(dr.QueryParamTypeError);var r=Object.keys(t),n=r.some(function(o){return t[o]!==void 0});if(r.length&&!n)throw Error(dr.QueryParamValueError);return new e(this._db,this._coll,su.encode(t),this._fieldOrders,this._queryOptions)},e.prototype.orderBy=function(t,r){Rr.isFieldPath(t),Rr.isFieldOrder(r);var n={field:t,direction:r},o=this._fieldOrders.concat(n);return new e(this._db,this._coll,this._fieldFilters,o,this._queryOptions)},e.prototype.limit=function(t){Rr.isInteger("limit",t);var r=Qr({},this._queryOptions);return r.limit=t,new e(this._db,this._coll,this._fieldFilters,this._fieldOrders,r)},e.prototype.skip=function(t){Rr.isInteger("offset",t);var r=Qr({},this._queryOptions);return r.offset=t,new e(this._db,this._coll,this._fieldFilters,this._fieldOrders,r)},e.prototype.update=function(t,r){if(r=r||pr(),!t||typeof t!="object")return Promise.resolve({code:"INVALID_PARAM",message:"\u53C2\u6570\u5FC5\u9700\u662F\u975E\u7A7A\u5BF9\u8C61"});if(t.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"\u4E0D\u80FD\u66F4\u65B0_id\u7684\u503C"});var n={collectionName:this._coll,query:this._fieldFilters,queryType:er.WHERE,multi:!0,merge:!0,upsert:!1,data:Vu.encode(t)};return this._request.send("database.updateDocument",n).then(function(o){o.code?r(0,o):r(0,{requestId:o.requestId,updated:o.data.updated,upsertId:o.data.upsert_id})}).catch(function(o){r(o)}),r.promise},e.prototype.field=function(t){for(var r in t)t[r]?typeof t[r]!="object"&&(t[r]=1):t[r]=0;var n=Qr({},this._queryOptions);return n.projection=t,new e(this._db,this._coll,this._fieldFilters,this._fieldOrders,n)},e.prototype.remove=function(t){t=t||pr(),Object.keys(this._queryOptions).length>0&&console.warn("`offset`, `limit` and `projection` are not supported in remove() operation"),this._fieldOrders.length>0&&console.warn("`orderBy` is not supported in remove() operation");var r={collectionName:this._coll,query:su.encode(this._fieldFilters),queryType:er.WHERE,multi:!0};return this._request.send("database.deleteDocument",r).then(function(n){n.code?t(0,n):t(0,{requestId:n.requestId,deleted:n.data.deleted})}).catch(function(n){t(n)}),t.promise},e}();function X1(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Q1=nA,Z1=oA,eA=uA,Zt=[],St=[],tA=typeof Uint8Array!="undefined"?Uint8Array:Array,Aa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Sn=0,rA=Aa.length;Sn<rA;++Sn)Zt[Sn]=Aa[Sn],St[Aa.charCodeAt(Sn)]=Sn;St["-".charCodeAt(0)]=62;St["_".charCodeAt(0)]=63;function Md(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function nA(e){var t=Md(e),r=t[0],n=t[1];return(r+n)*3/4-n}function iA(e,t,r){return(t+r)*3/4-r}function oA(e){var t,r=Md(e),n=r[0],o=r[1],i=new tA(iA(e,n,o)),s=0,u=o>0?n-4:n,f;for(f=0;f<u;f+=4)t=St[e.charCodeAt(f)]<<18|St[e.charCodeAt(f+1)]<<12|St[e.charCodeAt(f+2)]<<6|St[e.charCodeAt(f+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return o===2&&(t=St[e.charCodeAt(f)]<<2|St[e.charCodeAt(f+1)]>>4,i[s++]=t&255),o===1&&(t=St[e.charCodeAt(f)]<<10|St[e.charCodeAt(f+1)]<<4|St[e.charCodeAt(f+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function sA(e){return Zt[e>>18&63]+Zt[e>>12&63]+Zt[e>>6&63]+Zt[e&63]}function aA(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),o.push(sA(n));return o.join("")}function uA(e){for(var t,r=e.length,n=r%3,o=[],i=16383,s=0,u=r-n;s<u;s+=i)o.push(aA(e,s,s+i>u?u:s+i));return n===1?(t=e[r-1],o.push(Zt[t>>2]+Zt[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],o.push(Zt[t>>10]+Zt[t>>4&63]+Zt[t<<2&63]+"=")),o.join("")}var Sa={byteLength:Q1,toByteArray:Z1,fromByteArray:eA};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var cA=function(t,r,n,o,i){var s,u,f=i*8-o-1,a=(1<<f)-1,c=a>>1,d=-7,g=n?i-1:0,v=n?-1:1,T=t[r+g];for(g+=v,s=T&(1<<-d)-1,T>>=-d,d+=f;d>0;s=s*256+t[r+g],g+=v,d-=8);for(u=s&(1<<-d)-1,s>>=-d,d+=o;d>0;u=u*256+t[r+g],g+=v,d-=8);if(s===0)s=1-c;else{if(s===a)return u?NaN:(T?-1:1)*(1/0);u=u+Math.pow(2,o),s=s-c}return(T?-1:1)*u*Math.pow(2,s-o)},fA=function(t,r,n,o,i,s){var u,f,a,c=s*8-i-1,d=(1<<c)-1,g=d>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=o?0:s-1,I=o?1:-1,_=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,u=d):(u=Math.floor(Math.log(r)/Math.LN2),r*(a=Math.pow(2,-u))<1&&(u--,a*=2),u+g>=1?r+=v/a:r+=v*Math.pow(2,1-g),r*a>=2&&(u++,a/=2),u+g>=d?(f=0,u=d):u+g>=1?(f=(r*a-1)*Math.pow(2,i),u=u+g):(f=r*Math.pow(2,g-1)*Math.pow(2,i),u=0));i>=8;t[n+T]=f&255,T+=I,f/=256,i-=8);for(u=u<<i|f,c+=i;c>0;t[n+T]=u&255,T+=I,u/=256,c-=8);t[n+T-I]|=_*128},Tn={read:cA,write:fA},As=X1(function(e,t){var r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50;var n=2147483647;t.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var p=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(p,l),p.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function i(p){if(p>n)throw new RangeError('The value "'+p+'" is invalid for option "size"');var l=new Uint8Array(p);return Object.setPrototypeOf(l,s.prototype),l}function s(p,l,h){if(typeof p=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(p)}return u(p,l,h)}s.poolSize=8192;function u(p,l,h){if(typeof p=="string")return d(p,l);if(ArrayBuffer.isView(p))return v(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(p));if(qe(p,ArrayBuffer)||p&&qe(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(qe(p,SharedArrayBuffer)||p&&qe(p.buffer,SharedArrayBuffer)))return T(p,l,h);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var y=p.valueOf&&p.valueOf();if(y!=null&&y!==p)return s.from(y,l,h);var E=I(p);if(E)return E;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return s.from(p[Symbol.toPrimitive]("string"),l,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(p))}s.from=function(p,l,h){return u(p,l,h)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function f(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function a(p,l,h){return f(p),p<=0?i(p):l!==void 0?typeof h=="string"?i(p).fill(l,h):i(p).fill(l):i(p)}s.alloc=function(p,l,h){return a(p,l,h)};function c(p){return f(p),i(p<0?0:_(p)|0)}s.allocUnsafe=function(p){return c(p)},s.allocUnsafeSlow=function(p){return c(p)};function d(p,l){if((typeof l!="string"||l==="")&&(l="utf8"),!s.isEncoding(l))throw new TypeError("Unknown encoding: "+l);var h=P(p,l)|0,y=i(h),E=y.write(p,l);return E!==h&&(y=y.slice(0,E)),y}function g(p){for(var l=p.length<0?0:_(p.length)|0,h=i(l),y=0;y<l;y+=1)h[y]=p[y]&255;return h}function v(p){if(qe(p,Uint8Array)){var l=new Uint8Array(p);return T(l.buffer,l.byteOffset,l.byteLength)}return g(p)}function T(p,l,h){if(l<0||p.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<l+(h||0))throw new RangeError('"length" is outside of buffer bounds');var y;return l===void 0&&h===void 0?y=new Uint8Array(p):h===void 0?y=new Uint8Array(p,l):y=new Uint8Array(p,l,h),Object.setPrototypeOf(y,s.prototype),y}function I(p){if(s.isBuffer(p)){var l=_(p.length)|0,h=i(l);return h.length===0||p.copy(h,0,0,l),h}if(p.length!==void 0)return typeof p.length!="number"||b(p.length)?i(0):g(p);if(p.type==="Buffer"&&Array.isArray(p.data))return g(p.data)}function _(p){if(p>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return p|0}function w(p){return+p!=p&&(p=0),s.alloc(+p)}s.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==s.prototype},s.compare=function(l,h){if(qe(l,Uint8Array)&&(l=s.from(l,l.offset,l.byteLength)),qe(h,Uint8Array)&&(h=s.from(h,h.offset,h.byteLength)),!s.isBuffer(l)||!s.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===h)return 0;for(var y=l.length,E=h.length,A=0,O=Math.min(y,E);A<O;++A)if(l[A]!==h[A]){y=l[A],E=h[A];break}return y<E?-1:E<y?1:0},s.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(l,h){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return s.alloc(0);var y;if(h===void 0)for(h=0,y=0;y<l.length;++y)h+=l[y].length;var E=s.allocUnsafe(h),A=0;for(y=0;y<l.length;++y){var O=l[y];if(qe(O,Uint8Array))A+O.length>E.length?s.from(O).copy(E,A):Uint8Array.prototype.set.call(E,O,A);else if(s.isBuffer(O))O.copy(E,A);else throw new TypeError('"list" argument must be an Array of Buffers');A+=O.length}return E};function P(p,l){if(s.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||qe(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(p));var h=p.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&h===0)return 0;for(var E=!1;;)switch(l){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return Ge(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Bt(p).length;default:if(E)return y?-1:Ge(p).length;l=(""+l).toLowerCase(),E=!0}}s.byteLength=P;function R(p,l,h){var y=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,l>>>=0,h<=l))return"";for(p||(p="utf8");;)switch(p){case"hex":return re(this,l,h);case"utf8":case"utf-8":return te(this,l,h);case"ascii":return we(this,l,h);case"latin1":case"binary":return z(this,l,h);case"base64":return he(this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,l,h);default:if(y)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),y=!0}}s.prototype._isBuffer=!0;function N(p,l,h){var y=p[l];p[l]=p[h],p[h]=y}s.prototype.swap16=function(){var l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<l;h+=2)N(this,h,h+1);return this},s.prototype.swap32=function(){var l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<l;h+=4)N(this,h,h+3),N(this,h+1,h+2);return this},s.prototype.swap64=function(){var l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<l;h+=8)N(this,h,h+7),N(this,h+1,h+6),N(this,h+2,h+5),N(this,h+3,h+4);return this},s.prototype.toString=function(){var l=this.length;return l===0?"":arguments.length===0?te(this,0,l):R.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(l){if(!s.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:s.compare(this,l)===0},s.prototype.inspect=function(){var l="",h=t.INSPECT_MAX_BYTES;return l=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(l+=" ... "),"<Buffer "+l+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(l,h,y,E,A){if(qe(l,Uint8Array)&&(l=s.from(l,l.offset,l.byteLength)),!s.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(l));if(h===void 0&&(h=0),y===void 0&&(y=l?l.length:0),E===void 0&&(E=0),A===void 0&&(A=this.length),h<0||y>l.length||E<0||A>this.length)throw new RangeError("out of range index");if(E>=A&&h>=y)return 0;if(E>=A)return-1;if(h>=y)return 1;if(h>>>=0,y>>>=0,E>>>=0,A>>>=0,this===l)return 0;for(var O=A-E,C=y-h,U=Math.min(O,C),B=this.slice(E,A),k=l.slice(h,y),j=0;j<U;++j)if(B[j]!==k[j]){O=B[j],C=k[j];break}return O<C?-1:C<O?1:0};function D(p,l,h,y,E){if(p.length===0)return-1;if(typeof h=="string"?(y=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,b(h)&&(h=E?0:p.length-1),h<0&&(h=p.length+h),h>=p.length){if(E)return-1;h=p.length-1}else if(h<0)if(E)h=0;else return-1;if(typeof l=="string"&&(l=s.from(l,y)),s.isBuffer(l))return l.length===0?-1:$(p,l,h,y,E);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(p,l,h):Uint8Array.prototype.lastIndexOf.call(p,l,h):$(p,[l],h,y,E);throw new TypeError("val must be string, number or Buffer")}function $(p,l,h,y,E){var A=1,O=p.length,C=l.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(p.length<2||l.length<2)return-1;A=2,O/=2,C/=2,h/=2}function U(ue,ce){return A===1?ue[ce]:ue.readUInt16BE(ce*A)}var B;if(E){var k=-1;for(B=h;B<O;B++)if(U(p,B)===U(l,k===-1?0:B-k)){if(k===-1&&(k=B),B-k+1===C)return k*A}else k!==-1&&(B-=B-k),k=-1}else for(h+C>O&&(h=O-C),B=h;B>=0;B--){for(var j=!0,ne=0;ne<C;ne++)if(U(p,B+ne)!==U(l,ne)){j=!1;break}if(j)return B}return-1}s.prototype.includes=function(l,h,y){return this.indexOf(l,h,y)!==-1},s.prototype.indexOf=function(l,h,y){return D(this,l,h,y,!0)},s.prototype.lastIndexOf=function(l,h,y){return D(this,l,h,y,!1)};function q(p,l,h,y){h=Number(h)||0;var E=p.length-h;y?(y=Number(y),y>E&&(y=E)):y=E;var A=l.length;y>A/2&&(y=A/2);for(var O=0;O<y;++O){var C=parseInt(l.substr(O*2,2),16);if(b(C))return O;p[h+O]=C}return O}function M(p,l,h,y){return Lt(Ge(l,p.length-h),p,h,y)}function G(p,l,h,y){return Lt(_r(l),p,h,y)}function Q(p,l,h,y){return Lt(Bt(l),p,h,y)}function oe(p,l,h,y){return Lt(pn(l,p.length-h),p,h,y)}s.prototype.write=function(l,h,y,E){if(h===void 0)E="utf8",y=this.length,h=0;else if(y===void 0&&typeof h=="string")E=h,y=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(y)?(y=y>>>0,E===void 0&&(E="utf8")):(E=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var A=this.length-h;if((y===void 0||y>A)&&(y=A),l.length>0&&(y<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");for(var O=!1;;)switch(E){case"hex":return q(this,l,h,y);case"utf8":case"utf-8":return M(this,l,h,y);case"ascii":case"latin1":case"binary":return G(this,l,h,y);case"base64":return Q(this,l,h,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,l,h,y);default:if(O)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),O=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function he(p,l,h){return l===0&&h===p.length?Sa.fromByteArray(p):Sa.fromByteArray(p.slice(l,h))}function te(p,l,h){h=Math.min(p.length,h);for(var y=[],E=l;E<h;){var A=p[E],O=null,C=A>239?4:A>223?3:A>191?2:1;if(E+C<=h){var U,B,k,j;switch(C){case 1:A<128&&(O=A);break;case 2:U=p[E+1],(U&192)===128&&(j=(A&31)<<6|U&63,j>127&&(O=j));break;case 3:U=p[E+1],B=p[E+2],(U&192)===128&&(B&192)===128&&(j=(A&15)<<12|(U&63)<<6|B&63,j>2047&&(j<55296||j>57343)&&(O=j));break;case 4:U=p[E+1],B=p[E+2],k=p[E+3],(U&192)===128&&(B&192)===128&&(k&192)===128&&(j=(A&15)<<18|(U&63)<<12|(B&63)<<6|k&63,j>65535&&j<1114112&&(O=j))}}O===null?(O=65533,C=1):O>65535&&(O-=65536,y.push(O>>>10&1023|55296),O=56320|O&1023),y.push(O),E+=C}return Re(y)}var Se=4096;function Re(p){var l=p.length;if(l<=Se)return String.fromCharCode.apply(String,p);for(var h="",y=0;y<l;)h+=String.fromCharCode.apply(String,p.slice(y,y+=Se));return h}function we(p,l,h){var y="";h=Math.min(p.length,h);for(var E=l;E<h;++E)y+=String.fromCharCode(p[E]&127);return y}function z(p,l,h){var y="";h=Math.min(p.length,h);for(var E=l;E<h;++E)y+=String.fromCharCode(p[E]);return y}function re(p,l,h){var y=p.length;(!l||l<0)&&(l=0),(!h||h<0||h>y)&&(h=y);for(var E="",A=l;A<h;++A)E+=S[p[A]];return E}function Z(p,l,h){for(var y=p.slice(l,h),E="",A=0;A<y.length-1;A+=2)E+=String.fromCharCode(y[A]+y[A+1]*256);return E}s.prototype.slice=function(l,h){var y=this.length;l=~~l,h=h===void 0?y:~~h,l<0?(l+=y,l<0&&(l=0)):l>y&&(l=y),h<0?(h+=y,h<0&&(h=0)):h>y&&(h=y),h<l&&(h=l);var E=this.subarray(l,h);return Object.setPrototypeOf(E,s.prototype),E};function W(p,l,h){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+l>h)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(l,h,y){l=l>>>0,h=h>>>0,y||W(l,h,this.length);for(var E=this[l],A=1,O=0;++O<h&&(A*=256);)E+=this[l+O]*A;return E},s.prototype.readUintBE=s.prototype.readUIntBE=function(l,h,y){l=l>>>0,h=h>>>0,y||W(l,h,this.length);for(var E=this[l+--h],A=1;h>0&&(A*=256);)E+=this[l+--h]*A;return E},s.prototype.readUint8=s.prototype.readUInt8=function(l,h){return l=l>>>0,h||W(l,1,this.length),this[l]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(l,h){return l=l>>>0,h||W(l,2,this.length),this[l]|this[l+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(l,h){return l=l>>>0,h||W(l,2,this.length),this[l]<<8|this[l+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(l,h){return l=l>>>0,h||W(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(l,h){return l=l>>>0,h||W(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},s.prototype.readIntLE=function(l,h,y){l=l>>>0,h=h>>>0,y||W(l,h,this.length);for(var E=this[l],A=1,O=0;++O<h&&(A*=256);)E+=this[l+O]*A;return A*=128,E>=A&&(E-=Math.pow(2,8*h)),E},s.prototype.readIntBE=function(l,h,y){l=l>>>0,h=h>>>0,y||W(l,h,this.length);for(var E=h,A=1,O=this[l+--E];E>0&&(A*=256);)O+=this[l+--E]*A;return A*=128,O>=A&&(O-=Math.pow(2,8*h)),O},s.prototype.readInt8=function(l,h){return l=l>>>0,h||W(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},s.prototype.readInt16LE=function(l,h){l=l>>>0,h||W(l,2,this.length);var y=this[l]|this[l+1]<<8;return y&32768?y|4294901760:y},s.prototype.readInt16BE=function(l,h){l=l>>>0,h||W(l,2,this.length);var y=this[l+1]|this[l]<<8;return y&32768?y|4294901760:y},s.prototype.readInt32LE=function(l,h){return l=l>>>0,h||W(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},s.prototype.readInt32BE=function(l,h){return l=l>>>0,h||W(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},s.prototype.readFloatLE=function(l,h){return l=l>>>0,h||W(l,4,this.length),Tn.read(this,l,!0,23,4)},s.prototype.readFloatBE=function(l,h){return l=l>>>0,h||W(l,4,this.length),Tn.read(this,l,!1,23,4)},s.prototype.readDoubleLE=function(l,h){return l=l>>>0,h||W(l,8,this.length),Tn.read(this,l,!0,52,8)},s.prototype.readDoubleBE=function(l,h){return l=l>>>0,h||W(l,8,this.length),Tn.read(this,l,!1,52,8)};function Te(p,l,h,y,E,A){if(!s.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>E||l<A)throw new RangeError('"value" argument is out of bounds');if(h+y>p.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(l,h,y,E){if(l=+l,h=h>>>0,y=y>>>0,!E){var A=Math.pow(2,8*y)-1;Te(this,l,h,y,A,0)}var O=1,C=0;for(this[h]=l&255;++C<y&&(O*=256);)this[h+C]=l/O&255;return h+y},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(l,h,y,E){if(l=+l,h=h>>>0,y=y>>>0,!E){var A=Math.pow(2,8*y)-1;Te(this,l,h,y,A,0)}var O=y-1,C=1;for(this[h+O]=l&255;--O>=0&&(C*=256);)this[h+O]=l/C&255;return h+y},s.prototype.writeUint8=s.prototype.writeUInt8=function(l,h,y){return l=+l,h=h>>>0,y||Te(this,l,h,1,255,0),this[h]=l&255,h+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(l,h,y){return l=+l,h=h>>>0,y||Te(this,l,h,2,65535,0),this[h]=l&255,this[h+1]=l>>>8,h+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(l,h,y){return l=+l,h=h>>>0,y||Te(this,l,h,2,65535,0),this[h]=l>>>8,this[h+1]=l&255,h+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(l,h,y){return l=+l,h=h>>>0,y||Te(this,l,h,4,4294967295,0),this[h+3]=l>>>24,this[h+2]=l>>>16,this[h+1]=l>>>8,this[h]=l&255,h+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(l,h,y){return l=+l,h=h>>>0,y||Te(this,l,h,4,4294967295,0),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4},s.prototype.writeIntLE=function(l,h,y,E){if(l=+l,h=h>>>0,!E){var A=Math.pow(2,8*y-1);Te(this,l,h,y,A-1,-A)}var O=0,C=1,U=0;for(this[h]=l&255;++O<y&&(C*=256);)l<0&&U===0&&this[h+O-1]!==0&&(U=1),this[h+O]=(l/C>>0)-U&255;return h+y},s.prototype.writeIntBE=function(l,h,y,E){if(l=+l,h=h>>>0,!E){var A=Math.pow(2,8*y-1);Te(this,l,h,y,A-1,-A)}var O=y-1,C=1,U=0;for(this[h+O]=l&255;--O>=0&&(C*=256);)l<0&&U===0&&this[h+O+1]!==0&&(U=1),this[h+O]=(l/C>>0)-U&255;return h+y},s.prototype.writeInt8=function(l,h,y){return l=+l,h=h>>>0,y||Te(this,l,h,1,127,-128),l<0&&(l=255+l+1),this[h]=l&255,h+1},s.prototype.writeInt16LE=function(l,h,y){return l=+l,h=h>>>0,y||Te(this,l,h,2,32767,-32768),this[h]=l&255,this[h+1]=l>>>8,h+2},s.prototype.writeInt16BE=function(l,h,y){return l=+l,h=h>>>0,y||Te(this,l,h,2,32767,-32768),this[h]=l>>>8,this[h+1]=l&255,h+2},s.prototype.writeInt32LE=function(l,h,y){return l=+l,h=h>>>0,y||Te(this,l,h,4,2147483647,-2147483648),this[h]=l&255,this[h+1]=l>>>8,this[h+2]=l>>>16,this[h+3]=l>>>24,h+4},s.prototype.writeInt32BE=function(l,h,y){return l=+l,h=h>>>0,y||Te(this,l,h,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4};function Ft(p,l,h,y,E,A){if(h+y>p.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function Oe(p,l,h,y,E){return l=+l,h=h>>>0,E||Ft(p,l,h,4),Tn.write(p,l,h,y,23,4),h+4}s.prototype.writeFloatLE=function(l,h,y){return Oe(this,l,h,!0,y)},s.prototype.writeFloatBE=function(l,h,y){return Oe(this,l,h,!1,y)};function mr(p,l,h,y,E){return l=+l,h=h>>>0,E||Ft(p,l,h,8),Tn.write(p,l,h,y,52,8),h+8}s.prototype.writeDoubleLE=function(l,h,y){return mr(this,l,h,!0,y)},s.prototype.writeDoubleBE=function(l,h,y){return mr(this,l,h,!1,y)},s.prototype.copy=function(l,h,y,E){if(!s.isBuffer(l))throw new TypeError("argument should be a Buffer");if(y||(y=0),!E&&E!==0&&(E=this.length),h>=l.length&&(h=l.length),h||(h=0),E>0&&E<y&&(E=y),E===y||l.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),l.length-h<E-y&&(E=l.length-h+y);var A=E-y;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,y,E):Uint8Array.prototype.set.call(l,this.subarray(y,E),h),A},s.prototype.fill=function(l,h,y,E){if(typeof l=="string"){if(typeof h=="string"?(E=h,h=0,y=this.length):typeof y=="string"&&(E=y,y=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!s.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(l.length===1){var A=l.charCodeAt(0);(E==="utf8"&&A<128||E==="latin1")&&(l=A)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(h<0||this.length<h||this.length<y)throw new RangeError("Out of range index");if(y<=h)return this;h=h>>>0,y=y===void 0?this.length:y>>>0,l||(l=0);var O;if(typeof l=="number")for(O=h;O<y;++O)this[O]=l;else{var C=s.isBuffer(l)?l:s.from(l,E),U=C.length;if(U===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(O=0;O<y-h;++O)this[O+h]=C[O%U]}return this};var dn=/[^+/0-9A-Za-z-_]/g;function ri(p){if(p=p.split("=")[0],p=p.trim().replace(dn,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function Ge(p,l){l=l||1/0;for(var h,y=p.length,E=null,A=[],O=0;O<y;++O){if(h=p.charCodeAt(O),h>55295&&h<57344){if(!E){if(h>56319){(l-=3)>-1&&A.push(239,191,189);continue}else if(O+1===y){(l-=3)>-1&&A.push(239,191,189);continue}E=h;continue}if(h<56320){(l-=3)>-1&&A.push(239,191,189),E=h;continue}h=(E-55296<<10|h-56320)+65536}else E&&(l-=3)>-1&&A.push(239,191,189);if(E=null,h<128){if((l-=1)<0)break;A.push(h)}else if(h<2048){if((l-=2)<0)break;A.push(h>>6|192,h&63|128)}else if(h<65536){if((l-=3)<0)break;A.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((l-=4)<0)break;A.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return A}function _r(p){for(var l=[],h=0;h<p.length;++h)l.push(p.charCodeAt(h)&255);return l}function pn(p,l){for(var h,y,E,A=[],O=0;O<p.length&&!((l-=2)<0);++O)h=p.charCodeAt(O),y=h>>8,E=h%256,A.push(E),A.push(y);return A}function Bt(p){return Sa.toByteArray(ri(p))}function Lt(p,l,h,y){for(var E=0;E<y&&!(E+h>=l.length||E>=p.length);++E)l[E+h]=p[E];return E}function qe(p,l){return p instanceof l||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===l.name}function b(p){return p!==p}var S=function(){for(var p="0123456789abcdef",l=new Array(256),h=0;h<16;++h)for(var y=h*16,E=0;E<16;++E)l[y+E]=p[h]+p[E];return l}()}),fe=As.Buffer;As.SlowBuffer;As.INSPECT_MAX_BYTES;As.kMaxLength;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var au=function(t,r){return au=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},au(t,r)};function Ju(e,t){au(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var on=function(e){Ju(t,e);function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),t}(Error),Ie=function(e){Ju(t,e);function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),t}(TypeError);function yo(e){return e&&e.Math==Math&&e}function $d(){return yo(typeof globalThis=="object"&&globalThis)||yo(typeof window=="object"&&window)||yo(typeof self=="object"&&self)||yo(typeof global=="object"&&global)||Function("return this")()}function lA(){var e=$d();return typeof e.navigator=="object"&&e.navigator.product==="ReactNative"}var hA=function(t){var r=lA()?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var n=fe.alloc(t),o=0;o<t;++o)n[o]=Math.floor(Math.random()*256);return n},dA=function(){if(typeof window!="undefined"){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues)return function(r){return e.getRandomValues(fe.alloc(r))}}if(typeof global!="undefined"&&global.crypto&&global.crypto.getRandomValues)return function(r){return global.crypto.getRandomValues(fe.alloc(r))};var t;try{t=require("crypto").randomBytes}catch{}return t||hA},kd=dA();function pA(e){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(e))}function Yu(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}function gA(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function yA(e){return Gi(e)&&Object.prototype.toString.call(e)==="[object Date]"}function Gi(e){return typeof e=="object"&&e!==null}function Ss(e,t){var r=!1;function n(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return r||(console.warn(t),r=!0),e.apply(this,o)}return n}function Ko(e){if(ArrayBuffer.isView(e))return fe.from(e.buffer,e.byteOffset,e.byteLength);if(pA(e))return fe.from(e);throw new Ie("Must use either Buffer or TypedArray")}var mA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,jd=function(e){return typeof e=="string"&&mA.test(e)},uu=function(e){if(!jd(e))throw new Ie('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var t=e.replace(/-/g,"");return fe.from(t,"hex")},Vf=function(e,t){return t===void 0&&(t=!0),t?e.toString("hex",0,4)+"-"+e.toString("hex",4,6)+"-"+e.toString("hex",6,8)+"-"+e.toString("hex",8,10)+"-"+e.toString("hex",10,16):e.toString("hex")},Ta=16,Ia=Symbol("id"),Wd=function(){function e(t){if(typeof t=="undefined")this.id=e.generate();else if(t instanceof e)this[Ia]=fe.from(t.id),this.__id=t.__id;else if(ArrayBuffer.isView(t)&&t.byteLength===Ta)this.id=Ko(t);else if(typeof t=="string")this.id=uu(t);else throw new Ie("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).")}return Object.defineProperty(e.prototype,"id",{get:function(){return this[Ia]},set:function(t){this[Ia]=t,e.cacheHexString&&(this.__id=Vf(t))},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(t){if(t===void 0&&(t=!0),e.cacheHexString&&this.__id)return this.__id;var r=Vf(this.id,t);return e.cacheHexString&&(this.__id=r),r},e.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(!t)return!1;if(t instanceof e)return t.id.equals(this.id);try{return new e(t).id.equals(this.id)}catch{return!1}},e.prototype.toBinary=function(){return new sn(this.id,sn.SUBTYPE_UUID)},e.generate=function(){var t=kd(Ta);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,fe.from(t)},e.isValid=function(t){if(!t)return!1;if(t instanceof e)return!0;if(typeof t=="string")return jd(t);if(Yu(t)){if(t.length!==Ta)return!1;try{return parseInt(t[6].toString(16)[0],10)===sn.SUBTYPE_UUID}catch{return!1}}return!1},e.createFromHexString=function(t){var r=uu(t);return new e(r)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new UUID("'+this.toHexString()+'")'},e}();Object.defineProperty(Wd.prototype,"_bsontype",{value:"UUID"});var sn=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(t!=null&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!(t instanceof ArrayBuffer)&&!Array.isArray(t))throw new Ie("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=r!=null?r:e.BSON_BINARY_SUBTYPE_DEFAULT,t==null?(this.buffer=fe.alloc(e.BUFFER_SIZE),this.position=0):(typeof t=="string"?this.buffer=fe.from(t,"binary"):Array.isArray(t)?this.buffer=fe.from(t):this.buffer=Ko(t),this.position=this.buffer.byteLength)}return e.prototype.put=function(t){if(typeof t=="string"&&t.length!==1)throw new Ie("only accepts single character String");if(typeof t!="number"&&t.length!==1)throw new Ie("only accepts single character Uint8Array or Array");var r;if(typeof t=="string"?r=t.charCodeAt(0):typeof t=="number"?r=t:r=t[0],r<0||r>255)throw new Ie("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=fe.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},e.prototype.write=function(t,r){if(r=typeof r=="number"?r:this.position,this.buffer.length<r+t.length){var n=fe.alloc(this.buffer.length+t.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(t)?(this.buffer.set(Ko(t),r),this.position=r+t.byteLength>this.position?r+t.length:this.position):typeof t=="string"&&(this.buffer.write(t,r,t.length,"binary"),this.position=r+t.length>this.position?r+t.length:this.position)},e.prototype.read=function(t,r){return r=r&&r>0?r:this.position,this.buffer.slice(t,t+r)},e.prototype.value=function(t){return t=!!t,t&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},e.prototype.length=function(){return this.position},e.prototype.toJSON=function(){return this.buffer.toString("base64")},e.prototype.toString=function(t){return this.buffer.toString(t)},e.prototype.toExtendedJSON=function(t){t=t||{};var r=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return t.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}},e.prototype.toUUID=function(){if(this.sub_type===e.SUBTYPE_UUID)return new Wd(this.buffer.slice(0,this.position));throw new on('Binary sub_type "'+this.sub_type+'" is not supported for converting to UUID. Only "'+e.SUBTYPE_UUID+'" is currently supported.')},e.fromExtendedJSON=function(t,r){r=r||{};var n,o;if("$binary"in t?r.legacy&&typeof t.$binary=="string"&&"$type"in t?(o=t.$type?parseInt(t.$type,16):0,n=fe.from(t.$binary,"base64")):typeof t.$binary!="string"&&(o=t.$binary.subType?parseInt(t.$binary.subType,16):0,n=fe.from(t.$binary.base64,"base64")):"$uuid"in t&&(o=4,n=uu(t.$uuid)),!n)throw new Ie("Unexpected Binary Extended JSON format "+JSON.stringify(t));return new e(n,o)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.value(!0);return'new Binary(Buffer.from("'+t.toString("hex")+'", "hex"), '+this.sub_type+")"},e.BSON_BINARY_SUBTYPE_DEFAULT=0,e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_ENCRYPTED=6,e.SUBTYPE_COLUMN=7,e.SUBTYPE_USER_DEFINED=128,e}();Object.defineProperty(sn.prototype,"_bsontype",{value:"Binary"});var Ts=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);this.code=t,this.scope=r}return e.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},e.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},e.fromExtendedJSON=function(t){return new e(t.$code,t.$scope)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toJSON();return'new Code("'+t.code+'"'+(t.scope?", "+JSON.stringify(t.scope):"")+")"},e}();Object.defineProperty(Ts.prototype,"_bsontype",{value:"Code"});function _A(e){return Gi(e)&&e.$id!=null&&typeof e.$ref=="string"&&(e.$db==null||typeof e.$db=="string")}var qi=function(){function e(t,r,n,o){if(!(this instanceof e))return new e(t,r,n,o);var i=t.split(".");i.length===2&&(n=i.shift(),t=i.shift()),this.collection=t,this.oid=r,this.db=n,this.fields=o||{}}return Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(t.$db=this.db),t},e.prototype.toExtendedJSON=function(t){t=t||{};var r={$ref:this.collection,$id:this.oid};return t.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r},e.fromExtendedJSON=function(t){var r=Object.assign({},t);return delete r.$ref,delete r.$id,delete r.$db,new e(t.$ref,t.$id,t.$db,r)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.oid===void 0||this.oid.toString===void 0?this.oid:this.oid.toString();return'new DBRef("'+this.namespace+'", new ObjectId("'+t+'")'+(this.db?', "'+this.db+'"':"")+")"},e}();Object.defineProperty(qi.prototype,"_bsontype",{value:"DBRef"});var vt=void 0;try{vt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var Jf=1<<16,vA=1<<24,Ln=Jf*Jf,qd=Ln*Ln,Yf=qd/2,zf={},Xf={},V=function(){function e(t,r,n){if(t===void 0&&(t=0),!(this instanceof e))return new e(t,r,n);typeof t=="bigint"?Object.assign(this,e.fromBigInt(t,!!r)):typeof t=="string"?Object.assign(this,e.fromString(t,!!r)):(this.low=t|0,this.high=r|0,this.unsigned=!!n),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return e.fromBits=function(t,r,n){return new e(t,r,n)},e.fromInt=function(t,r){var n,o,i;return r?(t>>>=0,(i=0<=t&&t<256)&&(o=Xf[t],o)?o:(n=e.fromBits(t,(t|0)<0?-1:0,!0),i&&(Xf[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(o=zf[t],o)?o:(n=e.fromBits(t,t<0?-1:0,!1),i&&(zf[t]=n),n))},e.fromNumber=function(t,r){if(isNaN(t))return r?e.UZERO:e.ZERO;if(r){if(t<0)return e.UZERO;if(t>=qd)return e.MAX_UNSIGNED_VALUE}else{if(t<=-Yf)return e.MIN_VALUE;if(t+1>=Yf)return e.MAX_VALUE}return t<0?e.fromNumber(-t,r).neg():e.fromBits(t%Ln|0,t/Ln|0,r)},e.fromBigInt=function(t,r){return e.fromString(t.toString(),r)},e.fromString=function(t,r,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e.ZERO;if(typeof r=="number"?(n=r,r=!1):r=!!r,n=n||10,n<2||36<n)throw RangeError("radix");var o;if((o=t.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return e.fromString(t.substring(1),r,n).neg();for(var i=e.fromNumber(Math.pow(n,8)),s=e.ZERO,u=0;u<t.length;u+=8){var f=Math.min(8,t.length-u),a=parseInt(t.substring(u,u+f),n);if(f<8){var c=e.fromNumber(Math.pow(n,f));s=s.mul(c).add(e.fromNumber(a))}else s=s.mul(i),s=s.add(e.fromNumber(a))}return s.unsigned=r,s},e.fromBytes=function(t,r,n){return n?e.fromBytesLE(t,r):e.fromBytesBE(t,r)},e.fromBytesLE=function(t,r){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,r)},e.fromBytesBE=function(t,r){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],r)},e.isLong=function(t){return Gi(t)&&t.__isLong__===!0},e.fromValue=function(t,r){return typeof t=="number"?e.fromNumber(t,r):typeof t=="string"?e.fromString(t,r):e.fromBits(t.low,t.high,typeof r=="boolean"?r:t.unsigned)},e.prototype.add=function(t){e.isLong(t)||(t=e.fromValue(t));var r=this.high>>>16,n=this.high&65535,o=this.low>>>16,i=this.low&65535,s=t.high>>>16,u=t.high&65535,f=t.low>>>16,a=t.low&65535,c=0,d=0,g=0,v=0;return v+=i+a,g+=v>>>16,v&=65535,g+=o+f,d+=g>>>16,g&=65535,d+=n+u,c+=d>>>16,d&=65535,c+=r+s,c&=65535,e.fromBits(g<<16|v,c<<16|d,this.unsigned)},e.prototype.and=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},e.prototype.compare=function(t){if(e.isLong(t)||(t=e.fromValue(t)),this.eq(t))return 0;var r=this.isNegative(),n=t.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},e.prototype.comp=function(t){return this.compare(t)},e.prototype.divide=function(t){if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())throw Error("division by zero");if(vt){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var r=(this.unsigned?vt.div_u:vt.div_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,vt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;var n,o,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return e.UZERO;if(t.gt(this.shru(1)))return e.UONE;i=e.UZERO}else{if(this.eq(e.MIN_VALUE)){if(t.eq(e.ONE)||t.eq(e.NEG_ONE))return e.MIN_VALUE;if(t.eq(e.MIN_VALUE))return e.ONE;var s=this.shr(1);return n=s.div(t).shl(1),n.eq(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(o=this.sub(t.mul(n)),i=n.add(o.div(t)),i)}else if(t.eq(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=e.ZERO}for(o=this;o.gte(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var u=Math.ceil(Math.log(n)/Math.LN2),f=u<=48?1:Math.pow(2,u-48),a=e.fromNumber(n),c=a.mul(t);c.isNegative()||c.gt(o);)n-=f,a=e.fromNumber(n,this.unsigned),c=a.mul(t);a.isZero()&&(a=e.ONE),i=i.add(a),o=o.sub(c)}return i},e.prototype.div=function(t){return this.divide(t)},e.prototype.equals=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},e.prototype.eq=function(t){return this.equals(t)},e.prototype.getHighBits=function(){return this.high},e.prototype.getHighBitsUnsigned=function(){return this.high>>>0},e.prototype.getLowBits=function(){return this.low},e.prototype.getLowBitsUnsigned=function(){return this.low>>>0},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(e.MIN_VALUE)?64:this.neg().getNumBitsAbs();var t=this.high!==0?this.high:this.low,r;for(r=31;r>0&&(t&1<<r)===0;r--);return this.high!==0?r+33:r+1},e.prototype.greaterThan=function(t){return this.comp(t)>0},e.prototype.gt=function(t){return this.greaterThan(t)},e.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},e.prototype.gte=function(t){return this.greaterThanOrEqual(t)},e.prototype.ge=function(t){return this.greaterThanOrEqual(t)},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.isNegative=function(){return!this.unsigned&&this.high<0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isPositive=function(){return this.unsigned||this.high>=0},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.lessThan=function(t){return this.comp(t)<0},e.prototype.lt=function(t){return this.lessThan(t)},e.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},e.prototype.lte=function(t){return this.lessThanOrEqual(t)},e.prototype.modulo=function(t){if(e.isLong(t)||(t=e.fromValue(t)),vt){var r=(this.unsigned?vt.rem_u:vt.rem_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,vt.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},e.prototype.mod=function(t){return this.modulo(t)},e.prototype.rem=function(t){return this.modulo(t)},e.prototype.multiply=function(t){if(this.isZero())return e.ZERO;if(e.isLong(t)||(t=e.fromValue(t)),vt){var r=vt.mul(this.low,this.high,t.low,t.high);return e.fromBits(r,vt.get_high(),this.unsigned)}if(t.isZero())return e.ZERO;if(this.eq(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.eq(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(e.TWO_PWR_24)&&t.lt(e.TWO_PWR_24))return e.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,u=t.high>>>16,f=t.high&65535,a=t.low>>>16,c=t.low&65535,d=0,g=0,v=0,T=0;return T+=s*c,v+=T>>>16,T&=65535,v+=i*c,g+=v>>>16,v&=65535,v+=s*a,g+=v>>>16,v&=65535,g+=o*c,d+=g>>>16,g&=65535,g+=i*a,d+=g>>>16,g&=65535,g+=s*f,d+=g>>>16,g&=65535,d+=n*c+o*a+i*f+s*u,d&=65535,e.fromBits(v<<16|T,d<<16|g,this.unsigned)},e.prototype.mul=function(t){return this.multiply(t)},e.prototype.negate=function(){return!this.unsigned&&this.eq(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.neg=function(){return this.negate()},e.prototype.not=function(){return e.fromBits(~this.low,~this.high,this.unsigned)},e.prototype.notEquals=function(t){return!this.equals(t)},e.prototype.neq=function(t){return this.notEquals(t)},e.prototype.ne=function(t){return this.notEquals(t)},e.prototype.or=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},e.prototype.shiftLeft=function(t){return e.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e.fromBits(0,this.low<<t-32,this.unsigned)},e.prototype.shl=function(t){return this.shiftLeft(t)},e.prototype.shiftRight=function(t){return e.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},e.prototype.shr=function(t){return this.shiftRight(t)},e.prototype.shiftRightUnsigned=function(t){if(e.isLong(t)&&(t=t.toInt()),t&=63,t===0)return this;var r=this.high;if(t<32){var n=this.low;return e.fromBits(n>>>t|r<<32-t,r>>>t,this.unsigned)}else return t===32?e.fromBits(r,0,this.unsigned):e.fromBits(r>>>t-32,0,this.unsigned)},e.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},e.prototype.shru=function(t){return this.shiftRightUnsigned(t)},e.prototype.subtract=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.add(t.neg())},e.prototype.sub=function(t){return this.subtract(t)},e.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},e.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*Ln+(this.low>>>0):this.high*Ln+(this.low>>>0)},e.prototype.toBigInt=function(){return BigInt(this.toString())},e.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},e.prototype.toBytesLE=function(){var t=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},e.prototype.toBytesBE=function(){var t=this.high,r=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},e.prototype.toSigned=function(){return this.unsigned?e.fromBits(this.low,this.high,!1):this},e.prototype.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(e.MIN_VALUE)){var r=e.fromNumber(t),n=this.div(r),o=n.mul(r).sub(this);return n.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var i=e.fromNumber(Math.pow(t,6),this.unsigned),s=this,u="";;){var f=s.div(i),a=s.sub(f.mul(i)).toInt()>>>0,c=a.toString(t);if(s=f,s.isZero())return c+u;for(;c.length<6;)c="0"+c;u=""+c+u}},e.prototype.toUnsigned=function(){return this.unsigned?this:e.fromBits(this.low,this.high,!0)},e.prototype.xor=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},e.prototype.eqz=function(){return this.isZero()},e.prototype.le=function(t){return this.lessThanOrEqual(t)},e.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,r){var n=e.fromString(t.$numberLong);return r&&r.relaxed?n.toNumber():n},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Long("'+this.toString()+'"'+(this.unsigned?", true":"")+")"},e.TWO_PWR_24=e.fromInt(vA),e.MAX_UNSIGNED_VALUE=e.fromBits(-1,-1,!0),e.ZERO=e.fromInt(0),e.UZERO=e.fromInt(0,!0),e.ONE=e.fromInt(1),e.UONE=e.fromInt(1,!0),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647,!1),e.MIN_VALUE=e.fromBits(0,-2147483648,!1),e}();Object.defineProperty(V.prototype,"__isLong__",{value:!0});Object.defineProperty(V.prototype,"_bsontype",{value:"Long"});var EA=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,wA=/^(\+|-)?(Infinity|inf)$/i,bA=/^(\+|-)?NaN$/i,Ai=6111,Oa=-6176,Qf=6176,AA=34,xa=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Zf=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),el=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),SA=/^([-+])?(\d+)?$/,TA=31,tl=16383,IA=30,OA=31;function rl(e){return!isNaN(parseInt(e,10))}function xA(e){var t=V.fromNumber(1e9),r=V.fromNumber(0);if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new V(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function NA(e,t){if(!e&&!t)return{high:V.fromNumber(0),low:V.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new V(e.getLowBits(),0),o=t.shiftRightUnsigned(32),i=new V(t.getLowBits(),0),s=r.multiply(o),u=r.multiply(i),f=n.multiply(o),a=n.multiply(i);return s=s.add(u.shiftRightUnsigned(32)),u=new V(u.getLowBits(),0).add(f).add(a.shiftRightUnsigned(32)),s=s.add(u.shiftRightUnsigned(32)),a=u.shiftLeft(32).add(new V(a.getLowBits(),0)),{high:s,low:a}}function RA(e,t){var r=e.high>>>0,n=t.high>>>0;if(r<n)return!0;if(r===n){var o=e.low>>>0,i=t.low>>>0;if(o<i)return!0}return!1}function In(e,t){throw new Ie('"'+e+'" is not a valid Decimal128 string - '+t)}var zu=function(){function e(t){if(!(this instanceof e))return new e(t);if(typeof t=="string")this.bytes=e.fromString(t).bytes;else if(Yu(t)){if(t.byteLength!==16)throw new Ie("Decimal128 must take a Buffer of 16 bytes");this.bytes=t}else throw new Ie("Decimal128 must take a Buffer or string")}return e.fromString=function(t){var r=!1,n=!1,o=!1,i=0,s=0,u=0,f=0,a=0,c=[0],d=0,g=0,v=0,T=0,I=0,_=0,w=new V(0,0),P=new V(0,0),R=0,N=0;if(t.length>=7e3)throw new Ie(""+t+" not a valid Decimal128 string");var D=t.match(EA),$=t.match(wA),q=t.match(bA);if(!D&&!$&&!q||t.length===0)throw new Ie(""+t+" not a valid Decimal128 string");if(D){var M=D[2],G=D[4],Q=D[5],oe=D[6];G&&oe===void 0&&In(t,"missing exponent power"),G&&M===void 0&&In(t,"missing exponent base"),G===void 0&&(Q||oe)&&In(t,"missing e before exponent")}if((t[N]==="+"||t[N]==="-")&&(r=t[N++]==="-"),!rl(t[N])&&t[N]!=="."){if(t[N]==="i"||t[N]==="I")return new e(fe.from(r?Zf:el));if(t[N]==="N")return new e(fe.from(xa))}for(;rl(t[N])||t[N]===".";){if(t[N]==="."){n&&In(t,"contains multiple periods"),n=!0,N=N+1;continue}d<34&&(t[N]!=="0"||o)&&(o||(a=s),o=!0,c[g++]=parseInt(t[N],10),d=d+1),o&&(u=u+1),n&&(f=f+1),s=s+1,N=N+1}if(n&&!s)throw new Ie(""+t+" not a valid Decimal128 string");if(t[N]==="e"||t[N]==="E"){var he=t.substr(++N).match(SA);if(!he||!he[2])return new e(fe.from(xa));I=parseInt(he[0],10),N=N+he[0].length}if(t[N])return new e(fe.from(xa));if(v=0,!d)v=0,T=0,c[0]=0,u=1,d=1,i=0;else if(T=d-1,i=u,i!==1)for(;c[a+i-1]===0;)i=i-1;for(I<=f&&f-I>1<<14?I=Oa:I=I-f;I>Ai;){if(T=T+1,T-v>AA){var te=c.join("");if(te.match(/^0+$/)){I=Ai;break}In(t,"overflow")}I=I-1}for(;I<Oa||d<u;){if(T===0&&i<d){I=Oa,i=0;break}if(d<u?u=u-1:T=T-1,I<Ai)I=I+1;else{var te=c.join("");if(te.match(/^0+$/)){I=Ai;break}In(t,"overflow")}}if(T-v+1<i){var Se=s;n&&(a=a+1,Se=Se+1),r&&(a=a+1,Se=Se+1);var Re=parseInt(t[a+T+1],10),we=0;if(Re>=5&&(we=1,Re===5)){for(we=c[T]%2===1?1:0,_=a+T+2;_<Se;_++)if(parseInt(t[_],10)){we=1;break}}if(we){for(var z=T;z>=0;z--)if(++c[z]>9&&(c[z]=0,z===0))if(I<Ai)I=I+1,c[z]=1;else return new e(fe.from(r?Zf:el))}}if(w=V.fromNumber(0),P=V.fromNumber(0),i===0)w=V.fromNumber(0),P=V.fromNumber(0);else if(T-v<17){var z=v;for(P=V.fromNumber(c[z++]),w=new V(0,0);z<=T;z++)P=P.multiply(V.fromNumber(10)),P=P.add(V.fromNumber(c[z]))}else{var z=v;for(w=V.fromNumber(c[z++]);z<=T-17;z++)w=w.multiply(V.fromNumber(10)),w=w.add(V.fromNumber(c[z]));for(P=V.fromNumber(c[z++]);z<=T;z++)P=P.multiply(V.fromNumber(10)),P=P.add(V.fromNumber(c[z]))}var re=NA(w,V.fromString("100000000000000000"));re.low=re.low.add(P),RA(re.low,P)&&(re.high=re.high.add(V.fromNumber(1))),R=I+Qf;var Z={low:V.fromNumber(0),high:V.fromNumber(0)};re.high.shiftRightUnsigned(49).and(V.fromNumber(1)).equals(V.fromNumber(1))?(Z.high=Z.high.or(V.fromNumber(3).shiftLeft(61)),Z.high=Z.high.or(V.fromNumber(R).and(V.fromNumber(16383).shiftLeft(47))),Z.high=Z.high.or(re.high.and(V.fromNumber(0x7fffffffffff)))):(Z.high=Z.high.or(V.fromNumber(R&16383).shiftLeft(49)),Z.high=Z.high.or(re.high.and(V.fromNumber(562949953421311)))),Z.low=re.low,r&&(Z.high=Z.high.or(V.fromString("9223372036854775808")));var W=fe.alloc(16);return N=0,W[N++]=Z.low.low&255,W[N++]=Z.low.low>>8&255,W[N++]=Z.low.low>>16&255,W[N++]=Z.low.low>>24&255,W[N++]=Z.low.high&255,W[N++]=Z.low.high>>8&255,W[N++]=Z.low.high>>16&255,W[N++]=Z.low.high>>24&255,W[N++]=Z.high.low&255,W[N++]=Z.high.low>>8&255,W[N++]=Z.high.low>>16&255,W[N++]=Z.high.low>>24&255,W[N++]=Z.high.high&255,W[N++]=Z.high.high>>8&255,W[N++]=Z.high.high>>16&255,W[N++]=Z.high.high>>24&255,new e(W)},e.prototype.toString=function(){for(var t,r=0,n=new Array(36),o=0;o<n.length;o++)n[o]=0;var i=0,s=!1,u,f={parts:[0,0,0,0]},a,c,d=[];i=0;var g=this.bytes,v=g[i++]|g[i++]<<8|g[i++]<<16|g[i++]<<24,T=g[i++]|g[i++]<<8|g[i++]<<16|g[i++]<<24,I=g[i++]|g[i++]<<8|g[i++]<<16|g[i++]<<24,_=g[i++]|g[i++]<<8|g[i++]<<16|g[i++]<<24;i=0;var w={low:new V(v,T),high:new V(I,_)};w.high.lessThan(V.ZERO)&&d.push("-");var P=_>>26&TA;if(P>>3===3){if(P===IA)return d.join("")+"Infinity";if(P===OA)return"NaN";t=_>>15&tl,u=8+(_>>14&1)}else u=_>>14&7,t=_>>17&tl;var R=t-Qf;if(f.parts[0]=(_&16383)+((u&15)<<14),f.parts[1]=I,f.parts[2]=T,f.parts[3]=v,f.parts[0]===0&&f.parts[1]===0&&f.parts[2]===0&&f.parts[3]===0)s=!0;else for(c=3;c>=0;c--){var N=0,D=xA(f);if(f=D.quotient,N=D.rem.low,!!N)for(a=8;a>=0;a--)n[c*9+a]=N%10,N=Math.floor(N/10)}if(s)r=1,n[i]=0;else for(r=36;!n[i];)r=r-1,i=i+1;var $=r-1+R;if($>=34||$<=-7||R>0){if(r>34)return d.push(""+0),R>0?d.push("E+"+R):R<0&&d.push("E"+R),d.join("");d.push(""+n[i++]),r=r-1,r&&d.push(".");for(var o=0;o<r;o++)d.push(""+n[i++]);d.push("E"),$>0?d.push("+"+$):d.push(""+$)}else if(R>=0)for(var o=0;o<r;o++)d.push(""+n[i++]);else{var q=r+R;if(q>0)for(var o=0;o<q;o++)d.push(""+n[i++]);else d.push("0");for(d.push(".");q++<0;)d.push("0");for(var o=0;o<r-Math.max(q-1,0);o++)d.push(""+n[i++])}return d.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Decimal128("'+this.toString()+'")'},e}();Object.defineProperty(zu.prototype,"_bsontype",{value:"Decimal128"});var Is=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t}return e.prototype.valueOf=function(){return this.value},e.prototype.toJSON=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toExtendedJSON=function(t){if(t&&(t.legacy||t.relaxed&&isFinite(this.value)))return this.value;if(Object.is(Math.sign(this.value),-0))return{$numberDouble:"-"+this.value.toFixed(1)};var r;return Number.isInteger(this.value)?(r=this.value.toFixed(1),r.length>=13&&(r=this.value.toExponential(13).toUpperCase())):r=this.value.toString(),{$numberDouble:r}},e.fromExtendedJSON=function(t,r){var n=parseFloat(t.$numberDouble);return r&&r.relaxed?n:new e(n)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toExtendedJSON();return"new Double("+t.$numberDouble+")"},e}();Object.defineProperty(Is.prototype,"_bsontype",{value:"Double"});var Os=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t|0}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},e.fromExtendedJSON=function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Int32("+this.valueOf()+")"},e}();Object.defineProperty(Os.prototype,"_bsontype",{value:"Int32"});var Xu=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$maxKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MaxKey()"},e}();Object.defineProperty(Xu.prototype,"_bsontype",{value:"MaxKey"});var Qu=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$minKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MinKey()"},e}();Object.defineProperty(Qu.prototype,"_bsontype",{value:"MinKey"});var CA=new RegExp("^[0-9a-fA-F]{24}$"),Gr=null,Gt=Symbol("id"),Rt=function(){function e(t){if(!(this instanceof e))return new e(t);var r;if(typeof t=="object"&&t&&"id"in t){if(typeof t.id!="string"&&!ArrayBuffer.isView(t.id))throw new Ie("Argument passed in must have an id that is of type string or Buffer");"toHexString"in t&&typeof t.toHexString=="function"?r=fe.from(t.toHexString(),"hex"):r=t.id}else r=t;if(r==null||typeof r=="number")this[Gt]=e.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this[Gt]=r instanceof fe?r:Ko(r);else if(typeof r=="string")if(r.length===12){var n=fe.from(r);if(n.byteLength===12)this[Gt]=n;else throw new Ie("Argument passed in must be a string of 12 bytes")}else if(r.length===24&&CA.test(r))this[Gt]=fe.from(r,"hex");else throw new Ie("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");else throw new Ie("Argument passed in does not match the accepted types");e.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(e.prototype,"id",{get:function(){return this[Gt]},set:function(t){this[Gt]=t,e.cacheHexString&&(this.__id=t.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(){if(e.cacheHexString&&this.__id)return this.__id;var t=this.id.toString("hex");return e.cacheHexString&&!this.__id&&(this.__id=t),t},e.getInc=function(){return e.index=(e.index+1)%16777215},e.generate=function(t){typeof t!="number"&&(t=Math.floor(Date.now()/1e3));var r=e.getInc(),n=fe.alloc(12);return n.writeUInt32BE(t,0),Gr===null&&(Gr=kd(5)),n[4]=Gr[0],n[5]=Gr[1],n[6]=Gr[2],n[7]=Gr[3],n[8]=Gr[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n},e.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(t==null)return!1;if(t instanceof e)return this[Gt][11]===t[Gt][11]&&this[Gt].equals(t[Gt]);if(typeof t=="string"&&e.isValid(t)&&t.length===12&&Yu(this.id))return t===fe.prototype.toString.call(this.id,"latin1");if(typeof t=="string"&&e.isValid(t)&&t.length===24)return t.toLowerCase()===this.toHexString();if(typeof t=="string"&&e.isValid(t)&&t.length===12)return fe.from(t).equals(this.id);if(typeof t=="object"&&"toHexString"in t&&typeof t.toHexString=="function"){var r=t.toHexString(),n=this.toHexString().toLowerCase();return typeof r=="string"&&r.toLowerCase()===n}return!1},e.prototype.getTimestamp=function(){var t=new Date,r=this.id.readUInt32BE(0);return t.setTime(Math.floor(r)*1e3),t},e.createPk=function(){return new e},e.createFromTime=function(t){var r=fe.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(t,0),new e(r)},e.createFromHexString=function(t){if(typeof t=="undefined"||t!=null&&t.length!==24)throw new Ie("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new e(fe.from(t,"hex"))},e.isValid=function(t){if(t==null)return!1;try{return new e(t),!0}catch{return!1}},e.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},e.fromExtendedJSON=function(t){return new e(t.$oid)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new ObjectId("'+this.toHexString()+'")'},e.index=Math.floor(Math.random()*16777215),e}();Object.defineProperty(Rt.prototype,"generate",{value:Ss(function(e){return Rt.generate(e)},"Please use the static `ObjectId.generate(time)` instead")});Object.defineProperty(Rt.prototype,"getInc",{value:Ss(function(){return Rt.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(Rt.prototype,"get_inc",{value:Ss(function(){return Rt.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(Rt,"get_inc",{value:Ss(function(){return Rt.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(Rt.prototype,"_bsontype",{value:"ObjectID"});function PA(e){return e.split("").sort().join("")}var Hi=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this.pattern=t,this.options=PA(r!=null?r:""),this.pattern.indexOf("\0")!==-1)throw new on("BSON Regex patterns cannot contain null bytes, found: "+JSON.stringify(this.pattern));if(this.options.indexOf("\0")!==-1)throw new on("BSON Regex options cannot contain null bytes, found: "+JSON.stringify(this.options));for(var n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new on("The regular expression option ["+this.options[n]+"] is not supported")}return e.parseOptions=function(t){return t?t.split("").sort().join(""):""},e.prototype.toExtendedJSON=function(t){return t=t||{},t.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},e.fromExtendedJSON=function(t){if("$regex"in t)if(typeof t.$regex!="string"){if(t.$regex._bsontype==="BSONRegExp")return t}else return new e(t.$regex,e.parseOptions(t.$options));if("$regularExpression"in t)return new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options));throw new Ie("Unexpected BSONRegExp EJSON object form: "+JSON.stringify(t))},e}();Object.defineProperty(Hi.prototype,"_bsontype",{value:"BSONRegExp"});var Zu=function(){function e(t){if(!(this instanceof e))return new e(t);this.value=t}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return this.value},e.prototype.inspect=function(){return'new BSONSymbol("'+this.value+'")'},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(){return{$symbol:this.value}},e.fromExtendedJSON=function(t){return new e(t.$symbol)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e}();Object.defineProperty(Zu.prototype,"_bsontype",{value:"Symbol"});var FA=V,Hd=function(e){Ju(t,e);function t(r,n){var o=this;return o instanceof t?(V.isLong(r)?o=e.call(this,r.low,r.high,!0)||this:Gi(r)&&typeof r.t!="undefined"&&typeof r.i!="undefined"?o=e.call(this,r.i,r.t,!0)||this:o=e.call(this,r,n,!0)||this,Object.defineProperty(o,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),o):new t(r,n)}return t.prototype.toJSON=function(){return{$timestamp:this.toString()}},t.fromInt=function(r){return new t(V.fromInt(r,!0))},t.fromNumber=function(r){return new t(V.fromNumber(r,!0))},t.fromBits=function(r,n){return new t(r,n)},t.fromString=function(r,n){return new t(V.fromString(r,!0,n))},t.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},t.fromExtendedJSON=function(r){return new t(r.$timestamp)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Timestamp({ t: "+this.getHighBits()+", i: "+this.getLowBits()+" })"},t.MAX_VALUE=V.MAX_UNSIGNED_VALUE,t}(FA);function BA(e){return Gi(e)&&Reflect.has(e,"_bsontype")&&typeof e._bsontype=="string"}var Kd=2147483647,Gd=-2147483648,Vd=9223372036854776e3,Jd=-9223372036854776e3,LA={$oid:Rt,$binary:sn,$uuid:sn,$symbol:Zu,$numberInt:Os,$numberDecimal:zu,$numberDouble:Is,$numberLong:V,$minKey:Qu,$maxKey:Xu,$regex:Hi,$regularExpression:Hi,$timestamp:Hd};function Yd(e,t){if(t===void 0&&(t={}),typeof e=="number"){if(t.relaxed||t.legacy)return e;if(Math.floor(e)===e){if(e>=Gd&&e<=Kd)return new Os(e);if(e>=Jd&&e<=Vd)return V.fromNumber(e)}return new Is(e)}if(e==null||typeof e!="object")return e;if(e.$undefined)return null;for(var r=Object.keys(e).filter(function(d){return d.startsWith("$")&&e[d]!=null}),n=0;n<r.length;n++){var o=LA[r[n]];if(o)return o.fromExtendedJSON(e,t)}if(e.$date!=null){var i=e.$date,s=new Date;return t.legacy?typeof i=="number"?s.setTime(i):typeof i=="string"&&s.setTime(Date.parse(i)):typeof i=="string"?s.setTime(Date.parse(i)):V.isLong(i)?s.setTime(i.toNumber()):typeof i=="number"&&t.relaxed&&s.setTime(i),s}if(e.$code!=null){var u=Object.assign({},e);return e.$scope&&(u.$scope=Yd(e.$scope)),Ts.fromExtendedJSON(e)}if(_A(e)||e.$dbPointer){var f=e.$ref?e:e.$dbPointer;if(f instanceof qi)return f;var a=Object.keys(f).filter(function(d){return d.startsWith("$")}),c=!0;if(a.forEach(function(d){["$ref","$id","$db"].indexOf(d)===-1&&(c=!1)}),c)return qi.fromExtendedJSON(f)}return e}function DA(e,t){return e.map(function(r,n){t.seenObjects.push({propertyName:"index "+n,obj:null});try{return Or(r,t)}finally{t.seenObjects.pop()}})}function nl(e){var t=e.toISOString();return e.getUTCMilliseconds()!==0?t:t.slice(0,-5)+"Z"}function Or(e,t){if((typeof e=="object"||typeof e=="function")&&e!==null){var r=t.seenObjects.findIndex(function(w){return w.obj===e});if(r!==-1){var n=t.seenObjects.map(function(w){return w.propertyName}),o=n.slice(0,r).map(function(w){return w+" -> "}).join(""),i=n[r],s=" -> "+n.slice(r+1,n.length-1).map(function(w){return w+" -> "}).join(""),u=n[n.length-1],f=" ".repeat(o.length+i.length/2),a="-".repeat(s.length+(i.length+u.length)/2-1);throw new Ie(`Converting circular structure to EJSON:
`+("    "+o+i+s+u+`
`)+("    "+f+"\\"+a+"/"))}t.seenObjects[t.seenObjects.length-1].obj=e}if(Array.isArray(e))return DA(e,t);if(e===void 0)return null;if(e instanceof Date||yA(e)){var c=e.getTime(),d=c>-1&&c<2534023188e5;return t.legacy?t.relaxed&&d?{$date:e.getTime()}:{$date:nl(e)}:t.relaxed&&d?{$date:nl(e)}:{$date:{$numberLong:e.getTime().toString()}}}if(typeof e=="number"&&(!t.relaxed||!isFinite(e))){if(Math.floor(e)===e){var g=e>=Gd&&e<=Kd,v=e>=Jd&&e<=Vd;if(g)return{$numberInt:e.toString()};if(v)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp||gA(e)){var T=e.flags;if(T===void 0){var I=e.toString().match(/[gimuy]*$/);I&&(T=I[0])}var _=new Hi(e.source,T);return _.toExtendedJSON(t)}return e!=null&&typeof e=="object"?MA(e,t):e}var UA={Binary:function(e){return new sn(e.value(),e.sub_type)},Code:function(e){return new Ts(e.code,e.scope)},DBRef:function(e){return new qi(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new zu(e.bytes)},Double:function(e){return new Is(e.value)},Int32:function(e){return new Os(e.value)},Long:function(e){return V.fromBits(e.low!=null?e.low:e.low_,e.low!=null?e.high:e.high_,e.low!=null?e.unsigned:e.unsigned_)},MaxKey:function(){return new Xu},MinKey:function(){return new Qu},ObjectID:function(e){return new Rt(e)},ObjectId:function(e){return new Rt(e)},BSONRegExp:function(e){return new Hi(e.pattern,e.options)},Symbol:function(e){return new Zu(e.value)},Timestamp:function(e){return Hd.fromBits(e.low,e.high)}};function MA(e,t){if(e==null||typeof e!="object")throw new on("not an object instance");var r=e._bsontype;if(typeof r=="undefined"){var n={};for(var o in e){t.seenObjects.push({propertyName:o,obj:null});try{n[o]=Or(e[o],t)}finally{t.seenObjects.pop()}}return n}else if(BA(e)){var i=e;if(typeof i.toExtendedJSON!="function"){var s=UA[e._bsontype];if(!s)throw new Ie("Unrecognized or invalid _bsontype: "+e._bsontype);i=s(i)}return r==="Code"&&i.scope?i=new Ts(i.code,Or(i.scope,t)):r==="DBRef"&&i.oid&&(i=new qi(Or(i.collection,t),Or(i.oid,t),Or(i.db,t),Or(i.fields,t))),i.toExtendedJSON(t)}else throw new on("_bsontype must be a string, but was: "+typeof r)}var lt;(function(e){function t(i,s){var u=Object.assign({},{relaxed:!0,legacy:!1},s);return typeof u.relaxed=="boolean"&&(u.strict=!u.relaxed),typeof u.strict=="boolean"&&(u.relaxed=!u.strict),JSON.parse(i,function(f,a){if(f.indexOf("\0")!==-1)throw new on("BSON Document field names cannot contain null bytes, found: "+JSON.stringify(f));return Yd(a,u)})}e.parse=t;function r(i,s,u,f){u!=null&&typeof u=="object"&&(f=u,u=0),s!=null&&typeof s=="object"&&!Array.isArray(s)&&(f=s,s=void 0,u=0);var a=Object.assign({relaxed:!0,legacy:!1},f,{seenObjects:[{propertyName:"(root)",obj:null}]}),c=Or(i,a);return JSON.stringify(c,s,u)}e.stringify=r;function n(i,s){return s=s||{},JSON.parse(r(i,s))}e.serialize=n;function o(i,s){return s=s||{},t(JSON.stringify(i),s)}e.deserialize=o})(lt||(lt={}));var il=$d();il.Map?il.Map:function(){function e(t){t===void 0&&(t=[]),this._keys=[],this._values={};for(var r=0;r<t.length;r++)if(t[r]!=null){var n=t[r],o=n[0],i=n[1];this._keys.push(o),this._values[o]={v:i,i:this._keys.length-1}}}return e.prototype.clear=function(){this._keys=[],this._values={}},e.prototype.delete=function(t){var r=this._values[t];return r==null?!1:(delete this._values[t],this._keys.splice(r.i,1),!0)},e.prototype.entries=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:n!==void 0?[n,t._values[n].v]:void 0,done:n===void 0}}}},e.prototype.forEach=function(t,r){r=r||this;for(var n=0;n<this._keys.length;n++){var o=this._keys[n];t.call(r,this._values[o].v,o,r)}},e.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},e.prototype.has=function(t){return this._values[t]!=null},e.prototype.keys=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:n!==void 0?n:void 0,done:n===void 0}}}},e.prototype.set=function(t,r){return this._values[t]?(this._values[t].v=r,this):(this._keys.push(t),this._values[t]={v:r,i:this._keys.length-1},this)},e.prototype.values=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:n!==void 0?t._values[n].v:void 0,done:n===void 0}}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),e}();var $A=Math.pow(2,53),kA=-Math.pow(2,53);V.fromNumber($A);V.fromNumber(kA);var jA=1024*1024*17;fe.alloc(jA);var WA=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},qA=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},HA=function(){function e(t,r){this._stages=[],t&&r&&(this._db=t,this._request=new Qe.reqClass(this._db.config),this._collectionName=r)}return e.prototype.end=function(){return WA(this,void 0,void 0,function(){var t;return qA(this,function(r){switch(r.label){case 0:if(!this._collectionName||!this._db)throw new Error("Aggregation pipeline cannot send request");return[4,this._request.send("database.aggregate",{collectionName:this._collectionName,stages:this._stages})];case 1:return t=r.sent(),t&&t.data&&t.data.list?[2,{requestId:t.requestId,data:JSON.parse(t.data.list).map(lt.parse)}]:[2,t]}})})},e.prototype.unwrap=function(){return this._stages},e.prototype.done=function(){return this._stages.map(function(t){var r,n=t.stageKey,o=t.stageValue;return r={},r[n]=JSON.parse(o),r})},e.prototype._pipe=function(t,r){return this._stages.push({stageKey:"$"+t,stageValue:JSON.stringify(r)}),this},e.prototype.addFields=function(t){return this._pipe("addFields",t)},e.prototype.bucket=function(t){return this._pipe("bucket",t)},e.prototype.bucketAuto=function(t){return this._pipe("bucketAuto",t)},e.prototype.count=function(t){return this._pipe("count",t)},e.prototype.geoNear=function(t){return this._pipe("geoNear",t)},e.prototype.group=function(t){return this._pipe("group",t)},e.prototype.limit=function(t){return this._pipe("limit",t)},e.prototype.match=function(t){return this._pipe("match",su.encode(t))},e.prototype.project=function(t){return this._pipe("project",t)},e.prototype.lookup=function(t){return this._pipe("lookup",t)},e.prototype.replaceRoot=function(t){return this._pipe("replaceRoot",t)},e.prototype.sample=function(t){return this._pipe("sample",t)},e.prototype.skip=function(t){return this._pipe("skip",t)},e.prototype.sort=function(t){return this._pipe("sort",t)},e.prototype.sortByCount=function(t){return this._pipe("sortByCount",t)},e.prototype.unwind=function(t){return this._pipe("unwind",t)},e}(),zd=HA,KA=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GA=function(e){KA(t,e);function t(r,n){return e.call(this,r,n)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return this._coll},enumerable:!0,configurable:!0}),t.prototype.doc=function(r){if(typeof r!="string"&&typeof r!="number")throw new Error("docId\u5FC5\u987B\u4E3A\u5B57\u7B26\u4E32\u6216\u6570\u5B57");return new Gf(this._db,this._coll,r)},t.prototype.add=function(r,n){var o=new Gf(this._db,this._coll,void 0);return o.create(r,n)},t.prototype.aggregate=function(){return new zd(this._db,this._coll)},t}(z1),VA={eq:function(e){return new Be(X.EQ,[e])},neq:function(e){return new Be(X.NEQ,[e])},lt:function(e){return new Be(X.LT,[e])},lte:function(e){return new Be(X.LTE,[e])},gt:function(e){return new Be(X.GT,[e])},gte:function(e){return new Be(X.GTE,[e])},in:function(e){return new Be(X.IN,e)},nin:function(e){return new Be(X.NIN,e)},all:function(e){return new Be(X.ALL,e)},elemMatch:function(e){return new Be(X.ELEM_MATCH,[e])},exists:function(e){return new Be(X.EXISTS,[e])},size:function(e){return new Be(X.SIZE,[e])},mod:function(e){return new Be(X.MOD,[e])},geoNear:function(e){return new Be(X.GEO_NEAR,[e])},geoWithin:function(e){return new Be(X.GEO_WITHIN,[e])},geoIntersects:function(e){return new Be(X.GEO_INTERSECTS,[e])},and:function(){var e=xe(arguments[0])?arguments[0]:Array.from(arguments);return new en(gt.AND,e)},nor:function(){var e=xe(arguments[0])?arguments[0]:Array.from(arguments);return new en(gt.NOR,e)},or:function(){var e=xe(arguments[0])?arguments[0]:Array.from(arguments);return new en(gt.OR,e)},not:function(){var e=xe(arguments[0])?arguments[0]:Array.from(arguments);return new en(gt.NOT,e)},set:function(e){return new Ce(ae.SET,[e])},remove:function(){return new Ce(ae.REMOVE,[])},inc:function(e){return new Ce(ae.INC,[e])},mul:function(e){return new Ce(ae.MUL,[e])},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r;if(Br(e[0])&&e[0].hasOwnProperty("each")){var n=e[0];r={$each:n.each,$position:n.position,$sort:n.sort,$slice:n.slice}}else xe(e[0])?r=e[0]:r=Array.from(e);return new Ce(ae.PUSH,r)},pull:function(e){return new Ce(ae.PULL,e)},pullAll:function(e){return new Ce(ae.PULL_ALL,e)},pop:function(){return new Ce(ae.POP,[])},shift:function(){return new Ce(ae.SHIFT,[])},unshift:function(){var e=xe(arguments[0])?arguments[0]:Array.from(arguments);return new Ce(ae.UNSHIFT,e)},addToSet:function(e){return new Ce(ae.ADD_TO_SET,e)},rename:function(e){return new Ce(ae.RENAME,[e])},bit:function(e){return new Ce(ae.BIT,[e])},max:function(e){return new Ce(ae.MAX,[e])},min:function(e){return new Ce(ae.MIN,[e])},expr:function(e){return{$expr:e}},jsonSchema:function(e){return{$jsonSchema:e}},text:function(e){return W1(e)?{$search:e.search}:{$search:e.search,$language:e.language,$caseSensitive:e.caseSensitive,$diacriticSensitive:e.diacriticSensitive}},aggregate:{pipeline:function(){return new zd},abs:function(e){return new L("abs",e)},add:function(e){return new L("add",e)},ceil:function(e){return new L("ceil",e)},divide:function(e){return new L("divide",e)},exp:function(e){return new L("exp",e)},floor:function(e){return new L("floor",e)},ln:function(e){return new L("ln",e)},log:function(e){return new L("log",e)},log10:function(e){return new L("log10",e)},mod:function(e){return new L("mod",e)},multiply:function(e){return new L("multiply",e)},pow:function(e){return new L("pow",e)},sqrt:function(e){return new L("sqrt",e)},subtract:function(e){return new L("subtract",e)},trunc:function(e){return new L("trunc",e)},arrayElemAt:function(e){return new L("arrayElemAt",e)},arrayToObject:function(e){return new L("arrayToObject",e)},concatArrays:function(e){return new L("concatArrays",e)},filter:function(e){return new L("filter",e)},in:function(e){return new L("in",e)},indexOfArray:function(e){return new L("indexOfArray",e)},isArray:function(e){return new L("isArray",e)},map:function(e){return new L("map",e)},range:function(e){return new L("range",e)},reduce:function(e){return new L("reduce",e)},reverseArray:function(e){return new L("reverseArray",e)},size:function(e){return new L("size",e)},slice:function(e){return new L("slice",e)},zip:function(e){return new L("zip",e)},and:function(e){return new L("and",e)},not:function(e){return new L("not",e)},or:function(e){return new L("or",e)},cmp:function(e){return new L("cmp",e)},eq:function(e){return new L("eq",e)},gt:function(e){return new L("gt",e)},gte:function(e){return new L("gte",e)},lt:function(e){return new L("lt",e)},lte:function(e){return new L("lte",e)},neq:function(e){return new L("ne",e)},cond:function(e){return new L("cond",e)},ifNull:function(e){return new L("ifNull",e)},switch:function(e){return new L("switch",e)},dateFromParts:function(e){return new L("dateFromParts",e)},dateFromString:function(e){return new L("dateFromString",e)},dayOfMonth:function(e){return new L("dayOfMonth",e)},dayOfWeek:function(e){return new L("dayOfWeek",e)},dayOfYear:function(e){return new L("dayOfYear",e)},isoDayOfWeek:function(e){return new L("isoDayOfWeek",e)},isoWeek:function(e){return new L("isoWeek",e)},isoWeekYear:function(e){return new L("isoWeekYear",e)},millisecond:function(e){return new L("millisecond",e)},minute:function(e){return new L("minute",e)},month:function(e){return new L("month",e)},second:function(e){return new L("second",e)},hour:function(e){return new L("hour",e)},week:function(e){return new L("week",e)},year:function(e){return new L("year",e)},literal:function(e){return new L("literal",e)},mergeObjects:function(e){return new L("mergeObjects",e)},objectToArray:function(e){return new L("objectToArray",e)},allElementsTrue:function(e){return new L("allElementsTrue",e)},anyElementTrue:function(e){return new L("anyElementTrue",e)},setDifference:function(e){return new L("setDifference",e)},setEquals:function(e){return new L("setEquals",e)},setIntersection:function(e){return new L("setIntersection",e)},setIsSubset:function(e){return new L("setIsSubset",e)},setUnion:function(e){return new L("setUnion",e)},concat:function(e){return new L("concat",e)},dateToString:function(e){return new L("dateToString",e)},indexOfBytes:function(e){return new L("indexOfBytes",e)},indexOfCP:function(e){return new L("indexOfCP",e)},split:function(e){return new L("split",e)},strLenBytes:function(e){return new L("strLenBytes",e)},strLenCP:function(e){return new L("strLenCP",e)},strcasecmp:function(e){return new L("strcasecmp",e)},substr:function(e){return new L("substr",e)},substrBytes:function(e){return new L("substrBytes",e)},substrCP:function(e){return new L("substrCP",e)},toLower:function(e){return new L("toLower",e)},toUpper:function(e){return new L("toUpper",e)},meta:function(e){return new L("meta",e)},addToSet:function(e){return new L("addToSet",e)},avg:function(e){return new L("avg",e)},first:function(e){return new L("first",e)},last:function(e){return new L("last",e)},max:function(e){return new L("max",e)},min:function(e){return new L("min",e)},push:function(e){return new L("push",e)},stdDevPop:function(e){return new L("stdDevPop",e)},stdDevSamp:function(e){return new L("stdDevSamp",e)},sum:function(e){return new L("sum",e)},let:function(e){return new L("let",e)}},project:{slice:function(e){return new ol("slice",e)},elemMatch:function(e){return new ol("elemMatch",e)}}},L=function(){function e(t,r){this["$"+t]=r}return e}(),ol=function(){function e(t,r){this["$"+t]=r}return e}(),JA=function(){function e(t){var r=t.regexp,n=t.options;if(!r)throw new TypeError("regexp must be a string");this.$regex=r,this.$options=n}return e.prototype.parse=function(){return{$regex:this.$regex,$options:this.$options}},Object.defineProperty(e.prototype,"_internalType",{get:function(){return Cd},enumerable:!0,configurable:!0}),e}();function YA(e){return new JA(e)}var Xd={CREATE_WATCH_NET_ERROR:{code:"CREATE_WATCH_NET_ERROR",message:"create watch network error"},CREATE_WACTH_EXCEED_ERROR:{code:"CREATE_WACTH_EXCEED_ERROR",message:"maximum connections exceed"},CREATE_WATCH_SERVER_ERROR:{code:"CREATE_WATCH_SERVER_ERROR",message:"create watch server error"},CONN_ERROR:{code:"CONN_ERROR",message:"connection error"},INVALID_PARAM:{code:"INVALID_PARAM",message:"Invalid request param"},INSERT_DOC_FAIL:{code:"INSERT_DOC_FAIL",message:"insert document failed"},DATABASE_TRANSACTION_CONFLICT:{code:"DATABASE_TRANSACTION_CONFLICT",message:"database transaction conflict"}},Yt=globalThis&&globalThis.__assign||function(){return Yt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Yt.apply(this,arguments)},Si=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},Ti=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},zA="database.getInTransaction",sl="database.updateDocInTransaction",XA="database.deleteDocInTransaction",QA="database.insertDocInTransaction",al=function(){function e(t,r,n){this._coll=r,this.id=n,this._transaction=t,this._request=this._transaction.getRequestMethod(),this._transactionId=this._transaction.getTransactionId()}return e.prototype.create=function(t){return Si(this,void 0,void 0,function(){var r,n,o,i;return Ti(this,function(s){switch(s.label){case 0:return r={collectionName:this._coll,transactionId:this._transactionId,data:lt.stringify(Wi(t),{relaxed:!1})},this.id&&(r._id=this.id),[4,this._request.send(QA,r)];case 1:if(n=s.sent(),n.code)throw n;if(o=lt.parse(n.inserted),i=lt.parse(n.ok),i==1&&o==1)return[2,Yt(Yt({},n),{ok:i,inserted:o})];throw new Error(Xd.INSERT_DOC_FAIL.message)}})})},e.prototype.get=function(){return Si(this,void 0,void 0,function(){var t,r;return Ti(this,function(n){switch(n.label){case 0:return t={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}}},[4,this._request.send(zA,t)];case 1:if(r=n.sent(),r.code)throw r;return[2,{data:r.data!=="null"?bs.formatField(lt.parse(r.data)):lt.parse(r.data),requestId:r.requestId}]}})})},e.prototype.set=function(t){return Si(this,void 0,void 0,function(){var r,n;return Ti(this,function(o){switch(o.label){case 0:return r={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}},data:lt.stringify(Wi(t),{relaxed:!1}),upsert:!0},[4,this._request.send(sl,r)];case 1:if(n=o.sent(),n.code)throw n;return[2,Yt(Yt({},n),{updated:lt.parse(n.updated),upserted:n.upserted?JSON.parse(n.upserted):null})]}})})},e.prototype.update=function(t){return Si(this,void 0,void 0,function(){var r,n;return Ti(this,function(o){switch(o.label){case 0:return r={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}},data:lt.stringify(Vu.encode(t),{relaxed:!1})},[4,this._request.send(sl,r)];case 1:if(n=o.sent(),n.code)throw n;return[2,Yt(Yt({},n),{updated:lt.parse(n.updated)})]}})})},e.prototype.delete=function(){return Si(this,void 0,void 0,function(){var t,r;return Ti(this,function(n){switch(n.label){case 0:return t={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}}},[4,this._request.send(XA,t)];case 1:if(r=n.sent(),r.code)throw r;return[2,Yt(Yt({},r),{deleted:lt.parse(r.deleted)})]}})})},e}(),ZA=function(){function e(t,r){this._coll=r,this._transaction=t}return e}(),eS=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tS=function(e){eS(t,e);function t(r,n){return e.call(this,r,n)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return this._coll},enumerable:!0,configurable:!0}),t.prototype.doc=function(r){if(typeof r!="string"&&typeof r!="number")throw new Error("docId\u5FC5\u987B\u4E3A\u5B57\u7B26\u4E32\u6216\u6570\u5B57");return new al(this._transaction,this._coll,r)},t.prototype.add=function(r){var n;r._id!==void 0&&(n=r._id);var o=new al(this._transaction,this._coll,n);return o.create(r)},t}(ZA),kn=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function f(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,f)}a((n=n.apply(e,t||[])).next())})},jn=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return f([a,c])}}function f(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},rS="database.startTransaction",nS="database.commitTransaction",iS="database.abortTransaction",Qd=function(){function e(t){this._db=t,this._request=new Qe.reqClass(this._db.config),this.aborted=!1,this.commited=!1,this.inited=!1}return e.prototype.init=function(){return kn(this,void 0,void 0,function(){var t;return jn(this,function(r){switch(r.label){case 0:return[4,this._request.send(rS)];case 1:if(t=r.sent(),t.code)throw t;return this.inited=!0,this._id=t.transactionId,[2]}})})},e.prototype.collection=function(t){if(!t)throw new Error("Collection name is required");return new tS(this,t)},e.prototype.getTransactionId=function(){return this._id},e.prototype.getRequestMethod=function(){return this._request},e.prototype.commit=function(){return kn(this,void 0,void 0,function(){var t,r;return jn(this,function(n){switch(n.label){case 0:return t={transactionId:this._id},[4,this._request.send(nS,t)];case 1:if(r=n.sent(),r.code)throw r;return this.commited=!0,[2,r]}})})},e.prototype.rollback=function(t){return kn(this,void 0,void 0,function(){var r,n;return jn(this,function(o){switch(o.label){case 0:return r={transactionId:this._id},[4,this._request.send(iS,r)];case 1:if(n=o.sent(),n.code)throw n;return this.aborted=!0,this.abortReason=t,[2,n]}})})},e}();function oS(){return kn(this,void 0,void 0,function(){var e;return jn(this,function(t){switch(t.label){case 0:return e=new Qd(this),[4,e.init()];case 1:return t.sent(),[2,e]}})})}function Zd(e,t){return t===void 0&&(t=3),kn(this,void 0,void 0,function(){var r,n,o,i,s=this;return jn(this,function(u){switch(u.label){case 0:return u.trys.push([0,4,,10]),r=new Qd(this),[4,r.init()];case 1:return u.sent(),[4,e(r)];case 2:if(n=u.sent(),r.aborted===!0)throw r.abortReason;return[4,r.commit()];case 3:return u.sent(),[2,n];case 4:if(o=u.sent(),r.inited===!1)throw o;return i=function(f){return kn(s,void 0,void 0,function(){return jn(this,function(a){switch(a.label){case 0:if(!(!r.aborted&&!r.commited))return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.rollback()];case 2:return a.sent(),[3,4];case 3:return a.sent(),[3,4];case 4:throw f;case 5:throw r.aborted===!0?r.abortReason:f}})})},t<=0?[4,i(o)]:[3,6];case 5:u.sent(),u.label=6;case 6:return o&&o.code===Xd.DATABASE_TRANSACTION_CONFLICT.code?[4,Zd.bind(this)(e,--t)]:[3,8];case 7:return[2,u.sent()];case 8:return[4,i(o)];case 9:return u.sent(),[3,10];case 10:return[2]}})})}var Qe=function(){function e(t){this.config=t,this.Geo=K1,this.serverDate=j1,this.command=VA,this.RegExp=YA,this.startTransaction=oS,this.runTransaction=Zd,this.logicCommand=en,this.updateCommand=Ce,this.queryCommand=Be}return e.prototype.collection=function(t){if(!t)throw new Error("Collection name is required");return new GA(this,t)},e.prototype.createCollection=function(t){var r=new e.reqClass(this.config),n={collectionName:t};return r.send("database.addCollection",n)},e}(),Go=globalThis&&globalThis.__assign||function(){return Go=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Go.apply(this,arguments)},sS="database";function aS(e){var t=this.platform,r=t.adapter,n=t.runtime;return Qe.reqClass=this.request.constructor,Qe.getAccessToken=this.authInstance?this.authInstance.getAccessToken.bind(this.authInstance):function(){return""},Qe.runtime=n,this.wsClientClass&&(Qe.wsClass=r.wsClass,Qe.wsClientClass=this.wsClientClass),Qe.ws||(Qe.ws=null),new Qe(Go(Go({},this.config),e))}var ep={name:sS,entity:{database:aS}};try{cloudbase.registerComponent(ep)}catch{}function uS(e){try{e.registerComponent(ep)}catch(t){console.warn(t)}}const cS="@cloudbase/js-sdk",fS="1.7.2",lS="cloudbase javascript sdk",hS="dist/index.cjs.js",dS="dist/index.esm.js",pS="miniprogram_dist",gS="./index.d.ts",yS={lint:'eslint --fix "./src/**/*.ts" "./database/**/*.ts"',build:"rm -rf dist/ && gulp build","build:cdn":"gulp cdn","build:miniapp":"gulp miniapp","build:e2e":"rm -rf dist/ && NODE_ENV=e2e gulp e2e"},mS={access:"public"},_S={type:"git",url:"https://github.com/TencentCloudBase/cloudbase-js-sdk"},vS=["tcb","cloudbase","Cloudbase","serverless","Serverless","javascript","JavaScript"],ES=["miniprogram_dist","**/dist/","/index.d.ts","**/package.json"],wS=["app","auth","database","functions","storage"],bS="",AS="ISC",SS={"@cloudbase/analytics":"^1.1.1-alpha.0","@cloudbase/app":"^1.4.1","@cloudbase/auth":"^1.6.1","@cloudbase/database":"0.9.18-next","@cloudbase/functions":"^1.3.4","@cloudbase/realtime":"^1.1.4-alpha.0","@cloudbase/storage":"^1.3.4","@cloudbase/types":"^1.1.3-alpha.0","@cloudbase/utilities":"^1.3.4"},TS={"@babel/core":"^7.9.0","@babel/plugin-proposal-class-properties":"^7.8.3","@babel/plugin-transform-runtime":"^7.9.0","@babel/preset-env":"^7.9.5","@babel/preset-typescript":"^7.9.0","@typescript-eslint/eslint-plugin":"^3.8.0","@typescript-eslint/parser":"^3.8.0","awesome-typescript-loader":"^5.2.1","babel-loader":"^8.1.0",eslint:"^7.6.0","eslint-config-alloy":"^3.7.4",gulp:"^4.0.2","gulp-clean":"^0.4.0","gulp-rename":"^2.0.0","gulp-sourcemaps":"^2.6.5","gulp-typescript":"^6.0.0-alpha.1","json-loader":"^0.5.7","merge-stream":"^2.0.0","package-json-cleanup-loader":"^1.0.3",typescript:"^3.8.3",webpack:"4.41.3","webpack-cli":"^3.3.11","webpack-node-externals":"^1.7.2","webpack-stream":"^5.2.1","webpack-visualizer-plugin":"^0.1.11"},IS=["last 2 version","> 1%","not dead","chrome 53"],OS="29ca0bf24318daa1fbb230910edf0b1545e17e7f";var xS={name:cS,version:fS,description:lS,main:hS,module:dS,miniprogram:pS,typings:gS,scripts:yS,publishConfig:mS,repository:_S,keywords:vS,files:ES,components:wS,author:bS,license:AS,dependencies:SS,devDependencies:TS,browserslist:IS,gitHead:OS},NS=xS.version;Tt.registerVersion(NS);try{UE(Tt),GE(Tt),zE(Tt),uS(Tt),E1(Tt),C1(Tt)}catch{}try{window.cloudbase=Tt}catch{}const RS=Tt.init({env:"env1-119983"}),Oo=RS.auth(),tp=Rn(null),rp=Rn(!1);Oo.onLoginStateChanged(e=>{tp.value=e,rp.value=!!e});const CS=()=>tp,PS=()=>rp,FS=["disabled"],BS={key:0,class:"i-eos-icons-loading vertical-bottom"},LS=os(" send code "),DS=["disabled"],US={key:0,class:"i-eos-icons-loading vertical-bottom"},MS=os(" login "),$S={__name:"MyLogin",emits:["success"],setup(e,{emit:t}){const r=CS(),n=Rn(!1),o="rounded-8 px-4 py-2 b-1 outline-none focus:bg-blue-100",i="rounded-8 outline-none hover:bg-blue-100 cursor-pointer px-4 py-2 b-1 ml-2";vo(r,g=>{console.log("state change",g)},{immediate:!0});const s=Rn(0),u=Rn(""),f=Rn(""),a=Qo({}),c=async()=>{n.value=!0;try{const{id:g}=await n_({mail:u.value});n.value=!1,g&&(a.id=g),s.value=1}finally{n.value=!1}},d=async()=>{n.value=!0;try{const{ticket:g}=await i_({...a,code:f.value});console.log({ticket:g}),await Oo.customAuthProvider().signIn(g),u.value=f.value="",s.value=0}finally{n.value=!1}};return(g,v)=>Cn(r)?(Sr(),Jr(Ze,{key:1},[os(cl(Cn(r).user.customUserId)+" ",1),Nr("button",{onClick:v[2]||(v[2]=(...T)=>Cn(Oo).signOut&&Cn(Oo).signOut(...T)),class:xr(i)},"logout")],64)):(Sr(),Jr(Ze,{key:0},[s.value===0?(Sr(),Jr(Ze,{key:0},[Sc(Nr("input",{"onUpdate:modelValue":v[0]||(v[0]=T=>u.value=T),type:"email",class:xr(o),placeholder:"email",required:""},null,512),[[qc,u.value]]),Nr("button",{onClick:c,class:xr(i),disabled:n.value},[n.value?(Sr(),Jr("i",BS)):js("",!0),LS],8,FS)],64)):s.value===1?(Sr(),Jr(Ze,{key:1},[Sc(Nr("input",{"onUpdate:modelValue":v[1]||(v[1]=T=>f.value=T),class:xr(o)},null,512),[[qc,f.value]]),Nr("button",{onClick:d,class:xr(i),disabled:n.value},[n.value?(Sr(),Jr("i",US)):js("",!0),MS],8,DS)],64)):js("",!0)],64))}};console.log({isVue2:Bm,isVue3:Lm});var kS={install(e){e.component("MyLogin",$S)}};const jS={__name:"App",setup(e){const t=PS();return console.log({hasLogin:t}),(r,n)=>{const o=Iy("my-login");return Sr(),Jr(Ze,null,[tr(o),Nr("div",null,cl(Cn(t)?"\u5DF2\u767B\u5F55":"\u672A\u767B\u5F55"),1)],64)}}};Pm(jS).use(kS).mount("#app");
